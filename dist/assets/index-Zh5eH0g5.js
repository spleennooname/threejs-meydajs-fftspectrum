import{g as Bo,M as Fo,O as sd,B as Uo,F as ao,S as Xe,U as Ar,V as et,W as _n,H as vn,N as od,C as ad,a as ni,b as pt,A as ld,c as hd,d as ud,e as Je,T as We,Q as lo,f as ho,R as dd,P as cd,h as pd,r as fd,i as md,j as _d,k as vd,l as bd,m as gd,n as wd,D as xd,o as yd,I as Cd,p as Pd,q as Ed,s as Sd,G as kd,t as Td,u as Md,v as Ad,w as Dd,x as Od,y as Vd,z as Ld,E as Rd,J as Nd,K as Id}from"./vendor-BXH_Y5OR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();function Gt(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function zo(c,e){c.prototype=Object.create(e.prototype),c.prototype.constructor=c,c.__proto__=e}var Pt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ri={duration:.5,overwrite:!1,delay:0},Kr,At=1e8,G=1/At,Dr=Math.PI*2,Bd=Dr/4,Fd=0,jo=Math.sqrt,Ud=Math.cos,zd=Math.sin,ot=function(e){return typeof e=="string"},st=function(e){return typeof e=="function"},Wt=function(e){return typeof e=="number"},Hr=function(e){return typeof e>"u"},Zt=function(e){return typeof e=="object"},bt=function(e){return e!==!1},Ko=function(){return typeof window<"u"},cn=function(e){return st(e)||ot(e)},Ho=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},dt=Array.isArray,Or=/(?:-?\.?\d|\.)+/gi,Yo=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ze=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,pr=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,qo=/[+-]=-?[.\d]+/,Go=/[^,'"\[\]\s]+/gi,jd=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Q,Ut,Vr,Yr,Et={},xn={},$o,Xo=function(e){return(xn=Le(e,Et))&&Rt},qr=function(e,r){return console.warn("Invalid property",e,"set to",r,"Missing plugin? gsap.registerPlugin()")},yn=function(e,r){return!r&&console.warn(e)},Wo=function(e,r){return e&&(Et[e]=r)&&xn&&(xn[e]=r)||Et},Ui=function(){return 0},Gr={},ue=[],Lr={},Zo,yt={},fr={},uo=30,bn=[],$r="",Xr=function(e){var r=e[0],s,o;if(Zt(r)||st(r)||(e=[e]),!(s=(r._gsap||{}).harness)){for(o=bn.length;o--&&!bn[o].targetTest(r););s=bn[o]}for(o=e.length;o--;)e[o]&&(e[o]._gsap||(e[o]._gsap=new ga(e[o],s)))||e.splice(o,1);return e},Ae=function(e){return e._gsap||Xr(Dt(e))[0]._gsap},Qo=function(e,r,s){return(s=e[r])&&st(s)?e[r]():Hr(s)&&e.getAttribute&&e.getAttribute(r)||s},gt=function(e,r){return(e=e.split(",")).forEach(r)||e},it=function(e){return Math.round(e*1e5)/1e5||0},ht=function(e){return Math.round(e*1e7)/1e7||0},ti=function(e,r){var s=r.charAt(0),o=parseFloat(r.substr(2));return e=parseFloat(e),s==="+"?e+o:s==="-"?e-o:s==="*"?e*o:e/o},Kd=function(e,r){for(var s=r.length,o=0;e.indexOf(r[o])<0&&++o<s;);return o<s},Cn=function(){var e=ue.length,r=ue.slice(0),s,o;for(Lr={},ue.length=0,s=0;s<e;s++)o=r[s],o&&o._lazy&&(o.render(o._lazy[0],o._lazy[1],!0)._lazy=0)},Jo=function(e,r,s,o){ue.length&&Cn(),e.render(r,s,o),ue.length&&Cn()},ta=function(e){var r=parseFloat(e);return(r||r===0)&&(e+"").match(Go).length<2?r:ot(e)?e.trim():e},ea=function(e){return e},Vt=function(e,r){for(var s in r)s in e||(e[s]=r[s]);return e},Hd=function(e){return function(r,s){for(var o in s)o in r||o==="duration"&&e||o==="ease"||(r[o]=s[o])}},Le=function(e,r){for(var s in r)e[s]=r[s];return e},co=function c(e,r){for(var s in r)s!=="__proto__"&&s!=="constructor"&&s!=="prototype"&&(e[s]=Zt(r[s])?c(e[s]||(e[s]={}),r[s]):r[s]);return e},Pn=function(e,r){var s={},o;for(o in e)o in r||(s[o]=e[o]);return s},Ri=function(e){var r=e.parent||Q,s=e.keyframes?Hd(dt(e.keyframes)):Vt;if(bt(e.inherit))for(;r;)s(e,r.vars.defaults),r=r.parent||r._dp;return e},Yd=function(e,r){for(var s=e.length,o=s===r.length;o&&s--&&e[s]===r[s];);return s<0},ia=function(e,r,s,o,l){var h=e[o],u;if(l)for(u=r[l];h&&h[l]>u;)h=h._prev;return h?(r._next=h._next,h._next=r):(r._next=e[s],e[s]=r),r._next?r._next._prev=r:e[o]=r,r._prev=h,r.parent=r._dp=e,r},Mn=function(e,r,s,o){s===void 0&&(s="_first"),o===void 0&&(o="_last");var l=r._prev,h=r._next;l?l._next=h:e[s]===r&&(e[s]=h),h?h._prev=l:e[o]===r&&(e[o]=l),r._next=r._prev=r.parent=null},$t=function(e,r){e.parent&&(!r||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},De=function(e,r){if(e&&(!r||r._end>e._dur||r._start<0))for(var s=e;s;)s._dirty=1,s=s.parent;return e},qd=function(e){for(var r=e.parent;r&&r.parent;)r._dirty=1,r.totalDuration(),r=r.parent;return e},Gd=function c(e){return!e||e._ts&&c(e.parent)},po=function(e){return e._repeat?si(e._tTime,e=e.duration()+e._rDelay)*e:0},si=function(e,r){var s=Math.floor(e/=r);return e&&s===e?s-1:s},En=function(e,r){return(e-r._start)*r._ts+(r._ts>=0?0:r._dirty?r.totalDuration():r._tDur)},An=function(e){return e._end=ht(e._start+(e._tDur/Math.abs(e._ts||e._rts||G)||0))},Wr=function(e,r){var s=e._dp;return s&&s.smoothChildTiming&&e._ts&&(e._start=ht(s._time-(e._ts>0?r/e._ts:((e._dirty?e.totalDuration():e._tDur)-r)/-e._ts)),An(e),s._dirty||De(s,e)),e},na=function(e,r){var s;if((r._time||r._initted&&!r._dur)&&(s=En(e.rawTime(),r),(!r._dur||Gi(0,r.totalDuration(),s)-r._tTime>G)&&r.render(s,!0)),De(e,r)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(s=e;s._dp;)s.rawTime()>=0&&s.totalTime(s._tTime),s=s._dp;e._zTime=-G}},zt=function(e,r,s,o){return r.parent&&$t(r),r._start=ht((Wt(s)?s:s||e!==Q?Mt(e,s,r):e._time)+r._delay),r._end=ht(r._start+(r.totalDuration()/Math.abs(r.timeScale())||0)),ia(e,r,"_first","_last",e._sort?"_start":0),Rr(r)||(e._recent=r),o||na(e,r),e},ra=function(e,r){return(Et.ScrollTrigger||qr("scrollTrigger",r))&&Et.ScrollTrigger.create(r,e)},sa=function(e,r,s,o){if(Qr(e,r),!e._initted)return 1;if(!s&&e._pt&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&Zo!==Ct.frame)return ue.push(e),e._lazy=[r,o],1},$d=function c(e){var r=e.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||c(r))},Rr=function(e){var r=e.data;return r==="isFromStart"||r==="isStart"},Xd=function(e,r,s,o){var l=e.ratio,h=r<0||!r&&(!e._start&&$d(e)&&!(!e._initted&&Rr(e))||(e._ts<0||e._dp._ts<0)&&!Rr(e))?0:1,u=e._rDelay,p=0,f,m,g;if(u&&e._repeat&&(p=Gi(0,e._tDur,r),m=si(p,u),e._yoyo&&m&1&&(h=1-h),m!==si(e._tTime,u)&&(l=1-h,e.vars.repeatRefresh&&e._initted&&e.invalidate())),h!==l||o||e._zTime===G||!r&&e._zTime){if(!e._initted&&sa(e,r,o,s))return;for(g=e._zTime,e._zTime=r||(s?G:0),s||(s=r&&!g),e.ratio=h,e._from&&(h=1-h),e._time=0,e._tTime=p,f=e._pt;f;)f.r(h,f.d),f=f._next;e._startAt&&r<0&&e._startAt.render(r,!0,!0),e._onUpdate&&!s&&Ot(e,"onUpdate"),p&&e._repeat&&!s&&e.parent&&Ot(e,"onRepeat"),(r>=e._tDur||r<0)&&e.ratio===h&&(h&&$t(e,1),s||(Ot(e,h?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=r)},Wd=function(e,r,s){var o;if(s>r)for(o=e._first;o&&o._start<=s;){if(o.data==="isPause"&&o._start>r)return o;o=o._next}else for(o=e._last;o&&o._start>=s;){if(o.data==="isPause"&&o._start<r)return o;o=o._prev}},oi=function(e,r,s,o){var l=e._repeat,h=ht(r)||0,u=e._tTime/e._tDur;return u&&!o&&(e._time*=h/e._dur),e._dur=h,e._tDur=l?l<0?1e10:ht(h*(l+1)+e._rDelay*l):h,u>0&&!o?Wr(e,e._tTime=e._tDur*u):e.parent&&An(e),s||De(e.parent,e),e},fo=function(e){return e instanceof vt?De(e):oi(e,e._dur)},Zd={_start:0,endTime:Ui,totalDuration:Ui},Mt=function c(e,r,s){var o=e.labels,l=e._recent||Zd,h=e.duration()>=At?l.endTime(!1):e._dur,u,p,f;return ot(r)&&(isNaN(r)||r in o)?(p=r.charAt(0),f=r.substr(-1)==="%",u=r.indexOf("="),p==="<"||p===">"?(u>=0&&(r=r.replace(/=/,"")),(p==="<"?l._start:l.endTime(l._repeat>=0))+(parseFloat(r.substr(1))||0)*(f?(u<0?l:s).totalDuration()/100:1)):u<0?(r in o||(o[r]=h),o[r]):(p=parseFloat(r.charAt(u-1)+r.substr(u+1)),f&&s&&(p=p/100*(dt(s)?s[0]:s).totalDuration()),u>1?c(e,r.substr(0,u-1),s)+p:h+p)):r==null?h:+r},Ni=function(e,r,s){var o=Wt(r[1]),l=(o?2:1)+(e<2?0:1),h=r[l],u,p;if(o&&(h.duration=r[1]),h.parent=s,e){for(u=h,p=s;p&&!("immediateRender"in u);)u=p.vars.defaults||{},p=bt(p.vars.inherit)&&p.parent;h.immediateRender=bt(u.immediateRender),e<2?h.runBackwards=1:h.startAt=r[l-1]}return new rt(r[0],h,r[l+1])},me=function(e,r){return e||e===0?r(e):r},Gi=function(e,r,s){return s<e?e:s>r?r:s},ut=function(e,r){return!ot(e)||!(r=jd.exec(e))?"":r[1]},Qd=function(e,r,s){return me(s,function(o){return Gi(e,r,o)})},Nr=[].slice,oa=function(e,r){return e&&Zt(e)&&"length"in e&&(!r&&!e.length||e.length-1 in e&&Zt(e[0]))&&!e.nodeType&&e!==Ut},Jd=function(e,r,s){return s===void 0&&(s=[]),e.forEach(function(o){var l;return ot(o)&&!r||oa(o,1)?(l=s).push.apply(l,Dt(o)):s.push(o)})||s},Dt=function(e,r,s){return ot(e)&&!s&&(Vr||!ai())?Nr.call((r||Yr).querySelectorAll(e),0):dt(e)?Jd(e,s):oa(e)?Nr.call(e,0):e?[e]:[]},tc=function(e){return e=Dt(e)[0]||yn("Invalid scope")||{},function(r){var s=e.current||e.nativeElement||e;return Dt(r,s.querySelectorAll?s:s===e?yn("Invalid scope")||Yr.createElement("div"):e)}},aa=function(e){return e.sort(function(){return .5-Math.random()})},la=function(e){if(st(e))return e;var r=Zt(e)?e:{each:e},s=Oe(r.ease),o=r.from||0,l=parseFloat(r.base)||0,h={},u=o>0&&o<1,p=isNaN(o)||u,f=r.axis,m=o,g=o;return ot(o)?m=g={center:.5,edges:.5,end:1}[o]||0:!u&&p&&(m=o[0],g=o[1]),function(w,v,C){var b=(C||r).length,y=h[b],E,P,S,M,k,T,V,D,O;if(!y){if(O=r.grid==="auto"?0:(r.grid||[1,At])[1],!O){for(V=-At;V<(V=C[O++].getBoundingClientRect().left)&&O<b;);O--}for(y=h[b]=[],E=p?Math.min(O,b)*m-.5:o%O,P=O===At?0:p?b*g/O-.5:o/O|0,V=0,D=At,T=0;T<b;T++)S=T%O-E,M=P-(T/O|0),y[T]=k=f?Math.abs(f==="y"?M:S):jo(S*S+M*M),k>V&&(V=k),k<D&&(D=k);o==="random"&&aa(y),y.max=V-D,y.min=D,y.v=b=(parseFloat(r.amount)||parseFloat(r.each)*(O>b?b-1:f?f==="y"?b/O:O:Math.max(O,b/O))||0)*(o==="edges"?-1:1),y.b=b<0?l-b:l,y.u=ut(r.amount||r.each)||0,s=s&&b<0?_a(s):s}return b=(y[w]-y.min)/y.max||0,ht(y.b+(s?s(b):b)*y.v)+y.u}},Ir=function(e){var r=Math.pow(10,((e+"").split(".")[1]||"").length);return function(s){var o=Math.round(parseFloat(s)/e)*e*r;return(o-o%1)/r+(Wt(s)?0:ut(s))}},ha=function(e,r){var s=dt(e),o,l;return!s&&Zt(e)&&(o=s=e.radius||At,e.values?(e=Dt(e.values),(l=!Wt(e[0]))&&(o*=o)):e=Ir(e.increment)),me(r,s?st(e)?function(h){return l=e(h),Math.abs(l-h)<=o?l:h}:function(h){for(var u=parseFloat(l?h.x:h),p=parseFloat(l?h.y:0),f=At,m=0,g=e.length,w,v;g--;)l?(w=e[g].x-u,v=e[g].y-p,w=w*w+v*v):w=Math.abs(e[g]-u),w<f&&(f=w,m=g);return m=!o||f<=o?e[m]:h,l||m===h||Wt(h)?m:m+ut(h)}:Ir(e))},ua=function(e,r,s,o){return me(dt(e)?!r:s===!0?!!(s=0):!o,function(){return dt(e)?e[~~(Math.random()*e.length)]:(s=s||1e-5)&&(o=s<1?Math.pow(10,(s+"").length-2):1)&&Math.floor(Math.round((e-s/2+Math.random()*(r-e+s*.99))/s)*s*o)/o})},ec=function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return function(o){return r.reduce(function(l,h){return h(l)},o)}},ic=function(e,r){return function(s){return e(parseFloat(s))+(r||ut(s))}},nc=function(e,r,s){return ca(e,r,0,1,s)},da=function(e,r,s){return me(s,function(o){return e[~~r(o)]})},rc=function c(e,r,s){var o=r-e;return dt(e)?da(e,c(0,e.length),r):me(s,function(l){return(o+(l-e)%o)%o+e})},sc=function c(e,r,s){var o=r-e,l=o*2;return dt(e)?da(e,c(0,e.length-1),r):me(s,function(h){return h=(l+(h-e)%l)%l||0,e+(h>o?l-h:h)})},zi=function(e){for(var r=0,s="",o,l,h,u;~(o=e.indexOf("random(",r));)h=e.indexOf(")",o),u=e.charAt(o+7)==="[",l=e.substr(o+7,h-o-7).match(u?Go:Or),s+=e.substr(r,o-r)+ua(u?l:+l[0],u?0:+l[1],+l[2]||1e-5),r=h+1;return s+e.substr(r,e.length-r)},ca=function(e,r,s,o,l){var h=r-e,u=o-s;return me(l,function(p){return s+((p-e)/h*u||0)})},oc=function c(e,r,s,o){var l=isNaN(e+r)?0:function(v){return(1-v)*e+v*r};if(!l){var h=ot(e),u={},p,f,m,g,w;if(s===!0&&(o=1)&&(s=null),h)e={p:e},r={p:r};else if(dt(e)&&!dt(r)){for(m=[],g=e.length,w=g-2,f=1;f<g;f++)m.push(c(e[f-1],e[f]));g--,l=function(C){C*=g;var b=Math.min(w,~~C);return m[b](C-b)},s=r}else o||(e=Le(dt(e)?[]:{},e));if(!m){for(p in r)Zr.call(u,e,p,"get",r[p]);l=function(C){return es(C,u)||(h?e.p:e)}}}return me(s,l)},mo=function(e,r,s){var o=e.labels,l=At,h,u,p;for(h in o)u=o[h]-r,u<0==!!s&&u&&l>(u=Math.abs(u))&&(p=h,l=u);return p},Ot=function(e,r,s){var o=e.vars,l=o[r],h,u;if(l)return h=o[r+"Params"],u=o.callbackScope||e,s&&ue.length&&Cn(),h?l.apply(u,h):l.call(u)},Oi=function(e){return $t(e),e.scrollTrigger&&e.scrollTrigger.kill(!1),e.progress()<1&&Ot(e,"onInterrupt"),e},Qe,ac=function(e){e=!e.name&&e.default||e;var r=e.name,s=st(e),o=r&&!s&&e.init?function(){this._props=[]}:e,l={init:Ui,render:es,add:Zr,kill:Cc,modifier:yc,rawVars:0},h={targetTest:0,get:0,getSetter:ts,aliases:{},register:0};if(ai(),e!==o){if(yt[r])return;Vt(o,Vt(Pn(e,l),h)),Le(o.prototype,Le(l,Pn(e,h))),yt[o.prop=r]=o,e.targetTest&&(bn.push(o),Gr[r]=1),r=(r==="css"?"CSS":r.charAt(0).toUpperCase()+r.substr(1))+"Plugin"}Wo(r,o),e.register&&e.register(Rt,o,wt)},q=255,Vi={aqua:[0,q,q],lime:[0,q,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,q],navy:[0,0,128],white:[q,q,q],olive:[128,128,0],yellow:[q,q,0],orange:[q,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[q,0,0],pink:[q,192,203],cyan:[0,q,q],transparent:[q,q,q,0]},mr=function(e,r,s){return e+=e<0?1:e>1?-1:0,(e*6<1?r+(s-r)*e*6:e<.5?s:e*3<2?r+(s-r)*(2/3-e)*6:r)*q+.5|0},pa=function(e,r,s){var o=e?Wt(e)?[e>>16,e>>8&q,e&q]:0:Vi.black,l,h,u,p,f,m,g,w,v,C;if(!o){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Vi[e])o=Vi[e];else if(e.charAt(0)==="#"){if(e.length<6&&(l=e.charAt(1),h=e.charAt(2),u=e.charAt(3),e="#"+l+l+h+h+u+u+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return o=parseInt(e.substr(1,6),16),[o>>16,o>>8&q,o&q,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),o=[e>>16,e>>8&q,e&q]}else if(e.substr(0,3)==="hsl"){if(o=C=e.match(Or),!r)p=+o[0]%360/360,f=+o[1]/100,m=+o[2]/100,h=m<=.5?m*(f+1):m+f-m*f,l=m*2-h,o.length>3&&(o[3]*=1),o[0]=mr(p+1/3,l,h),o[1]=mr(p,l,h),o[2]=mr(p-1/3,l,h);else if(~e.indexOf("="))return o=e.match(Yo),s&&o.length<4&&(o[3]=1),o}else o=e.match(Or)||Vi.transparent;o=o.map(Number)}return r&&!C&&(l=o[0]/q,h=o[1]/q,u=o[2]/q,g=Math.max(l,h,u),w=Math.min(l,h,u),m=(g+w)/2,g===w?p=f=0:(v=g-w,f=m>.5?v/(2-g-w):v/(g+w),p=g===l?(h-u)/v+(h<u?6:0):g===h?(u-l)/v+2:(l-h)/v+4,p*=60),o[0]=~~(p+.5),o[1]=~~(f*100+.5),o[2]=~~(m*100+.5)),s&&o.length<4&&(o[3]=1),o},fa=function(e){var r=[],s=[],o=-1;return e.split(de).forEach(function(l){var h=l.match(Ze)||[];r.push.apply(r,h),s.push(o+=h.length+1)}),r.c=s,r},_o=function(e,r,s){var o="",l=(e+o).match(de),h=r?"hsla(":"rgba(",u=0,p,f,m,g;if(!l)return e;if(l=l.map(function(w){return(w=pa(w,r,1))&&h+(r?w[0]+","+w[1]+"%,"+w[2]+"%,"+w[3]:w.join(","))+")"}),s&&(m=fa(e),p=s.c,p.join(o)!==m.c.join(o)))for(f=e.replace(de,"1").split(Ze),g=f.length-1;u<g;u++)o+=f[u]+(~p.indexOf(u)?l.shift()||h+"0,0,0,0)":(m.length?m:l.length?l:s).shift());if(!f)for(f=e.split(de),g=f.length-1;u<g;u++)o+=f[u]+l[u];return o+f[g]},de=(function(){var c="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Vi)c+="|"+e+"\\b";return new RegExp(c+")","gi")})(),lc=/hsl[a]?\(/,ma=function(e){var r=e.join(" "),s;if(de.lastIndex=0,de.test(r))return s=lc.test(r),e[1]=_o(e[1],s),e[0]=_o(e[0],s,fa(e[1])),!0},ji,Ct=(function(){var c=Date.now,e=500,r=33,s=c(),o=s,l=1e3/240,h=l,u=[],p,f,m,g,w,v,C=function b(y){var E=c()-o,P=y===!0,S,M,k,T;if(E>e&&(s+=E-r),o+=E,k=o-s,S=k-h,(S>0||P)&&(T=++g.frame,w=k-g.time*1e3,g.time=k=k/1e3,h+=S+(S>=l?4:l-S),M=1),P||(p=f(b)),M)for(v=0;v<u.length;v++)u[v](k,w,T,y)};return g={time:0,frame:0,tick:function(){C(!0)},deltaRatio:function(y){return w/(1e3/(y||60))},wake:function(){$o&&(!Vr&&Ko()&&(Ut=Vr=window,Yr=Ut.document||{},Et.gsap=Rt,(Ut.gsapVersions||(Ut.gsapVersions=[])).push(Rt.version),Xo(xn||Ut.GreenSockGlobals||!Ut.gsap&&Ut||{}),m=Ut.requestAnimationFrame),p&&g.sleep(),f=m||function(y){return setTimeout(y,h-g.time*1e3+1|0)},ji=1,C(2))},sleep:function(){(m?Ut.cancelAnimationFrame:clearTimeout)(p),ji=0,f=Ui},lagSmoothing:function(y,E){e=y||1/G,r=Math.min(E,e,0)},fps:function(y){l=1e3/(y||240),h=g.time*1e3+l},add:function(y,E,P){var S=E?function(M,k,T,V){y(M,k,T,V),g.remove(S)}:y;return g.remove(y),u[P?"unshift":"push"](S),ai(),S},remove:function(y,E){~(E=u.indexOf(y))&&u.splice(E,1)&&v>=E&&v--},_listeners:u},g})(),ai=function(){return!ji&&Ct.wake()},U={},hc=/^[\d.\-M][\d.\-,\s]/,uc=/["']/g,dc=function(e){for(var r={},s=e.substr(1,e.length-3).split(":"),o=s[0],l=1,h=s.length,u,p,f;l<h;l++)p=s[l],u=l!==h-1?p.lastIndexOf(","):p.length,f=p.substr(0,u),r[o]=isNaN(f)?f.replace(uc,"").trim():+f,o=p.substr(u+1).trim();return r},cc=function(e){var r=e.indexOf("(")+1,s=e.indexOf(")"),o=e.indexOf("(",r);return e.substring(r,~o&&o<s?e.indexOf(")",s+1):s)},pc=function(e){var r=(e+"").split("("),s=U[r[0]];return s&&r.length>1&&s.config?s.config.apply(null,~e.indexOf("{")?[dc(r[1])]:cc(e).split(",").map(ta)):U._CE&&hc.test(e)?U._CE("",e):s},_a=function(e){return function(r){return 1-e(1-r)}},va=function c(e,r){for(var s=e._first,o;s;)s instanceof vt?c(s,r):s.vars.yoyoEase&&(!s._yoyo||!s._repeat)&&s._yoyo!==r&&(s.timeline?c(s.timeline,r):(o=s._ease,s._ease=s._yEase,s._yEase=o,s._yoyo=r)),s=s._next},Oe=function(e,r){return e&&(st(e)?e:U[e]||pc(e))||r},Re=function(e,r,s,o){s===void 0&&(s=function(p){return 1-r(1-p)}),o===void 0&&(o=function(p){return p<.5?r(p*2)/2:1-r((1-p)*2)/2});var l={easeIn:r,easeOut:s,easeInOut:o},h;return gt(e,function(u){U[u]=Et[u]=l,U[h=u.toLowerCase()]=s;for(var p in l)U[h+(p==="easeIn"?".in":p==="easeOut"?".out":".inOut")]=U[u+"."+p]=l[p]}),l},ba=function(e){return function(r){return r<.5?(1-e(1-r*2))/2:.5+e((r-.5)*2)/2}},_r=function c(e,r,s){var o=r>=1?r:1,l=(s||(e?.3:.45))/(r<1?r:1),h=l/Dr*(Math.asin(1/o)||0),u=function(m){return m===1?1:o*Math.pow(2,-10*m)*zd((m-h)*l)+1},p=e==="out"?u:e==="in"?function(f){return 1-u(1-f)}:ba(u);return l=Dr/l,p.config=function(f,m){return c(e,f,m)},p},vr=function c(e,r){r===void 0&&(r=1.70158);var s=function(h){return h?--h*h*((r+1)*h+r)+1:0},o=e==="out"?s:e==="in"?function(l){return 1-s(1-l)}:ba(s);return o.config=function(l){return c(e,l)},o};gt("Linear,Quad,Cubic,Quart,Quint,Strong",function(c,e){var r=e<5?e+1:e;Re(c+",Power"+(r-1),e?function(s){return Math.pow(s,r)}:function(s){return s},function(s){return 1-Math.pow(1-s,r)},function(s){return s<.5?Math.pow(s*2,r)/2:1-Math.pow((1-s)*2,r)/2})});U.Linear.easeNone=U.none=U.Linear.easeIn;Re("Elastic",_r("in"),_r("out"),_r());(function(c,e){var r=1/e,s=2*r,o=2.5*r,l=function(u){return u<r?c*u*u:u<s?c*Math.pow(u-1.5/e,2)+.75:u<o?c*(u-=2.25/e)*u+.9375:c*Math.pow(u-2.625/e,2)+.984375};Re("Bounce",function(h){return 1-l(1-h)},l)})(7.5625,2.75);Re("Expo",function(c){return c?Math.pow(2,10*(c-1)):0});Re("Circ",function(c){return-(jo(1-c*c)-1)});Re("Sine",function(c){return c===1?1:-Ud(c*Bd)+1});Re("Back",vr("in"),vr("out"),vr());U.SteppedEase=U.steps=Et.SteppedEase={config:function(e,r){e===void 0&&(e=1);var s=1/e,o=e+(r?0:1),l=r?1:0,h=1-G;return function(u){return((o*Gi(0,h,u)|0)+l)*s}}};ri.ease=U["quad.out"];gt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(c){return $r+=c+","+c+"Params,"});var ga=function(e,r){this.id=Fd++,e._gsap=this,this.target=e,this.harness=r,this.get=r?r.get:Qo,this.set=r?r.getSetter:ts},Ki=(function(){function c(r){this.vars=r,this._delay=+r.delay||0,(this._repeat=r.repeat===1/0?-2:r.repeat||0)&&(this._rDelay=r.repeatDelay||0,this._yoyo=!!r.yoyo||!!r.yoyoEase),this._ts=1,oi(this,+r.duration,1,1),this.data=r.data,ji||Ct.wake()}var e=c.prototype;return e.delay=function(s){return s||s===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+s-this._delay),this._delay=s,this):this._delay},e.duration=function(s){return arguments.length?this.totalDuration(this._repeat>0?s+(s+this._rDelay)*this._repeat:s):this.totalDuration()&&this._dur},e.totalDuration=function(s){return arguments.length?(this._dirty=0,oi(this,this._repeat<0?s:(s-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(s,o){if(ai(),!arguments.length)return this._tTime;var l=this._dp;if(l&&l.smoothChildTiming&&this._ts){for(Wr(this,s),!l._dp||l.parent||na(l,this);l&&l.parent;)l.parent._time!==l._start+(l._ts>=0?l._tTime/l._ts:(l.totalDuration()-l._tTime)/-l._ts)&&l.totalTime(l._tTime,!0),l=l.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&s<this._tDur||this._ts<0&&s>0||!this._tDur&&!s)&&zt(this._dp,this,this._start-this._delay)}return(this._tTime!==s||!this._dur&&!o||this._initted&&Math.abs(this._zTime)===G||!s&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=s),Jo(this,s,o)),this},e.time=function(s,o){return arguments.length?this.totalTime(Math.min(this.totalDuration(),s+po(this))%(this._dur+this._rDelay)||(s?this._dur:0),o):this._time},e.totalProgress=function(s,o){return arguments.length?this.totalTime(this.totalDuration()*s,o):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(s,o){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-s:s)+po(this),o):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(s,o){var l=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(s-1)*l,o):this._repeat?si(this._tTime,l)+1:1},e.timeScale=function(s){if(!arguments.length)return this._rts===-G?0:this._rts;if(this._rts===s)return this;var o=this.parent&&this._ts?En(this.parent._time,this):this._tTime;return this._rts=+s||0,this._ts=this._ps||s===-G?0:this._rts,this.totalTime(Gi(-this._delay,this._tDur,o),!0),An(this),qd(this)},e.paused=function(s){return arguments.length?(this._ps!==s&&(this._ps=s,s?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ai(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==G&&(this._tTime-=G)))),this):this._ps},e.startTime=function(s){if(arguments.length){this._start=s;var o=this.parent||this._dp;return o&&(o._sort||!this.parent)&&zt(o,this,s-this._delay),this}return this._start},e.endTime=function(s){return this._start+(bt(s)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(s){var o=this.parent||this._dp;return o?s&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?En(o.rawTime(s),this):this._tTime:this._tTime},e.globalTime=function(s){for(var o=this,l=arguments.length?s:o.rawTime();o;)l=o._start+l/(o._ts||1),o=o._dp;return l},e.repeat=function(s){return arguments.length?(this._repeat=s===1/0?-2:s,fo(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(s){if(arguments.length){var o=this._time;return this._rDelay=s,fo(this),o?this.time(o):this}return this._rDelay},e.yoyo=function(s){return arguments.length?(this._yoyo=s,this):this._yoyo},e.seek=function(s,o){return this.totalTime(Mt(this,s),bt(o))},e.restart=function(s,o){return this.play().totalTime(s?-this._delay:0,bt(o))},e.play=function(s,o){return s!=null&&this.seek(s,o),this.reversed(!1).paused(!1)},e.reverse=function(s,o){return s!=null&&this.seek(s||this.totalDuration(),o),this.reversed(!0).paused(!1)},e.pause=function(s,o){return s!=null&&this.seek(s,o),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(s){return arguments.length?(!!s!==this.reversed()&&this.timeScale(-this._rts||(s?-G:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-G,this},e.isActive=function(){var s=this.parent||this._dp,o=this._start,l;return!!(!s||this._ts&&this._initted&&s.isActive()&&(l=s.rawTime(!0))>=o&&l<this.endTime(!0)-G)},e.eventCallback=function(s,o,l){var h=this.vars;return arguments.length>1?(o?(h[s]=o,l&&(h[s+"Params"]=l),s==="onUpdate"&&(this._onUpdate=o)):delete h[s],this):h[s]},e.then=function(s){var o=this;return new Promise(function(l){var h=st(s)?s:ea,u=function(){var f=o.then;o.then=null,st(h)&&(h=h(o))&&(h.then||h===o)&&(o.then=f),l(h),o.then=f};o._initted&&o.totalProgress()===1&&o._ts>=0||!o._tTime&&o._ts<0?u():o._prom=u})},e.kill=function(){Oi(this)},c})();Vt(Ki.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-G,_prom:0,_ps:!1,_rts:1});var vt=(function(c){zo(e,c);function e(s,o){var l;return s===void 0&&(s={}),l=c.call(this,s)||this,l.labels={},l.smoothChildTiming=!!s.smoothChildTiming,l.autoRemoveChildren=!!s.autoRemoveChildren,l._sort=bt(s.sortChildren),Q&&zt(s.parent||Q,Gt(l),o),s.reversed&&l.reverse(),s.paused&&l.paused(!0),s.scrollTrigger&&ra(Gt(l),s.scrollTrigger),l}var r=e.prototype;return r.to=function(o,l,h){return Ni(0,arguments,this),this},r.from=function(o,l,h){return Ni(1,arguments,this),this},r.fromTo=function(o,l,h,u){return Ni(2,arguments,this),this},r.set=function(o,l,h){return l.duration=0,l.parent=this,Ri(l).repeatDelay||(l.repeat=0),l.immediateRender=!!l.immediateRender,new rt(o,l,Mt(this,h),1),this},r.call=function(o,l,h){return zt(this,rt.delayedCall(0,o,l),h)},r.staggerTo=function(o,l,h,u,p,f,m){return h.duration=l,h.stagger=h.stagger||u,h.onComplete=f,h.onCompleteParams=m,h.parent=this,new rt(o,h,Mt(this,p)),this},r.staggerFrom=function(o,l,h,u,p,f,m){return h.runBackwards=1,Ri(h).immediateRender=bt(h.immediateRender),this.staggerTo(o,l,h,u,p,f,m)},r.staggerFromTo=function(o,l,h,u,p,f,m,g){return u.startAt=h,Ri(u).immediateRender=bt(u.immediateRender),this.staggerTo(o,l,u,p,f,m,g)},r.render=function(o,l,h){var u=this._time,p=this._dirty?this.totalDuration():this._tDur,f=this._dur,m=o<=0?0:ht(o),g=this._zTime<0!=o<0&&(this._initted||!f),w,v,C,b,y,E,P,S,M,k,T,V;if(this!==Q&&m>p&&o>=0&&(m=p),m!==this._tTime||h||g){if(u!==this._time&&f&&(m+=this._time-u,o+=this._time-u),w=m,M=this._start,S=this._ts,E=!S,g&&(f||(u=this._zTime),(o||!l)&&(this._zTime=o)),this._repeat){if(T=this._yoyo,y=f+this._rDelay,this._repeat<-1&&o<0)return this.totalTime(y*100+o,l,h);if(w=ht(m%y),m===p?(b=this._repeat,w=f):(b=~~(m/y),b&&b===m/y&&(w=f,b--),w>f&&(w=f)),k=si(this._tTime,y),!u&&this._tTime&&k!==b&&(k=b),T&&b&1&&(w=f-w,V=1),b!==k&&!this._lock){var D=T&&k&1,O=D===(T&&b&1);if(b<k&&(D=!D),u=D?0:f,this._lock=1,this.render(u||(V?0:ht(b*y)),l,!f)._lock=0,this._tTime=m,!l&&this.parent&&Ot(this,"onRepeat"),this.vars.repeatRefresh&&!V&&(this.invalidate()._lock=1),u&&u!==this._time||E!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(f=this._dur,p=this._tDur,O&&(this._lock=2,u=D?f:-1e-4,this.render(u,!0),this.vars.repeatRefresh&&!V&&this.invalidate()),this._lock=0,!this._ts&&!E)return this;va(this,V)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(P=Wd(this,ht(u),ht(w)),P&&(m-=w-(w=P._start))),this._tTime=m,this._time=w,this._act=!S,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=o,u=0),!u&&w&&!l&&(Ot(this,"onStart"),this._tTime!==m))return this;if(w>=u&&o>=0)for(v=this._first;v;){if(C=v._next,(v._act||w>=v._start)&&v._ts&&P!==v){if(v.parent!==this)return this.render(o,l,h);if(v.render(v._ts>0?(w-v._start)*v._ts:(v._dirty?v.totalDuration():v._tDur)+(w-v._start)*v._ts,l,h),w!==this._time||!this._ts&&!E){P=0,C&&(m+=this._zTime=-G);break}}v=C}else{v=this._last;for(var I=o<0?o:w;v;){if(C=v._prev,(v._act||I<=v._end)&&v._ts&&P!==v){if(v.parent!==this)return this.render(o,l,h);if(v.render(v._ts>0?(I-v._start)*v._ts:(v._dirty?v.totalDuration():v._tDur)+(I-v._start)*v._ts,l,h),w!==this._time||!this._ts&&!E){P=0,C&&(m+=this._zTime=I?-G:G);break}}v=C}}if(P&&!l&&(this.pause(),P.render(w>=u?0:-G)._zTime=w>=u?1:-1,this._ts))return this._start=M,An(this),this.render(o,l,h);this._onUpdate&&!l&&Ot(this,"onUpdate",!0),(m===p&&this._tTime>=this.totalDuration()||!m&&u)&&(M===this._start||Math.abs(S)!==Math.abs(this._ts))&&(this._lock||((o||!f)&&(m===p&&this._ts>0||!m&&this._ts<0)&&$t(this,1),!l&&!(o<0&&!u)&&(m||u||!p)&&(Ot(this,m===p&&o>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(m<p&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(o,l){var h=this;if(Wt(l)||(l=Mt(this,l,o)),!(o instanceof Ki)){if(dt(o))return o.forEach(function(u){return h.add(u,l)}),this;if(ot(o))return this.addLabel(o,l);if(st(o))o=rt.delayedCall(0,o);else return this}return this!==o?zt(this,o,l):this},r.getChildren=function(o,l,h,u){o===void 0&&(o=!0),l===void 0&&(l=!0),h===void 0&&(h=!0),u===void 0&&(u=-At);for(var p=[],f=this._first;f;)f._start>=u&&(f instanceof rt?l&&p.push(f):(h&&p.push(f),o&&p.push.apply(p,f.getChildren(!0,l,h)))),f=f._next;return p},r.getById=function(o){for(var l=this.getChildren(1,1,1),h=l.length;h--;)if(l[h].vars.id===o)return l[h]},r.remove=function(o){return ot(o)?this.removeLabel(o):st(o)?this.killTweensOf(o):(Mn(this,o),o===this._recent&&(this._recent=this._last),De(this))},r.totalTime=function(o,l){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ht(Ct.time-(this._ts>0?o/this._ts:(this.totalDuration()-o)/-this._ts))),c.prototype.totalTime.call(this,o,l),this._forcing=0,this):this._tTime},r.addLabel=function(o,l){return this.labels[o]=Mt(this,l),this},r.removeLabel=function(o){return delete this.labels[o],this},r.addPause=function(o,l,h){var u=rt.delayedCall(0,l||Ui,h);return u.data="isPause",this._hasPause=1,zt(this,u,Mt(this,o))},r.removePause=function(o){var l=this._first;for(o=Mt(this,o);l;)l._start===o&&l.data==="isPause"&&$t(l),l=l._next},r.killTweensOf=function(o,l,h){for(var u=this.getTweensOf(o,h),p=u.length;p--;)oe!==u[p]&&u[p].kill(o,l);return this},r.getTweensOf=function(o,l){for(var h=[],u=Dt(o),p=this._first,f=Wt(l),m;p;)p instanceof rt?Kd(p._targets,u)&&(f?(!oe||p._initted&&p._ts)&&p.globalTime(0)<=l&&p.globalTime(p.totalDuration())>l:!l||p.isActive())&&h.push(p):(m=p.getTweensOf(u,l)).length&&h.push.apply(h,m),p=p._next;return h},r.tweenTo=function(o,l){l=l||{};var h=this,u=Mt(h,o),p=l,f=p.startAt,m=p.onStart,g=p.onStartParams,w=p.immediateRender,v,C=rt.to(h,Vt({ease:l.ease||"none",lazy:!1,immediateRender:!1,time:u,overwrite:"auto",duration:l.duration||Math.abs((u-(f&&"time"in f?f.time:h._time))/h.timeScale())||G,onStart:function(){if(h.pause(),!v){var y=l.duration||Math.abs((u-(f&&"time"in f?f.time:h._time))/h.timeScale());C._dur!==y&&oi(C,y,0,1).render(C._time,!0,!0),v=1}m&&m.apply(C,g||[])}},l));return w?C.render(0):C},r.tweenFromTo=function(o,l,h){return this.tweenTo(l,Vt({startAt:{time:Mt(this,o)}},h))},r.recent=function(){return this._recent},r.nextLabel=function(o){return o===void 0&&(o=this._time),mo(this,Mt(this,o))},r.previousLabel=function(o){return o===void 0&&(o=this._time),mo(this,Mt(this,o),1)},r.currentLabel=function(o){return arguments.length?this.seek(o,!0):this.previousLabel(this._time+G)},r.shiftChildren=function(o,l,h){h===void 0&&(h=0);for(var u=this._first,p=this.labels,f;u;)u._start>=h&&(u._start+=o,u._end+=o),u=u._next;if(l)for(f in p)p[f]>=h&&(p[f]+=o);return De(this)},r.invalidate=function(){var o=this._first;for(this._lock=0;o;)o.invalidate(),o=o._next;return c.prototype.invalidate.call(this)},r.clear=function(o){o===void 0&&(o=!0);for(var l=this._first,h;l;)h=l._next,this.remove(l),l=h;return this._dp&&(this._time=this._tTime=this._pTime=0),o&&(this.labels={}),De(this)},r.totalDuration=function(o){var l=0,h=this,u=h._last,p=At,f,m,g;if(arguments.length)return h.timeScale((h._repeat<0?h.duration():h.totalDuration())/(h.reversed()?-o:o));if(h._dirty){for(g=h.parent;u;)f=u._prev,u._dirty&&u.totalDuration(),m=u._start,m>p&&h._sort&&u._ts&&!h._lock?(h._lock=1,zt(h,u,m-u._delay,1)._lock=0):p=m,m<0&&u._ts&&(l-=m,(!g&&!h._dp||g&&g.smoothChildTiming)&&(h._start+=m/h._ts,h._time-=m,h._tTime-=m),h.shiftChildren(-m,!1,-1/0),p=0),u._end>l&&u._ts&&(l=u._end),u=f;oi(h,h===Q&&h._time>l?h._time:l,1,1),h._dirty=0}return h._tDur},e.updateRoot=function(o){if(Q._ts&&(Jo(Q,En(o,Q)),Zo=Ct.frame),Ct.frame>=uo){uo+=Pt.autoSleep||120;var l=Q._first;if((!l||!l._ts)&&Pt.autoSleep&&Ct._listeners.length<2){for(;l&&!l._ts;)l=l._next;l||Ct.sleep()}}},e})(Ki);Vt(vt.prototype,{_lock:0,_hasPause:0,_forcing:0});var fc=function(e,r,s,o,l,h,u){var p=new wt(this._pt,e,r,0,1,Ea,null,l),f=0,m=0,g,w,v,C,b,y,E,P;for(p.b=s,p.e=o,s+="",o+="",(E=~o.indexOf("random("))&&(o=zi(o)),h&&(P=[s,o],h(P,e,r),s=P[0],o=P[1]),w=s.match(pr)||[];g=pr.exec(o);)C=g[0],b=o.substring(f,g.index),v?v=(v+1)%5:b.substr(-5)==="rgba("&&(v=1),C!==w[m++]&&(y=parseFloat(w[m-1])||0,p._pt={_next:p._pt,p:b||m===1?b:",",s:y,c:C.charAt(1)==="="?ti(y,C)-y:parseFloat(C)-y,m:v&&v<4?Math.round:0},f=pr.lastIndex);return p.c=f<o.length?o.substring(f,o.length):"",p.fp=u,(qo.test(o)||E)&&(p.e=0),this._pt=p,p},Zr=function(e,r,s,o,l,h,u,p,f){st(o)&&(o=o(l||0,e,h));var m=e[r],g=s!=="get"?s:st(m)?f?e[r.indexOf("set")||!st(e["get"+r.substr(3)])?r:"get"+r.substr(3)](f):e[r]():m,w=st(m)?f?gc:Ca:Jr,v;if(ot(o)&&(~o.indexOf("random(")&&(o=zi(o)),o.charAt(1)==="="&&(v=ti(g,o)+(ut(g)||0),(v||v===0)&&(o=v))),g!==o||Br)return!isNaN(g*o)&&o!==""?(v=new wt(this._pt,e,r,+g||0,o-(g||0),typeof m=="boolean"?xc:Pa,0,w),f&&(v.fp=f),u&&v.modifier(u,this,e),this._pt=v):(!m&&!(r in e)&&qr(r,o),fc.call(this,e,r,g,o,w,p||Pt.stringFilter,f))},mc=function(e,r,s,o,l){if(st(e)&&(e=Ii(e,l,r,s,o)),!Zt(e)||e.style&&e.nodeType||dt(e)||Ho(e))return ot(e)?Ii(e,l,r,s,o):e;var h={},u;for(u in e)h[u]=Ii(e[u],l,r,s,o);return h},wa=function(e,r,s,o,l,h){var u,p,f,m;if(yt[e]&&(u=new yt[e]).init(l,u.rawVars?r[e]:mc(r[e],o,l,h,s),s,o,h)!==!1&&(s._pt=p=new wt(s._pt,l,e,0,1,u.render,u,0,u.priority),s!==Qe))for(f=s._ptLookup[s._targets.indexOf(l)],m=u._props.length;m--;)f[u._props[m]]=p;return u},oe,Br,Qr=function c(e,r){var s=e.vars,o=s.ease,l=s.startAt,h=s.immediateRender,u=s.lazy,p=s.onUpdate,f=s.onUpdateParams,m=s.callbackScope,g=s.runBackwards,w=s.yoyoEase,v=s.keyframes,C=s.autoRevert,b=e._dur,y=e._startAt,E=e._targets,P=e.parent,S=P&&P.data==="nested"?P.parent._targets:E,M=e._overwrite==="auto"&&!Kr,k=e.timeline,T,V,D,O,I,$,J,tt,X,F,L,lt,jt;if(k&&(!v||!o)&&(o="none"),e._ease=Oe(o,ri.ease),e._yEase=w?_a(Oe(w===!0?o:w,ri.ease)):0,w&&e._yoyo&&!e._repeat&&(w=e._yEase,e._yEase=e._ease,e._ease=w),e._from=!k&&!!s.runBackwards,!k||v&&!s.stagger){if(tt=E[0]?Ae(E[0]).harness:0,lt=tt&&s[tt.prop],T=Pn(s,Gr),y&&($t(y.render(-1,!0)),y._lazy=0),l)if($t(e._startAt=rt.set(E,Vt({data:"isStart",overwrite:!1,parent:P,immediateRender:!0,lazy:bt(u),startAt:null,delay:0,onUpdate:p,onUpdateParams:f,callbackScope:m,stagger:0},l))),r<0&&!h&&!C&&e._startAt.render(-1,!0),h){if(r>0&&!C&&(e._startAt=0),b&&r<=0){r&&(e._zTime=r);return}}else C===!1&&(e._startAt=0);else if(g&&b){if(y)!C&&(e._startAt=0);else if(r&&(h=!1),D=Vt({overwrite:!1,data:"isFromStart",lazy:h&&bt(u),immediateRender:h,stagger:0,parent:P},T),lt&&(D[tt.prop]=lt),$t(e._startAt=rt.set(E,D)),r<0&&e._startAt.render(-1,!0),e._zTime=r,!h)c(e._startAt,G);else if(!r)return}for(e._pt=e._ptCache=0,u=b&&bt(u)||u&&!b,V=0;V<E.length;V++){if(I=E[V],J=I._gsap||Xr(E)[V]._gsap,e._ptLookup[V]=F={},Lr[J.id]&&ue.length&&Cn(),L=S===E?V:S.indexOf(I),tt&&(X=new tt).init(I,lt||T,e,L,S)!==!1&&(e._pt=O=new wt(e._pt,I,X.name,0,1,X.render,X,0,X.priority),X._props.forEach(function(Kt){F[Kt]=O}),X.priority&&($=1)),!tt||lt)for(D in T)yt[D]&&(X=wa(D,T,e,L,I,S))?X.priority&&($=1):F[D]=O=Zr.call(e,I,D,"get",T[D],L,S,0,s.stringFilter);e._op&&e._op[V]&&e.kill(I,e._op[V]),M&&e._pt&&(oe=e,Q.killTweensOf(I,F,e.globalTime(r)),jt=!e.parent,oe=0),e._pt&&u&&(Lr[J.id]=1)}$&&Sa(e),e._onInit&&e._onInit(e)}e._onUpdate=p,e._initted=(!e._op||e._pt)&&!jt,v&&r<=0&&k.render(At,!0,!0)},_c=function(e,r,s,o,l,h,u){var p=(e._pt&&e._ptCache||(e._ptCache={}))[r],f,m,g;if(!p)for(p=e._ptCache[r]=[],m=e._ptLookup,g=e._targets.length;g--;){if(f=m[g][r],f&&f.d&&f.d._pt)for(f=f.d._pt;f&&f.p!==r;)f=f._next;if(!f)return Br=1,e.vars[r]="+=0",Qr(e,u),Br=0,1;p.push(f)}for(g=p.length;g--;)f=p[g],f.s=(o||o===0)&&!l?o:f.s+(o||0)+h*f.c,f.c=s-f.s,f.e&&(f.e=it(s)+ut(f.e)),f.b&&(f.b=f.s+ut(f.b))},vc=function(e,r){var s=e[0]?Ae(e[0]).harness:0,o=s&&s.aliases,l,h,u,p;if(!o)return r;l=Le({},r);for(h in o)if(h in l)for(p=o[h].split(","),u=p.length;u--;)l[p[u]]=l[h];return l},bc=function(e,r,s,o){var l=r.ease||o||"power1.inOut",h,u;if(dt(r))u=s[e]||(s[e]=[]),r.forEach(function(p,f){return u.push({t:f/(r.length-1)*100,v:p,e:l})});else for(h in r)u=s[h]||(s[h]=[]),h==="ease"||u.push({t:parseFloat(e),v:r[h],e:l})},Ii=function(e,r,s,o,l){return st(e)?e.call(r,s,o,l):ot(e)&&~e.indexOf("random(")?zi(e):e},xa=$r+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",ya={};gt(xa+",id,stagger,delay,duration,paused,scrollTrigger",function(c){return ya[c]=1});var rt=(function(c){zo(e,c);function e(s,o,l,h){var u;typeof o=="number"&&(l.duration=o,o=l,l=null),u=c.call(this,h?o:Ri(o))||this;var p=u.vars,f=p.duration,m=p.delay,g=p.immediateRender,w=p.stagger,v=p.overwrite,C=p.keyframes,b=p.defaults,y=p.scrollTrigger,E=p.yoyoEase,P=o.parent||Q,S=(dt(s)||Ho(s)?Wt(s[0]):"length"in o)?[s]:Dt(s),M,k,T,V,D,O,I,$;if(u._targets=S.length?Xr(S):yn("GSAP target "+s+" not found. https://greensock.com",!Pt.nullTargetWarn)||[],u._ptLookup=[],u._overwrite=v,C||w||cn(f)||cn(m)){if(o=u.vars,M=u.timeline=new vt({data:"nested",defaults:b||{}}),M.kill(),M.parent=M._dp=Gt(u),M._start=0,w||cn(f)||cn(m)){if(V=S.length,I=w&&la(w),Zt(w))for(D in w)~xa.indexOf(D)&&($||($={}),$[D]=w[D]);for(k=0;k<V;k++)T=Pn(o,ya),T.stagger=0,E&&(T.yoyoEase=E),$&&Le(T,$),O=S[k],T.duration=+Ii(f,Gt(u),k,O,S),T.delay=(+Ii(m,Gt(u),k,O,S)||0)-u._delay,!w&&V===1&&T.delay&&(u._delay=m=T.delay,u._start+=m,T.delay=0),M.to(O,T,I?I(k,O,S):0),M._ease=U.none;M.duration()?f=m=0:u.timeline=0}else if(C){Ri(Vt(M.vars.defaults,{ease:"none"})),M._ease=Oe(C.ease||o.ease||"none");var J=0,tt,X,F;if(dt(C))C.forEach(function(L){return M.to(S,L,">")});else{T={};for(D in C)D==="ease"||D==="easeEach"||bc(D,C[D],T,C.easeEach);for(D in T)for(tt=T[D].sort(function(L,lt){return L.t-lt.t}),J=0,k=0;k<tt.length;k++)X=tt[k],F={ease:X.e,duration:(X.t-(k?tt[k-1].t:0))/100*f},F[D]=X.v,M.to(S,F,J),J+=F.duration;M.duration()<f&&M.to({},{duration:f-M.duration()})}}f||u.duration(f=M.duration())}else u.timeline=0;return v===!0&&!Kr&&(oe=Gt(u),Q.killTweensOf(S),oe=0),zt(P,Gt(u),l),o.reversed&&u.reverse(),o.paused&&u.paused(!0),(g||!f&&!C&&u._start===ht(P._time)&&bt(g)&&Gd(Gt(u))&&P.data!=="nested")&&(u._tTime=-G,u.render(Math.max(0,-m))),y&&ra(Gt(u),y),u}var r=e.prototype;return r.render=function(o,l,h){var u=this._time,p=this._tDur,f=this._dur,m=o>p-G&&o>=0?p:o<G?0:o,g,w,v,C,b,y,E,P,S;if(!f)Xd(this,o,l,h);else if(m!==this._tTime||!o||h||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=o<0){if(g=m,P=this.timeline,this._repeat){if(C=f+this._rDelay,this._repeat<-1&&o<0)return this.totalTime(C*100+o,l,h);if(g=ht(m%C),m===p?(v=this._repeat,g=f):(v=~~(m/C),v&&v===m/C&&(g=f,v--),g>f&&(g=f)),y=this._yoyo&&v&1,y&&(S=this._yEase,g=f-g),b=si(this._tTime,C),g===u&&!h&&this._initted)return this._tTime=m,this;v!==b&&(P&&this._yEase&&va(P,y),this.vars.repeatRefresh&&!y&&!this._lock&&(this._lock=h=1,this.render(ht(C*v),!0).invalidate()._lock=0))}if(!this._initted){if(sa(this,o<0?o:g,h,l))return this._tTime=0,this;if(u!==this._time)return this;if(f!==this._dur)return this.render(o,l,h)}if(this._tTime=m,this._time=g,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=E=(S||this._ease)(g/f),this._from&&(this.ratio=E=1-E),g&&!u&&!l&&(Ot(this,"onStart"),this._tTime!==m))return this;for(w=this._pt;w;)w.r(E,w.d),w=w._next;P&&P.render(o<0?o:!g&&y?-G:P._dur*P._ease(g/this._dur),l,h)||this._startAt&&(this._zTime=o),this._onUpdate&&!l&&(o<0&&this._startAt&&this._startAt.render(o,!0,h),Ot(this,"onUpdate")),this._repeat&&v!==b&&this.vars.onRepeat&&!l&&this.parent&&Ot(this,"onRepeat"),(m===this._tDur||!m)&&this._tTime===m&&(o<0&&this._startAt&&!this._onUpdate&&this._startAt.render(o,!0,!0),(o||!f)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&$t(this,1),!l&&!(o<0&&!u)&&(m||u)&&(Ot(this,m===p?"onComplete":"onReverseComplete",!0),this._prom&&!(m<p&&this.timeScale()>0)&&this._prom()))}return this},r.targets=function(){return this._targets},r.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),c.prototype.invalidate.call(this)},r.resetTo=function(o,l,h,u){ji||Ct.wake(),this._ts||this.play();var p=Math.min(this._dur,(this._dp._time-this._start)*this._ts),f;return this._initted||Qr(this,p),f=this._ease(p/this._dur),_c(this,o,l,h,u,f,p)?this.resetTo(o,l,h,u):(Wr(this,0),this.parent||ia(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(o,l){if(l===void 0&&(l="all"),!o&&(!l||l==="all"))return this._lazy=this._pt=0,this.parent?Oi(this):this;if(this.timeline){var h=this.timeline.totalDuration();return this.timeline.killTweensOf(o,l,oe&&oe.vars.overwrite!==!0)._first||Oi(this),this.parent&&h!==this.timeline.totalDuration()&&oi(this,this._dur*this.timeline._tDur/h,0,1),this}var u=this._targets,p=o?Dt(o):u,f=this._ptLookup,m=this._pt,g,w,v,C,b,y,E;if((!l||l==="all")&&Yd(u,p))return l==="all"&&(this._pt=0),Oi(this);for(g=this._op=this._op||[],l!=="all"&&(ot(l)&&(b={},gt(l,function(P){return b[P]=1}),l=b),l=vc(u,l)),E=u.length;E--;)if(~p.indexOf(u[E])){w=f[E],l==="all"?(g[E]=l,C=w,v={}):(v=g[E]=g[E]||{},C=l);for(b in C)y=w&&w[b],y&&((!("kill"in y.d)||y.d.kill(b)===!0)&&Mn(this,y,"_pt"),delete w[b]),v!=="all"&&(v[b]=1)}return this._initted&&!this._pt&&m&&Oi(this),this},e.to=function(o,l){return new e(o,l,arguments[2])},e.from=function(o,l){return Ni(1,arguments)},e.delayedCall=function(o,l,h,u){return new e(l,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:o,onComplete:l,onReverseComplete:l,onCompleteParams:h,onReverseCompleteParams:h,callbackScope:u})},e.fromTo=function(o,l,h){return Ni(2,arguments)},e.set=function(o,l){return l.duration=0,l.repeatDelay||(l.repeat=0),new e(o,l)},e.killTweensOf=function(o,l,h){return Q.killTweensOf(o,l,h)},e})(Ki);Vt(rt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});gt("staggerTo,staggerFrom,staggerFromTo",function(c){rt[c]=function(){var e=new vt,r=Nr.call(arguments,0);return r.splice(c==="staggerFromTo"?5:4,0,0),e[c].apply(e,r)}});var Jr=function(e,r,s){return e[r]=s},Ca=function(e,r,s){return e[r](s)},gc=function(e,r,s,o){return e[r](o.fp,s)},wc=function(e,r,s){return e.setAttribute(r,s)},ts=function(e,r){return st(e[r])?Ca:Hr(e[r])&&e.setAttribute?wc:Jr},Pa=function(e,r){return r.set(r.t,r.p,Math.round((r.s+r.c*e)*1e6)/1e6,r)},xc=function(e,r){return r.set(r.t,r.p,!!(r.s+r.c*e),r)},Ea=function(e,r){var s=r._pt,o="";if(!e&&r.b)o=r.b;else if(e===1&&r.e)o=r.e;else{for(;s;)o=s.p+(s.m?s.m(s.s+s.c*e):Math.round((s.s+s.c*e)*1e4)/1e4)+o,s=s._next;o+=r.c}r.set(r.t,r.p,o,r)},es=function(e,r){for(var s=r._pt;s;)s.r(e,s.d),s=s._next},yc=function(e,r,s,o){for(var l=this._pt,h;l;)h=l._next,l.p===o&&l.modifier(e,r,s),l=h},Cc=function(e){for(var r=this._pt,s,o;r;)o=r._next,r.p===e&&!r.op||r.op===e?Mn(this,r,"_pt"):r.dep||(s=1),r=o;return!s},Pc=function(e,r,s,o){o.mSet(e,r,o.m.call(o.tween,s,o.mt),o)},Sa=function(e){for(var r=e._pt,s,o,l,h;r;){for(s=r._next,o=l;o&&o.pr>r.pr;)o=o._next;(r._prev=o?o._prev:h)?r._prev._next=r:l=r,(r._next=o)?o._prev=r:h=r,r=s}e._pt=l},wt=(function(){function c(r,s,o,l,h,u,p,f,m){this.t=s,this.s=l,this.c=h,this.p=o,this.r=u||Pa,this.d=p||this,this.set=f||Jr,this.pr=m||0,this._next=r,r&&(r._prev=this)}var e=c.prototype;return e.modifier=function(s,o,l){this.mSet=this.mSet||this.set,this.set=Pc,this.m=s,this.mt=l,this.tween=o},c})();gt($r+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(c){return Gr[c]=1});Et.TweenMax=Et.TweenLite=rt;Et.TimelineLite=Et.TimelineMax=vt;Q=new vt({sortChildren:!1,defaults:ri,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Pt.stringFilter=ma;var Sn={registerPlugin:function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];r.forEach(function(o){return ac(o)})},timeline:function(e){return new vt(e)},getTweensOf:function(e,r){return Q.getTweensOf(e,r)},getProperty:function(e,r,s,o){ot(e)&&(e=Dt(e)[0]);var l=Ae(e||{}).get,h=s?ea:ta;return s==="native"&&(s=""),e&&(r?h((yt[r]&&yt[r].get||l)(e,r,s,o)):function(u,p,f){return h((yt[u]&&yt[u].get||l)(e,u,p,f))})},quickSetter:function(e,r,s){if(e=Dt(e),e.length>1){var o=e.map(function(m){return Rt.quickSetter(m,r,s)}),l=o.length;return function(m){for(var g=l;g--;)o[g](m)}}e=e[0]||{};var h=yt[r],u=Ae(e),p=u.harness&&(u.harness.aliases||{})[r]||r,f=h?function(m){var g=new h;Qe._pt=0,g.init(e,s?m+s:m,Qe,0,[e]),g.render(1,g),Qe._pt&&es(1,Qe)}:u.set(e,p);return h?f:function(m){return f(e,p,s?m+s:m,u,1)}},quickTo:function(e,r,s){var o,l=Rt.to(e,Le((o={},o[r]="+=0.1",o.paused=!0,o),s||{})),h=function(p,f,m){return l.resetTo(r,p,f,m)};return h.tween=l,h},isTweening:function(e){return Q.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Oe(e.ease,ri.ease)),co(ri,e||{})},config:function(e){return co(Pt,e||{})},registerEffect:function(e){var r=e.name,s=e.effect,o=e.plugins,l=e.defaults,h=e.extendTimeline;(o||"").split(",").forEach(function(u){return u&&!yt[u]&&!Et[u]&&yn(r+" effect requires "+u+" plugin.")}),fr[r]=function(u,p,f){return s(Dt(u),Vt(p||{},l),f)},h&&(vt.prototype[r]=function(u,p,f){return this.add(fr[r](u,Zt(p)?p:(f=p)&&{},this),f)})},registerEase:function(e,r){U[e]=Oe(r)},parseEase:function(e,r){return arguments.length?Oe(e,r):U},getById:function(e){return Q.getById(e)},exportRoot:function(e,r){e===void 0&&(e={});var s=new vt(e),o,l;for(s.smoothChildTiming=bt(e.smoothChildTiming),Q.remove(s),s._dp=0,s._time=s._tTime=Q._time,o=Q._first;o;)l=o._next,(r||!(!o._dur&&o instanceof rt&&o.vars.onComplete===o._targets[0]))&&zt(s,o,o._start-o._delay),o=l;return zt(Q,s,0),s},utils:{wrap:rc,wrapYoyo:sc,distribute:la,random:ua,snap:ha,normalize:nc,getUnit:ut,clamp:Qd,splitColor:pa,toArray:Dt,selector:tc,mapRange:ca,pipe:ec,unitize:ic,interpolate:oc,shuffle:aa},install:Xo,effects:fr,ticker:Ct,updateRoot:vt.updateRoot,plugins:yt,globalTimeline:Q,core:{PropTween:wt,globals:Wo,Tween:rt,Timeline:vt,Animation:Ki,getCache:Ae,_removeLinkedListItem:Mn,suppressOverwrites:function(e){return Kr=e}}};gt("to,from,fromTo,delayedCall,set,killTweensOf",function(c){return Sn[c]=rt[c]});Ct.add(vt.updateRoot);Qe=Sn.to({},{duration:0});var Ec=function(e,r){for(var s=e._pt;s&&s.p!==r&&s.op!==r&&s.fp!==r;)s=s._next;return s},Sc=function(e,r){var s=e._targets,o,l,h;for(o in r)for(l=s.length;l--;)h=e._ptLookup[l][o],h&&(h=h.d)&&(h._pt&&(h=Ec(h,o)),h&&h.modifier&&h.modifier(r[o],e,s[l],o))},br=function(e,r){return{name:e,rawVars:1,init:function(o,l,h){h._onInit=function(u){var p,f;if(ot(l)&&(p={},gt(l,function(m){return p[m]=1}),l=p),r){p={};for(f in l)p[f]=r(l[f]);l=p}Sc(u,l)}}}},Rt=Sn.registerPlugin({name:"attr",init:function(e,r,s,o,l){var h,u;for(h in r)u=this.add(e,"setAttribute",(e.getAttribute(h)||0)+"",r[h],o,l,0,0,h),u&&(u.op=h),this._props.push(h)}},{name:"endArray",init:function(e,r){for(var s=r.length;s--;)this.add(e,s,e[s]||0,r[s])}},br("roundProps",Ir),br("modifiers"),br("snap",ha))||Sn;rt.version=vt.version=Rt.version="3.10.4";$o=1;Ko()&&ai();U.Power0;U.Power1;U.Power2;U.Power3;U.Power4;U.Linear;U.Quad;U.Cubic;U.Quart;U.Quint;U.Strong;U.Elastic;U.Back;U.SteppedEase;U.Bounce;U.Sine;U.Expo;U.Circ;var vo,ae,ei,is,Me,bo,kc=function(){return typeof window<"u"},ce={},Se=180/Math.PI,ii=Math.PI/180,qe=Math.atan2,go=1e8,ka=/([A-Z])/g,Tc=/(left|right|width|margin|padding|x)/i,Mc=/[\s,\(]\S/,le={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ta=function(e,r){return r.set(r.t,r.p,Math.round((r.s+r.c*e)*1e4)/1e4+r.u,r)},Ac=function(e,r){return r.set(r.t,r.p,e===1?r.e:Math.round((r.s+r.c*e)*1e4)/1e4+r.u,r)},Dc=function(e,r){return r.set(r.t,r.p,e?Math.round((r.s+r.c*e)*1e4)/1e4+r.u:r.b,r)},Oc=function(e,r){var s=r.s+r.c*e;r.set(r.t,r.p,~~(s+(s<0?-.5:.5))+r.u,r)},Ma=function(e,r){return r.set(r.t,r.p,e?r.e:r.b,r)},Aa=function(e,r){return r.set(r.t,r.p,e!==1?r.b:r.e,r)},Vc=function(e,r,s){return e.style[r]=s},Lc=function(e,r,s){return e.style.setProperty(r,s)},Rc=function(e,r,s){return e._gsap[r]=s},Nc=function(e,r,s){return e._gsap.scaleX=e._gsap.scaleY=s},Ic=function(e,r,s,o,l){var h=e._gsap;h.scaleX=h.scaleY=s,h.renderTransform(l,h)},Bc=function(e,r,s,o,l){var h=e._gsap;h[r]=s,h.renderTransform(l,h)},at="transform",pe=at+"Origin",Da,Fr=function(e,r){var s=ae.createElementNS?ae.createElementNS((r||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ae.createElement(e);return s.style?s:ae.createElement(e)},Xt=function c(e,r,s){var o=getComputedStyle(e);return o[r]||o.getPropertyValue(r.replace(ka,"-$1").toLowerCase())||o.getPropertyValue(r)||!s&&c(e,li(r)||r,1)||""},wo="O,Moz,ms,Ms,Webkit".split(","),li=function(e,r,s){var o=r||Me,l=o.style,h=5;if(e in l&&!s)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);h--&&!(wo[h]+e in l););return h<0?null:(h===3?"ms":h>=0?wo[h]:"")+e},Ur=function(){kc()&&window.document&&(vo=window,ae=vo.document,ei=ae.documentElement,Me=Fr("div")||{style:{}},Fr("div"),at=li(at),pe=at+"Origin",Me.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Da=!!li("perspective"),is=1)},gr=function c(e){var r=Fr("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=this.parentNode,o=this.nextSibling,l=this.style.cssText,h;if(ei.appendChild(r),r.appendChild(this),this.style.display="block",e)try{h=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=c}catch{}else this._gsapBBox&&(h=this._gsapBBox());return s&&(o?s.insertBefore(this,o):s.appendChild(this)),ei.removeChild(r),this.style.cssText=l,h},xo=function(e,r){for(var s=r.length;s--;)if(e.hasAttribute(r[s]))return e.getAttribute(r[s])},Oa=function(e){var r;try{r=e.getBBox()}catch{r=gr.call(e,!0)}return r&&(r.width||r.height)||e.getBBox===gr||(r=gr.call(e,!0)),r&&!r.width&&!r.x&&!r.y?{x:+xo(e,["x","cx","x1"])||0,y:+xo(e,["y","cy","y1"])||0,width:0,height:0}:r},Va=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Oa(e))},Hi=function(e,r){if(r){var s=e.style;r in ce&&r!==pe&&(r=at),s.removeProperty?((r.substr(0,2)==="ms"||r.substr(0,6)==="webkit")&&(r="-"+r),s.removeProperty(r.replace(ka,"-$1").toLowerCase())):s.removeAttribute(r)}},he=function(e,r,s,o,l,h){var u=new wt(e._pt,r,s,0,1,h?Aa:Ma);return e._pt=u,u.b=o,u.e=l,e._props.push(s),u},yo={deg:1,rad:1,turn:1},fe=function c(e,r,s,o){var l=parseFloat(s)||0,h=(s+"").trim().substr((l+"").length)||"px",u=Me.style,p=Tc.test(r),f=e.tagName.toLowerCase()==="svg",m=(f?"client":"offset")+(p?"Width":"Height"),g=100,w=o==="px",v=o==="%",C,b,y,E;return o===h||!l||yo[o]||yo[h]?l:(h!=="px"&&!w&&(l=c(e,r,s,"px")),E=e.getCTM&&Va(e),(v||h==="%")&&(ce[r]||~r.indexOf("adius"))?(C=E?e.getBBox()[p?"width":"height"]:e[m],it(v?l/C*g:l/100*C)):(u[p?"width":"height"]=g+(w?h:o),b=~r.indexOf("adius")||o==="em"&&e.appendChild&&!f?e:e.parentNode,E&&(b=(e.ownerSVGElement||{}).parentNode),(!b||b===ae||!b.appendChild)&&(b=ae.body),y=b._gsap,y&&v&&y.width&&p&&y.time===Ct.time?it(l/y.width*g):((v||h==="%")&&(u.position=Xt(e,"position")),b===e&&(u.position="static"),b.appendChild(Me),C=Me[m],b.removeChild(Me),u.position="absolute",p&&v&&(y=Ae(b),y.time=Ct.time,y.width=b[m]),it(w?C*l/g:C&&l?g/C*l:0))))},ke=function(e,r,s,o){var l;return is||Ur(),r in le&&r!=="transform"&&(r=le[r],~r.indexOf(",")&&(r=r.split(",")[0])),ce[r]&&r!=="transform"?(l=qi(e,o),l=r!=="transformOrigin"?l[r]:l.svg?l.origin:Tn(Xt(e,pe))+" "+l.zOrigin+"px"):(l=e.style[r],(!l||l==="auto"||o||~(l+"").indexOf("calc("))&&(l=kn[r]&&kn[r](e,r,s)||Xt(e,r)||Qo(e,r)||(r==="opacity"?1:0))),s&&!~(l+"").trim().indexOf(" ")?fe(e,r,l,s)+s:l},Fc=function(e,r,s,o){if(!s||s==="none"){var l=li(r,e,1),h=l&&Xt(e,l,1);h&&h!==s?(r=l,s=h):r==="borderColor"&&(s=Xt(e,"borderTopColor"))}var u=new wt(this._pt,e.style,r,0,1,Ea),p=0,f=0,m,g,w,v,C,b,y,E,P,S,M,k;if(u.b=s,u.e=o,s+="",o+="",o==="auto"&&(e.style[r]=o,o=Xt(e,r)||o,e.style[r]=s),m=[s,o],ma(m),s=m[0],o=m[1],w=s.match(Ze)||[],k=o.match(Ze)||[],k.length){for(;g=Ze.exec(o);)y=g[0],P=o.substring(p,g.index),C?C=(C+1)%5:(P.substr(-5)==="rgba("||P.substr(-5)==="hsla(")&&(C=1),y!==(b=w[f++]||"")&&(v=parseFloat(b)||0,M=b.substr((v+"").length),y.charAt(1)==="="&&(y=ti(v,y)+M),E=parseFloat(y),S=y.substr((E+"").length),p=Ze.lastIndex-S.length,S||(S=S||Pt.units[r]||M,p===o.length&&(o+=S,u.e+=S)),M!==S&&(v=fe(e,r,b,S)||0),u._pt={_next:u._pt,p:P||f===1?P:",",s:v,c:E-v,m:C&&C<4||r==="zIndex"?Math.round:0});u.c=p<o.length?o.substring(p,o.length):""}else u.r=r==="display"&&o==="none"?Aa:Ma;return qo.test(o)&&(u.e=0),this._pt=u,u},Co={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Uc=function(e){var r=e.split(" "),s=r[0],o=r[1]||"50%";return(s==="top"||s==="bottom"||o==="left"||o==="right")&&(e=s,s=o,o=e),r[0]=Co[s]||s,r[1]=Co[o]||o,r.join(" ")},zc=function(e,r){if(r.tween&&r.tween._time===r.tween._dur){var s=r.t,o=s.style,l=r.u,h=s._gsap,u,p,f;if(l==="all"||l===!0)o.cssText="",p=1;else for(l=l.split(","),f=l.length;--f>-1;)u=l[f],ce[u]&&(p=1,u=u==="transformOrigin"?pe:at),Hi(s,u);p&&(Hi(s,at),h&&(h.svg&&s.removeAttribute("transform"),qi(s,1),h.uncache=1))}},kn={clearProps:function(e,r,s,o,l){if(l.data!=="isFromStart"){var h=e._pt=new wt(e._pt,r,s,0,0,zc);return h.u=o,h.pr=-10,h.tween=l,e._props.push(s),1}}},Yi=[1,0,0,1,0,0],La={},Ra=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Po=function(e){var r=Xt(e,at);return Ra(r)?Yi:r.substr(7).match(Yo).map(it)},ns=function(e,r){var s=e._gsap||Ae(e),o=e.style,l=Po(e),h,u,p,f;return s.svg&&e.getAttribute("transform")?(p=e.transform.baseVal.consolidate().matrix,l=[p.a,p.b,p.c,p.d,p.e,p.f],l.join(",")==="1,0,0,1,0,0"?Yi:l):(l===Yi&&!e.offsetParent&&e!==ei&&!s.svg&&(p=o.display,o.display="block",h=e.parentNode,(!h||!e.offsetParent)&&(f=1,u=e.nextSibling,ei.appendChild(e)),l=Po(e),p?o.display=p:Hi(e,"display"),f&&(u?h.insertBefore(e,u):h?h.appendChild(e):ei.removeChild(e))),r&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},zr=function(e,r,s,o,l,h){var u=e._gsap,p=l||ns(e,!0),f=u.xOrigin||0,m=u.yOrigin||0,g=u.xOffset||0,w=u.yOffset||0,v=p[0],C=p[1],b=p[2],y=p[3],E=p[4],P=p[5],S=r.split(" "),M=parseFloat(S[0])||0,k=parseFloat(S[1])||0,T,V,D,O;s?p!==Yi&&(V=v*y-C*b)&&(D=M*(y/V)+k*(-b/V)+(b*P-y*E)/V,O=M*(-C/V)+k*(v/V)-(v*P-C*E)/V,M=D,k=O):(T=Oa(e),M=T.x+(~S[0].indexOf("%")?M/100*T.width:M),k=T.y+(~(S[1]||S[0]).indexOf("%")?k/100*T.height:k)),o||o!==!1&&u.smooth?(E=M-f,P=k-m,u.xOffset=g+(E*v+P*b)-E,u.yOffset=w+(E*C+P*y)-P):u.xOffset=u.yOffset=0,u.xOrigin=M,u.yOrigin=k,u.smooth=!!o,u.origin=r,u.originIsAbsolute=!!s,e.style[pe]="0px 0px",h&&(he(h,u,"xOrigin",f,M),he(h,u,"yOrigin",m,k),he(h,u,"xOffset",g,u.xOffset),he(h,u,"yOffset",w,u.yOffset)),e.setAttribute("data-svg-origin",M+" "+k)},qi=function(e,r){var s=e._gsap||new ga(e);if("x"in s&&!r&&!s.uncache)return s;var o=e.style,l=s.scaleX<0,h="px",u="deg",p=Xt(e,pe)||"0",f,m,g,w,v,C,b,y,E,P,S,M,k,T,V,D,O,I,$,J,tt,X,F,L,lt,jt,Kt,ct,Nt,H,Y,Ht;return f=m=g=C=b=y=E=P=S=0,w=v=1,s.svg=!!(e.getCTM&&Va(e)),T=ns(e,s.svg),s.svg&&(L=(!s.uncache||p==="0px 0px")&&!r&&e.getAttribute("data-svg-origin"),zr(e,L||p,!!L||s.originIsAbsolute,s.smooth!==!1,T)),M=s.xOrigin||0,k=s.yOrigin||0,T!==Yi&&(I=T[0],$=T[1],J=T[2],tt=T[3],f=X=T[4],m=F=T[5],T.length===6?(w=Math.sqrt(I*I+$*$),v=Math.sqrt(tt*tt+J*J),C=I||$?qe($,I)*Se:0,E=J||tt?qe(J,tt)*Se+C:0,E&&(v*=Math.abs(Math.cos(E*ii))),s.svg&&(f-=M-(M*I+k*J),m-=k-(M*$+k*tt))):(Ht=T[6],H=T[7],Kt=T[8],ct=T[9],Nt=T[10],Y=T[11],f=T[12],m=T[13],g=T[14],V=qe(Ht,Nt),b=V*Se,V&&(D=Math.cos(-V),O=Math.sin(-V),L=X*D+Kt*O,lt=F*D+ct*O,jt=Ht*D+Nt*O,Kt=X*-O+Kt*D,ct=F*-O+ct*D,Nt=Ht*-O+Nt*D,Y=H*-O+Y*D,X=L,F=lt,Ht=jt),V=qe(-J,Nt),y=V*Se,V&&(D=Math.cos(-V),O=Math.sin(-V),L=I*D-Kt*O,lt=$*D-ct*O,jt=J*D-Nt*O,Y=tt*O+Y*D,I=L,$=lt,J=jt),V=qe($,I),C=V*Se,V&&(D=Math.cos(V),O=Math.sin(V),L=I*D+$*O,lt=X*D+F*O,$=$*D-I*O,F=F*D-X*O,I=L,X=lt),b&&Math.abs(b)+Math.abs(C)>359.9&&(b=C=0,y=180-y),w=it(Math.sqrt(I*I+$*$+J*J)),v=it(Math.sqrt(F*F+Ht*Ht)),V=qe(X,F),E=Math.abs(V)>2e-4?V*Se:0,S=Y?1/(Y<0?-Y:Y):0),s.svg&&(L=e.getAttribute("transform"),s.forceCSS=e.setAttribute("transform","")||!Ra(Xt(e,at)),L&&e.setAttribute("transform",L))),Math.abs(E)>90&&Math.abs(E)<270&&(l?(w*=-1,E+=C<=0?180:-180,C+=C<=0?180:-180):(v*=-1,E+=E<=0?180:-180)),r=r||s.uncache,s.x=f-((s.xPercent=f&&(!r&&s.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-f)?-50:0)))?e.offsetWidth*s.xPercent/100:0)+h,s.y=m-((s.yPercent=m&&(!r&&s.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-m)?-50:0)))?e.offsetHeight*s.yPercent/100:0)+h,s.z=g+h,s.scaleX=it(w),s.scaleY=it(v),s.rotation=it(C)+u,s.rotationX=it(b)+u,s.rotationY=it(y)+u,s.skewX=E+u,s.skewY=P+u,s.transformPerspective=S+h,(s.zOrigin=parseFloat(p.split(" ")[2])||0)&&(o[pe]=Tn(p)),s.xOffset=s.yOffset=0,s.force3D=Pt.force3D,s.renderTransform=s.svg?Kc:Da?Na:jc,s.uncache=0,s},Tn=function(e){return(e=e.split(" "))[0]+" "+e[1]},wr=function(e,r,s){var o=ut(r);return it(parseFloat(r)+parseFloat(fe(e,"x",s+"px",o)))+o},jc=function(e,r){r.z="0px",r.rotationY=r.rotationX="0deg",r.force3D=0,Na(e,r)},ye="0deg",Ai="0px",Ce=") ",Na=function(e,r){var s=r||this,o=s.xPercent,l=s.yPercent,h=s.x,u=s.y,p=s.z,f=s.rotation,m=s.rotationY,g=s.rotationX,w=s.skewX,v=s.skewY,C=s.scaleX,b=s.scaleY,y=s.transformPerspective,E=s.force3D,P=s.target,S=s.zOrigin,M="",k=E==="auto"&&e&&e!==1||E===!0;if(S&&(g!==ye||m!==ye)){var T=parseFloat(m)*ii,V=Math.sin(T),D=Math.cos(T),O;T=parseFloat(g)*ii,O=Math.cos(T),h=wr(P,h,V*O*-S),u=wr(P,u,-Math.sin(T)*-S),p=wr(P,p,D*O*-S+S)}y!==Ai&&(M+="perspective("+y+Ce),(o||l)&&(M+="translate("+o+"%, "+l+"%) "),(k||h!==Ai||u!==Ai||p!==Ai)&&(M+=p!==Ai||k?"translate3d("+h+", "+u+", "+p+") ":"translate("+h+", "+u+Ce),f!==ye&&(M+="rotate("+f+Ce),m!==ye&&(M+="rotateY("+m+Ce),g!==ye&&(M+="rotateX("+g+Ce),(w!==ye||v!==ye)&&(M+="skew("+w+", "+v+Ce),(C!==1||b!==1)&&(M+="scale("+C+", "+b+Ce),P.style[at]=M||"translate(0, 0)"},Kc=function(e,r){var s=r||this,o=s.xPercent,l=s.yPercent,h=s.x,u=s.y,p=s.rotation,f=s.skewX,m=s.skewY,g=s.scaleX,w=s.scaleY,v=s.target,C=s.xOrigin,b=s.yOrigin,y=s.xOffset,E=s.yOffset,P=s.forceCSS,S=parseFloat(h),M=parseFloat(u),k,T,V,D,O;p=parseFloat(p),f=parseFloat(f),m=parseFloat(m),m&&(m=parseFloat(m),f+=m,p+=m),p||f?(p*=ii,f*=ii,k=Math.cos(p)*g,T=Math.sin(p)*g,V=Math.sin(p-f)*-w,D=Math.cos(p-f)*w,f&&(m*=ii,O=Math.tan(f-m),O=Math.sqrt(1+O*O),V*=O,D*=O,m&&(O=Math.tan(m),O=Math.sqrt(1+O*O),k*=O,T*=O)),k=it(k),T=it(T),V=it(V),D=it(D)):(k=g,D=w,T=V=0),(S&&!~(h+"").indexOf("px")||M&&!~(u+"").indexOf("px"))&&(S=fe(v,"x",h,"px"),M=fe(v,"y",u,"px")),(C||b||y||E)&&(S=it(S+C-(C*k+b*V)+y),M=it(M+b-(C*T+b*D)+E)),(o||l)&&(O=v.getBBox(),S=it(S+o/100*O.width),M=it(M+l/100*O.height)),O="matrix("+k+","+T+","+V+","+D+","+S+","+M+")",v.setAttribute("transform",O),P&&(v.style[at]=O)},Hc=function(e,r,s,o,l){var h=360,u=ot(l),p=parseFloat(l)*(u&&~l.indexOf("rad")?Se:1),f=p-o,m=o+f+"deg",g,w;return u&&(g=l.split("_")[1],g==="short"&&(f%=h,f!==f%(h/2)&&(f+=f<0?h:-h)),g==="cw"&&f<0?f=(f+h*go)%h-~~(f/h)*h:g==="ccw"&&f>0&&(f=(f-h*go)%h-~~(f/h)*h)),e._pt=w=new wt(e._pt,r,s,o,f,Ac),w.e=m,w.u="deg",e._props.push(s),w},Eo=function(e,r){for(var s in r)e[s]=r[s];return e},Yc=function(e,r,s){var o=Eo({},s._gsap),l="perspective,force3D,transformOrigin,svgOrigin",h=s.style,u,p,f,m,g,w,v,C;o.svg?(f=s.getAttribute("transform"),s.setAttribute("transform",""),h[at]=r,u=qi(s,1),Hi(s,at),s.setAttribute("transform",f)):(f=getComputedStyle(s)[at],h[at]=r,u=qi(s,1),h[at]=f);for(p in ce)f=o[p],m=u[p],f!==m&&l.indexOf(p)<0&&(v=ut(f),C=ut(m),g=v!==C?fe(s,p,f,C):parseFloat(f),w=parseFloat(m),e._pt=new wt(e._pt,u,p,g,w-g,Ta),e._pt.u=C||0,e._props.push(p));Eo(u,o)};gt("padding,margin,Width,Radius",function(c,e){var r="Top",s="Right",o="Bottom",l="Left",h=(e<3?[r,s,o,l]:[r+l,r+s,o+s,o+l]).map(function(u){return e<2?c+u:"border"+u+c});kn[e>1?"border"+c:c]=function(u,p,f,m,g){var w,v;if(arguments.length<4)return w=h.map(function(C){return ke(u,C,f)}),v=w.join(" "),v.split(w[0]).length===5?w[0]:v;w=(m+"").split(" "),v={},h.forEach(function(C,b){return v[C]=w[b]=w[b]||w[(b-1)/2|0]}),u.init(p,v,g)}});var Ia={name:"css",register:Ur,targetTest:function(e){return e.style&&e.nodeType},init:function(e,r,s,o,l){var h=this._props,u=e.style,p=s.vars.startAt,f,m,g,w,v,C,b,y,E,P,S,M,k,T,V;is||Ur();for(b in r)if(b!=="autoRound"&&(m=r[b],!(yt[b]&&wa(b,r,s,o,e,l)))){if(v=typeof m,C=kn[b],v==="function"&&(m=m.call(s,o,e,l),v=typeof m),v==="string"&&~m.indexOf("random(")&&(m=zi(m)),C)C(this,e,b,m,s)&&(V=1);else if(b.substr(0,2)==="--")f=(getComputedStyle(e).getPropertyValue(b)+"").trim(),m+="",de.lastIndex=0,de.test(f)||(y=ut(f),E=ut(m)),E?y!==E&&(f=fe(e,b,f,E)+E):y&&(m+=y),this.add(u,"setProperty",f,m,o,l,0,0,b),h.push(b);else if(v!=="undefined"){if(p&&b in p?(f=typeof p[b]=="function"?p[b].call(s,o,e,l):p[b],ot(f)&&~f.indexOf("random(")&&(f=zi(f)),ut(f+"")||(f+=Pt.units[b]||ut(ke(e,b))||""),(f+"").charAt(1)==="="&&(f=ke(e,b))):f=ke(e,b),w=parseFloat(f),P=v==="string"&&m.charAt(1)==="="&&m.substr(0,2),P&&(m=m.substr(2)),g=parseFloat(m),b in le&&(b==="autoAlpha"&&(w===1&&ke(e,"visibility")==="hidden"&&g&&(w=0),he(this,u,"visibility",w?"inherit":"hidden",g?"inherit":"hidden",!g)),b!=="scale"&&b!=="transform"&&(b=le[b],~b.indexOf(",")&&(b=b.split(",")[0]))),S=b in ce,S){if(M||(k=e._gsap,k.renderTransform&&!r.parseTransform||qi(e,r.parseTransform),T=r.smoothOrigin!==!1&&k.smooth,M=this._pt=new wt(this._pt,u,at,0,1,k.renderTransform,k,0,-1),M.dep=1),b==="scale")this._pt=new wt(this._pt,k,"scaleY",k.scaleY,(P?ti(k.scaleY,P+g):g)-k.scaleY||0),h.push("scaleY",b),b+="X";else if(b==="transformOrigin"){m=Uc(m),k.svg?zr(e,m,0,T,0,this):(E=parseFloat(m.split(" ")[2])||0,E!==k.zOrigin&&he(this,k,"zOrigin",k.zOrigin,E),he(this,u,b,Tn(f),Tn(m)));continue}else if(b==="svgOrigin"){zr(e,m,1,T,0,this);continue}else if(b in La){Hc(this,k,b,w,P?ti(w,P+m):m);continue}else if(b==="smoothOrigin"){he(this,k,"smooth",k.smooth,m);continue}else if(b==="force3D"){k[b]=m;continue}else if(b==="transform"){Yc(this,m,e);continue}}else b in u||(b=li(b)||b);if(S||(g||g===0)&&(w||w===0)&&!Mc.test(m)&&b in u)y=(f+"").substr((w+"").length),g||(g=0),E=ut(m)||(b in Pt.units?Pt.units[b]:y),y!==E&&(w=fe(e,b,f,E)),this._pt=new wt(this._pt,S?k:u,b,w,(P?ti(w,P+g):g)-w,!S&&(E==="px"||b==="zIndex")&&r.autoRound!==!1?Oc:Ta),this._pt.u=E||0,y!==E&&E!=="%"&&(this._pt.b=f,this._pt.r=Dc);else if(b in u)Fc.call(this,e,b,f,P?P+m:m);else if(b in e)this.add(e,b,f||e[b],P?P+m:m,o,l);else{qr(b,m);continue}h.push(b)}}V&&Sa(this)},get:ke,aliases:le,getSetter:function(e,r,s){var o=le[r];return o&&o.indexOf(",")<0&&(r=o),r in ce&&r!==pe&&(e._gsap.x||ke(e,"x"))?s&&bo===s?r==="scale"?Nc:Rc:(bo=s||{})&&(r==="scale"?Ic:Bc):e.style&&!Hr(e.style[r])?Vc:~r.indexOf("-")?Lc:ts(e,r)},core:{_removeProperty:Hi,_getMatrix:ns}};Rt.utils.checkPrefix=li;(function(c,e,r,s){var o=gt(c+","+e+","+r,function(l){ce[l]=1});gt(e,function(l){Pt.units[l]="deg",La[l]=1}),le[o[13]]=c+","+e,gt(s,function(l){var h=l.split(":");le[h[1]]=o[h[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");gt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(c){Pt.units[c]="px"});Rt.registerPlugin(Ia);var jr=Rt.registerPlugin(Ia)||Rt;jr.core.Tween;var gn={exports:{}},qc=gn.exports,So;function Gc(){return So||(So=1,(function(c,e){(function(r,s){c.exports=s()})(qc,function(){var r=function(){function s(v){return h.appendChild(v.dom),v}function o(v){for(var C=0;C<h.children.length;C++)h.children[C].style.display=C===v?"block":"none";l=v}var l=0,h=document.createElement("div");h.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",h.addEventListener("click",function(v){v.preventDefault(),o(++l%h.children.length)},!1);var u=(performance||Date).now(),p=u,f=0,m=s(new r.Panel("FPS","#0ff","#002")),g=s(new r.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var w=s(new r.Panel("MB","#f08","#201"));return o(0),{REVISION:16,dom:h,addPanel:s,showPanel:o,begin:function(){u=(performance||Date).now()},end:function(){f++;var v=(performance||Date).now();if(g.update(v-u,200),v>p+1e3&&(m.update(1e3*f/(v-p),100),p=v,f=0,w)){var C=performance.memory;w.update(C.usedJSHeapSize/1048576,C.jsHeapSizeLimit/1048576)}return v},update:function(){u=this.end()},domElement:h,setMode:o}};return r.Panel=function(s,o,l){var h=1/0,u=0,p=Math.round,f=p(window.devicePixelRatio||1),m=80*f,g=48*f,w=3*f,v=2*f,C=3*f,b=15*f,y=74*f,E=30*f,P=document.createElement("canvas");P.width=m,P.height=g,P.style.cssText="width:80px;height:48px";var S=P.getContext("2d");return S.font="bold "+9*f+"px Helvetica,Arial,sans-serif",S.textBaseline="top",S.fillStyle=l,S.fillRect(0,0,m,g),S.fillStyle=o,S.fillText(s,w,v),S.fillRect(C,b,y,E),S.fillStyle=l,S.globalAlpha=.9,S.fillRect(C,b,y,E),{dom:P,update:function(M,k){h=Math.min(h,M),u=Math.max(u,M),S.fillStyle=l,S.globalAlpha=1,S.fillRect(0,0,m,b),S.fillStyle=o,S.fillText(p(M)+" "+s+" ("+p(h)+"-"+p(u)+")",w,v),S.drawImage(P,C+f,b,y-f,E,C,b,y-f,E),S.fillRect(C+y-f,b,f,E),S.fillStyle=l,S.globalAlpha=.9,S.fillRect(C+y-f,b,f,p((1-M/k)*E))}}},r})})(gn)),gn.exports}var $c=Gc();const Xc=Bo($c);var Li={exports:{}};var Wc=Li.exports,ko;function Zc(){return ko||(ko=1,(function(c,e){(function(r,s){s(e)})(Wc,(function(r){class s{constructor(t){const[i,a]=t.split("-"),d=i.split(".");this.major=parseInt(d[0],10),this.minor=parseInt(d[1],10),this.patch=parseInt(d[2],10),this.prerelease=a??null}toString(){const t=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[t,this.prerelease].join("-"):t}}class o{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class l{constructor(t){this.target=t}}class h extends l{constructor(t,i,a,d){super(t),this.value=i,this.presetKey=a,this.last=d??!0}}class u extends l{constructor(t,i,a){super(t),this.value=i,this.presetKey=a}}class p extends l{constructor(t,i){super(t),this.expanded=i}}function f(n){return n}function m(n){return n==null}function g(n,t){if(n.length!==t.length)return!1;for(let i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return!0}const w={alreadydisposed:()=>"View has been already disposed",invalidparams:n=>`Invalid parameters for '${n.name}'`,nomatchingcontroller:n=>`No matching controller for '${n.key}'`,nomatchingview:n=>`No matching view for '${JSON.stringify(n.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:n=>`Property '${n.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class v{constructor(t){var i;this.message=(i=w[t.type](t.context))!==null&&i!==void 0?i:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}static alreadyDisposed(){return new v({type:"alreadydisposed"})}static notBindable(){return new v({type:"notbindable"})}static propertyNotFound(t){return new v({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new v({type:"shouldneverhappen"})}}class C{constructor(t,i,a){this.obj_=t,this.key_=i,this.presetKey_=a??i}static isBindable(t){return!(t===null||typeof t!="object")}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(t){this.obj_[this.key_]=t}writeProperty(t,i){const a=this.read();if(!C.isBindable(a))throw v.notBindable();if(!(t in a))throw v.propertyNotFound(t);a[t]=i}}class b extends o{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get title(){var t;return(t=this.controller_.valueController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller_.valueController.props.set("title",t)}on(t,i){const a=i.bind(this);return this.controller_.valueController.emitter.on(t,()=>{a(new l(this))}),this}}class y{constructor(){this.observers_={}}on(t,i){let a=this.observers_[t];return a||(a=this.observers_[t]=[]),a.push({handler:i}),this}off(t,i){const a=this.observers_[t];return a&&(this.observers_[t]=a.filter(d=>d.handler!==i)),this}emit(t,i){const a=this.observers_[t];a&&a.forEach(d=>{d.handler(i)})}}const E="tp";function P(n){return(i,a)=>[E,"-",n,"v",i?`_${i}`:"",a?`-${a}`:""].join("")}function S(n,t){return i=>t(n(i))}function M(n){return n.rawValue}function k(n,t){n.emitter.on("change",S(M,t)),t(n.rawValue)}function T(n,t,i){k(n.value(t),i)}function V(n,t,i){i?n.classList.add(t):n.classList.remove(t)}function D(n,t){return i=>{V(n,t,i)}}function O(n,t){k(n,i=>{t.textContent=i??""})}const I=P("btn");class ${constructor(t,i){this.element=t.createElement("div"),this.element.classList.add(I()),i.viewProps.bindClassModifiers(this.element);const a=t.createElement("button");a.classList.add(I("b")),i.viewProps.bindDisabled(a),this.element.appendChild(a),this.buttonElement=a;const d=t.createElement("div");d.classList.add(I("t")),O(i.props.value("title"),d),this.buttonElement.appendChild(d)}}class J{constructor(t,i){this.emitter=new y,this.onClick_=this.onClick_.bind(this),this.props=i.props,this.viewProps=i.viewProps,this.view=new $(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class tt{constructor(t,i){var a;this.constraint_=i?.constraint,this.equals_=(a=i?.equals)!==null&&a!==void 0?a:((d,_)=>d===_),this.emitter=new y,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,i){const a=i??{forceEmit:!1,last:!0},d=this.constraint_?this.constraint_.constrain(t):t;this.equals_(this.rawValue_,d)&&!a.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=d,this.emitter.emit("change",{options:a,rawValue:d,sender:this}))}}class X{constructor(t){this.emitter=new y,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,i){const a=i??{forceEmit:!1,last:!0};this.value_===t&&!a.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:a,rawValue:this.value_,sender:this}))}}function F(n,t){const i=t?.constraint,a=t?.equals;return!i&&!a?new X(n):new tt(n,t)}class L{constructor(t){this.emitter=new y,this.valMap_=t;for(const i in this.valMap_)this.valMap_[i].emitter.on("change",()=>{this.emitter.emit("change",{key:i,sender:this})})}static createCore(t){return Object.keys(t).reduce((a,d)=>Object.assign(a,{[d]:F(t[d])}),{})}static fromObject(t){const i=this.createCore(t);return new L(i)}get(t){return this.valMap_[t].rawValue}set(t,i){this.valMap_[t].rawValue=i}value(t){return this.valMap_[t]}}function lt(n,t){const a=Object.keys(t).reduce((d,_)=>{if(d===void 0)return;const x=t[_],A=x(n[_]);return A.succeeded?Object.assign(Object.assign({},d),{[_]:A.value}):void 0},{});return a}function jt(n,t){return n.reduce((i,a)=>{if(i===void 0)return;const d=t(a);if(!(!d.succeeded||d.value===void 0))return[...i,d.value]},[])}function Kt(n){return n===null?!1:typeof n=="object"}function ct(n){return t=>i=>{if(!t&&i===void 0)return{succeeded:!1,value:void 0};if(t&&i===void 0)return{succeeded:!0,value:void 0};const a=n(i);return a!==void 0?{succeeded:!0,value:a}:{succeeded:!1,value:void 0}}}function Nt(n){return{custom:t=>ct(t)(n),boolean:ct(t=>typeof t=="boolean"?t:void 0)(n),number:ct(t=>typeof t=="number"?t:void 0)(n),string:ct(t=>typeof t=="string"?t:void 0)(n),function:ct(t=>typeof t=="function"?t:void 0)(n),constant:t=>ct(i=>i===t?t:void 0)(n),raw:ct(t=>t)(n),object:t=>ct(i=>{if(Kt(i))return lt(i,t)})(n),array:t=>ct(i=>{if(Array.isArray(i))return jt(i,t)})(n)}}const H={optional:Nt(!0),required:Nt(!1)};function Y(n,t){const i=H.required.object(t)(n);return i.succeeded?i.value:void 0}function Ht(n){return n&&n.parentElement&&n.parentElement.removeChild(n),null}function za(){return["veryfirst","first","last","verylast"]}const ss=P(""),os={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class di{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const i=this.view.element;this.blade.value("positions").emitter.on("change",()=>{za().forEach(a=>{i.classList.remove(ss(void 0,os[a]))}),this.blade.get("positions").forEach(a=>{i.classList.add(ss(void 0,os[a]))})}),this.viewProps.handleDispose(()=>{Ht(i)})}get parent(){return this.parent_}}const It="http://www.w3.org/2000/svg";function Xi(n){n.offsetHeight}function ja(n,t){const i=n.style.transition;n.style.transition="none",t(),n.style.transition=i}function Dn(n){return n.ontouchstart!==void 0}function Ka(){return new Function("return this")()}function Ha(){return Ka().document}function Ya(n){const t=n.ownerDocument.defaultView;return t&&"document"in t?n.getContext("2d"):null}const qa={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Wi(n,t){const i=n.createElementNS(It,"svg");return i.innerHTML=qa[t],i}function as(n,t,i){n.insertBefore(t,n.children[i])}function ls(n){n.parentElement&&n.parentElement.removeChild(n)}function hs(n){for(;n.children.length>0;)n.removeChild(n.children[0])}function Ga(n){for(;n.childNodes.length>0;)n.removeChild(n.childNodes[0])}function us(n){return n.relatedTarget?n.relatedTarget:"explicitOriginalTarget"in n?n.explicitOriginalTarget:null}const ci=P("lbl");function $a(n,t){const i=n.createDocumentFragment();return t.split(`
`).map(d=>n.createTextNode(d)).forEach((d,_)=>{_>0&&i.appendChild(n.createElement("br")),i.appendChild(d)}),i}class ds{constructor(t,i){this.element=t.createElement("div"),this.element.classList.add(ci()),i.viewProps.bindClassModifiers(this.element);const a=t.createElement("div");a.classList.add(ci("l")),T(i.props,"label",_=>{m(_)?this.element.classList.add(ci(void 0,"nol")):(this.element.classList.remove(ci(void 0,"nol")),Ga(a),a.appendChild($a(t,_)))}),this.element.appendChild(a),this.labelElement=a;const d=t.createElement("div");d.classList.add(ci("v")),this.element.appendChild(d),this.valueElement=d}}class Zi extends di{constructor(t,i){const a=i.valueController.viewProps;super(Object.assign(Object.assign({},i),{view:new ds(t,{props:i.props,viewProps:a}),viewProps:a})),this.props=i.props,this.valueController=i.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const Xa={id:"button",type:"blade",accept(n){const t=H,i=Y(n,{title:t.required.string,view:t.required.constant("button"),label:t.optional.string});return i?{params:i}:null},controller(n){return new Zi(n.document,{blade:n.blade,props:L.fromObject({label:n.params.label}),valueController:new J(n.document,{props:L.fromObject({title:n.params.title}),viewProps:n.viewProps})})},api(n){return!(n.controller instanceof Zi)||!(n.controller.valueController instanceof J)?null:new b(n.controller)}};class Ne extends di{constructor(t){super(t),this.value=t.value}}function pi(){return new L({positions:F([],{equals:g})})}class fi extends L{constructor(t){super(t)}static create(t){const i={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},a=L.createCore(i);return new fi(a)}get styleExpanded(){var t;return(t=this.get("temporaryExpanded"))!==null&&t!==void 0?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!m(t)?`${t}px`:"auto"}bindExpandedClass(t,i){const a=()=>{this.styleExpanded?t.classList.add(i):t.classList.remove(i)};T(this,"expanded",a),T(this,"temporaryExpanded",a)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Wa(n,t){let i=0;return ja(t,()=>{n.set("expandedHeight",null),n.set("temporaryExpanded",!0),Xi(t),i=t.clientHeight,n.set("temporaryExpanded",null),Xi(t)}),i}function cs(n,t){t.style.height=n.styleHeight}function On(n,t){n.value("expanded").emitter.on("beforechange",()=>{n.set("completed",!1),m(n.get("expandedHeight"))&&n.set("expandedHeight",Wa(n,t)),n.set("shouldFixHeight",!0),Xi(t)}),n.emitter.on("change",()=>{cs(n,t)}),cs(n,t),t.addEventListener("transitionend",i=>{i.propertyName==="height"&&n.cleanUpTransition()})}class Vn extends o{constructor(t,i){super(t),this.rackApi_=i}}function Za(n,t){return n.addBlade(Object.assign(Object.assign({},t),{view:"button"}))}function Qa(n,t){return n.addBlade(Object.assign(Object.assign({},t),{view:"folder"}))}function Ja(n,t){const i=t||{};return n.addBlade(Object.assign(Object.assign({},i),{view:"separator"}))}function tl(n,t){return n.addBlade(Object.assign(Object.assign({},t),{view:"tab"}))}class Ln{constructor(t){this.emitter=new y,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const i of this.allItems())if(t(i))return i;return null}includes(t){return this.cache_.has(t)}add(t,i){if(this.includes(t))throw v.shouldNeverHappen();const a=i!==void 0?i:this.items_.length;this.items_.splice(a,0,t),this.cache_.add(t);const d=this.extract_(t);d&&(d.emitter.on("add",this.onSubListAdd_),d.emitter.on("remove",this.onSubListRemove_),d.allItems().forEach(_=>{this.cache_.add(_)})),this.emitter.emit("add",{index:a,item:t,root:this,target:this})}remove(t){const i=this.items_.indexOf(t);if(i<0)return;this.items_.splice(i,1),this.cache_.delete(t);const a=this.extract_(t);a&&(a.emitter.off("add",this.onSubListAdd_),a.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:i,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}class Rn extends o{constructor(t){super(t),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new y,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,i){const a=i.bind(this);return this.emitter_.on(t,d=>{a(d.event)}),this}refresh(){this.controller_.binding.read()}onBindingChange_(t){const i=t.sender.target.read();this.emitter_.emit("change",{event:new h(this,i,this.controller_.binding.target.presetKey,t.options.last)})}}class Bt extends Zi{constructor(t,i){super(t,i),this.binding=i.binding}}class Nn extends o{constructor(t){super(t),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new y,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,i){const a=i.bind(this);return this.emitter_.on(t,d=>{a(d.event)}),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(t){const i=t.sender.target.read();this.emitter_.emit("update",{event:new u(this,i,this.controller_.binding.target.presetKey)})}}class Qt extends Zi{constructor(t,i){super(t,i),this.binding=i.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose(()=>{this.binding.dispose()})}}function el(n){return n instanceof Qi?n.apiSet_:n instanceof Vn?n.rackApi_.apiSet_:null}function mi(n,t){const i=n.find(a=>a.controller_===t);if(!i)throw v.shouldNeverHappen();return i}function ps(n,t,i){if(!C.isBindable(n))throw v.notBindable();return new C(n,t,i)}class Qi extends o{constructor(t,i){super(t),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new y,this.apiSet_=new Ln(el),this.pool_=i;const a=this.controller_.rack;a.emitter.on("add",this.onRackAdd_),a.emitter.on("remove",this.onRackRemove_),a.emitter.on("inputchange",this.onRackInputChange_),a.emitter.on("monitorupdate",this.onRackMonitorUpdate_),a.children.forEach(d=>{this.setUpApi_(d)})}get children(){return this.controller_.rack.children.map(t=>mi(this.apiSet_,t))}addInput(t,i,a){const d=a||{},_=this.controller_.view.element.ownerDocument,x=this.pool_.createInput(_,ps(t,i,d.presetKey),d),A=new Rn(x);return this.add(A,d.index)}addMonitor(t,i,a){const d=a||{},_=this.controller_.view.element.ownerDocument,x=this.pool_.createMonitor(_,ps(t,i),d),A=new Nn(x);return this.add(A,d.index)}addFolder(t){return Qa(this,t)}addButton(t){return Za(this,t)}addSeparator(t){return Ja(this,t)}addTab(t){return tl(this,t)}add(t,i){this.controller_.rack.add(t.controller_,i);const a=this.apiSet_.find(d=>d.controller_===t.controller_);return a&&this.apiSet_.remove(a),this.apiSet_.add(t),t}remove(t){this.controller_.rack.remove(t.controller_)}addBlade(t){const i=this.controller_.view.element.ownerDocument,a=this.pool_.createBlade(i,t),d=this.pool_.createBladeApi(a);return this.add(d,t.index)}on(t,i){const a=i.bind(this);return this.emitter_.on(t,d=>{a(d.event)}),this}setUpApi_(t){this.apiSet_.find(a=>a.controller_===t)||this.apiSet_.add(this.pool_.createBladeApi(t))}onRackAdd_(t){this.setUpApi_(t.bladeController)}onRackRemove_(t){if(t.isRoot){const i=mi(this.apiSet_,t.bladeController);this.apiSet_.remove(i)}}onRackInputChange_(t){const i=t.bladeController;if(i instanceof Bt){const a=mi(this.apiSet_,i),d=i.binding;this.emitter_.emit("change",{event:new h(a,d.target.read(),d.target.presetKey,t.options.last)})}else if(i instanceof Ne){const a=mi(this.apiSet_,i);this.emitter_.emit("change",{event:new h(a,i.value.rawValue,void 0,t.options.last)})}}onRackMonitorUpdate_(t){if(!(t.bladeController instanceof Qt))throw v.shouldNeverHappen();const i=mi(this.apiSet_,t.bladeController),a=t.bladeController.binding;this.emitter_.emit("update",{event:new u(i,a.target.read(),a.target.presetKey)})}}class In extends Vn{constructor(t,i){super(t,new Qi(t.rackController,i)),this.emitter_=new y,this.controller_.foldable.value("expanded").emitter.on("change",a=>{this.emitter_.emit("fold",{event:new p(this,a.sender.rawValue)})}),this.rackApi_.on("change",a=>{this.emitter_.emit("change",{event:a})}),this.rackApi_.on("update",a=>{this.emitter_.emit("update",{event:a})})}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(t){this.controller_.foldable.set("expanded",t)}get title(){return this.controller_.props.get("title")}set title(t){this.controller_.props.set("title",t)}get children(){return this.rackApi_.children}addInput(t,i,a){return this.rackApi_.addInput(t,i,a)}addMonitor(t,i,a){return this.rackApi_.addMonitor(t,i,a)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,i){return this.rackApi_.add(t,i)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,i){const a=i.bind(this);return this.emitter_.on(t,d=>{a(d.event)}),this}}class Bn extends di{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}}class il{constructor(t,i){const a=P(i.viewName);this.element=t.createElement("div"),this.element.classList.add(a()),i.viewProps.bindClassModifiers(this.element)}}function nl(n,t){for(let i=0;i<n.length;i++){const a=n[i];if(a instanceof Bt&&a.binding===t)return a}return null}function rl(n,t){for(let i=0;i<n.length;i++){const a=n[i];if(a instanceof Qt&&a.binding===t)return a}return null}function sl(n,t){for(let i=0;i<n.length;i++){const a=n[i];if(a instanceof Ne&&a.value===t)return a}return null}function Fn(n){return n instanceof _i?n.rack:n instanceof Bn?n.rackController.rack:null}function ol(n){const t=Fn(n);return t?t.bcSet_:null}class al{constructor(t){var i;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new y,this.blade_=t??null,(i=this.blade_)===null||i===void 0||i.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new Ln(ol),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,i){t.parent&&t.parent.remove(t),t.parent_=this,this.bcSet_.add(t,i)}remove(t){t.parent_=null,this.bcSet_.remove(t)}find(t){return this.bcSet_.allItems().filter(i=>i instanceof t)}onSetAdd_(t){this.updatePositions_();const i=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,isRoot:i,sender:this}),!i)return;const a=t.item;if(a.viewProps.emitter.on("change",this.onChildViewPropsChange_),a.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),a.viewProps.handleDispose(this.onChildDispose_),a instanceof Bt)a.binding.emitter.on("change",this.onChildInputChange_);else if(a instanceof Qt)a.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(a instanceof Ne)a.value.emitter.on("change",this.onChildValueChange_);else{const d=Fn(a);if(d){const _=d.emitter;_.on("layout",this.onDescendantLayout_),_.on("inputchange",this.onDescendantInputChange_),_.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(t){this.updatePositions_();const i=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,isRoot:i,sender:this}),!i)return;const a=t.item;if(a instanceof Bt)a.binding.emitter.off("change",this.onChildInputChange_);else if(a instanceof Qt)a.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(a instanceof Ne)a.value.emitter.off("change",this.onChildValueChange_);else{const d=Fn(a);if(d){const _=d.emitter;_.off("layout",this.onDescendantLayout_),_.off("inputchange",this.onDescendantInputChange_),_.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const t=this.bcSet_.items.filter(d=>!d.viewProps.get("hidden")),i=t[0],a=t[t.length-1];this.bcSet_.items.forEach(d=>{const _=[];d===i&&(_.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&_.push("veryfirst")),d===a&&(_.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&_.push("verylast")),d.blade.set("positions",_)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(i=>i.viewProps.get("disposed")).forEach(i=>{this.bcSet_.remove(i)})}onChildInputChange_(t){const i=nl(this.find(Bt),t.sender);if(!i)throw v.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:i,options:t.options,sender:this})}onChildMonitorUpdate_(t){const i=rl(this.find(Qt),t.sender);if(!i)throw v.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:i,sender:this})}onChildValueChange_(t){const i=sl(this.find(Ne),t.sender);if(!i)throw v.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:i,options:t.options,sender:this})}onDescendantLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(t){this.emitter.emit("inputchange",{bladeController:t.bladeController,options:t.options,sender:this})}onDescendantMonitorUpdate_(t){this.emitter.emit("monitorupdate",{bladeController:t.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class _i extends di{constructor(t,i){super(Object.assign(Object.assign({},i),{view:new il(t,{viewName:"brk",viewProps:i.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const a=new al(i.root?void 0:i.blade);a.emitter.on("add",this.onRackAdd_),a.emitter.on("remove",this.onRackRemove_),this.rack=a,this.viewProps.handleDispose(()=>{for(let d=this.rack.children.length-1;d>=0;d--)this.rack.children[d].viewProps.set("disposed",!0)})}onRackAdd_(t){t.isRoot&&as(this.view.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.isRoot&&ls(t.bladeController.view.element)}}const fs=P("cnt");class ll{constructor(t,i){this.className_=P(i.viewName||"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),fs()),i.viewProps.bindClassModifiers(this.element),this.foldable_=i.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),T(this.foldable_,"completed",D(this.element,this.className_(void 0,"cpl")));const a=t.createElement("button");a.classList.add(this.className_("b")),T(i.props,"title",A=>{m(A)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),i.viewProps.bindDisabled(a),this.element.appendChild(a),this.buttonElement=a;const d=t.createElement("div");d.classList.add(this.className_("t")),O(i.props.value("title"),d),this.buttonElement.appendChild(d),this.titleElement=d;const _=t.createElement("div");_.classList.add(this.className_("m")),this.buttonElement.appendChild(_);const x=i.containerElement;x.classList.add(this.className_("c")),this.element.appendChild(x),this.containerElement=x}}class Un extends Bn{constructor(t,i){var a;const d=fi.create((a=i.expanded)!==null&&a!==void 0?a:!0),_=new _i(t,{blade:i.blade,root:i.root,viewProps:i.viewProps});super(Object.assign(Object.assign({},i),{rackController:_,view:new ll(t,{containerElement:_.view.element,foldable:d,props:i.props,viewName:i.root?"rot":void 0,viewProps:i.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=i.props,this.foldable=d,On(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const hl={id:"folder",type:"blade",accept(n){const t=H,i=Y(n,{title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean});return i?{params:i}:null},controller(n){return new Un(n.document,{blade:n.blade,expanded:n.params.expanded,props:L.fromObject({title:n.params.title}),viewProps:n.viewProps})},api(n){return n.controller instanceof Un?new In(n.controller,n.pool):null}};class Ie extends Ne{constructor(t,i){const a=i.valueController.viewProps;super(Object.assign(Object.assign({},i),{value:i.valueController.value,view:new ds(t,{props:i.props,viewProps:a}),viewProps:a})),this.props=i.props,this.valueController=i.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class ms extends o{}const _s=P("spr");class ul{constructor(t,i){this.element=t.createElement("div"),this.element.classList.add(_s()),i.viewProps.bindClassModifiers(this.element);const a=t.createElement("hr");a.classList.add(_s("r")),this.element.appendChild(a)}}class vs extends di{constructor(t,i){super(Object.assign(Object.assign({},i),{view:new ul(t,{viewProps:i.viewProps})}))}}const dl={id:"separator",type:"blade",accept(n){const i=Y(n,{view:H.required.constant("separator")});return i?{params:i}:null},controller(n){return new vs(n.document,{blade:n.blade,viewProps:n.viewProps})},api(n){return n.controller instanceof vs?new ms(n.controller):null}},cl=P("");function bs(n,t){return D(n,cl(void 0,t))}class Jt extends L{constructor(t){super(t)}static create(t){var i,a;const d=t??{},_={disabled:(i=d.disabled)!==null&&i!==void 0?i:!1,disposed:!1,hidden:(a=d.hidden)!==null&&a!==void 0?a:!1},x=L.createCore(_);return new Jt(x)}bindClassModifiers(t){T(this,"disabled",bs(t,"disabled")),T(this,"hidden",bs(t,"hidden"))}bindDisabled(t){T(this,"disabled",i=>{t.disabled=i})}bindTabIndex(t){T(this,"disabled",i=>{t.tabIndex=i?-1:0})}handleDispose(t){this.value("disposed").emitter.on("change",i=>{i&&t()})}}const vi=P("tbi");class pl{constructor(t,i){this.element=t.createElement("div"),this.element.classList.add(vi()),i.viewProps.bindClassModifiers(this.element),T(i.props,"selected",_=>{_?this.element.classList.add(vi(void 0,"sel")):this.element.classList.remove(vi(void 0,"sel"))});const a=t.createElement("button");a.classList.add(vi("b")),i.viewProps.bindDisabled(a),this.element.appendChild(a),this.buttonElement=a;const d=t.createElement("div");d.classList.add(vi("t")),O(i.props.value("title"),d),this.buttonElement.appendChild(d),this.titleElement=d}}class fl{constructor(t,i){this.emitter=new y,this.onClick_=this.onClick_.bind(this),this.props=i.props,this.viewProps=i.viewProps,this.view=new pl(t,{props:i.props,viewProps:i.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class gs{constructor(t,i){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new fl(t,{props:i.itemProps,viewProps:Jt.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new _i(t,{blade:pi(),viewProps:Jt.create()}),this.props=i.props,T(this.props,"selected",a=>{this.itemController.props.set("selected",a),this.contentController.viewProps.set("hidden",!a)})}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class ws{constructor(t,i){this.controller_=t,this.rackApi_=i}get title(){var t;return(t=this.controller_.itemController.props.get("title"))!==null&&t!==void 0?t:""}set title(t){this.controller_.itemController.props.set("title",t)}get selected(){return this.controller_.props.get("selected")}set selected(t){this.controller_.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,i){this.rackApi_.add(t,i)}remove(t){this.rackApi_.remove(t)}addInput(t,i,a){return this.rackApi_.addInput(t,i,a)}addMonitor(t,i,a){return this.rackApi_.addMonitor(t,i,a)}addBlade(t){return this.rackApi_.addBlade(t)}}class xs extends Vn{constructor(t,i){super(t,new Qi(t.rackController,i)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.emitter_=new y,this.pageApiMap_=new Map,this.rackApi_.on("change",a=>{this.emitter_.emit("change",{event:a})}),this.rackApi_.on("update",a=>{this.emitter_.emit("update",{event:a})}),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach(a=>{this.setUpPageApi_(a)})}get pages(){return this.controller_.pageSet.items.map(t=>{const i=this.pageApiMap_.get(t);if(!i)throw v.shouldNeverHappen();return i})}addPage(t){const i=this.controller_.view.element.ownerDocument,a=new gs(i,{itemProps:L.fromObject({selected:!1,title:t.title}),props:L.fromObject({selected:!1})});this.controller_.add(a,t.index);const d=this.pageApiMap_.get(a);if(!d)throw v.shouldNeverHappen();return d}removePage(t){this.controller_.remove(t)}on(t,i){const a=i.bind(this);return this.emitter_.on(t,d=>{a(d.event)}),this}setUpPageApi_(t){const i=this.rackApi_.apiSet_.find(d=>d.controller_===t.contentController);if(!i)throw v.shouldNeverHappen();const a=new ws(t,i);this.pageApiMap_.set(t,a)}onPageAdd_(t){this.setUpPageApi_(t.item)}onPageRemove_(t){if(!this.pageApiMap_.get(t.item))throw v.shouldNeverHappen();this.pageApiMap_.delete(t.item)}}const Ji=P("tab");class ml{constructor(t,i){this.element=t.createElement("div"),this.element.classList.add(Ji(),fs()),i.viewProps.bindClassModifiers(this.element),k(i.empty,D(this.element,Ji(void 0,"nop")));const a=t.createElement("div");a.classList.add(Ji("i")),this.element.appendChild(a),this.itemsElement=a;const d=i.contentsElement;d.classList.add(Ji("c")),this.element.appendChild(d),this.contentsElement=d}}class ys extends Bn{constructor(t,i){const a=new _i(t,{blade:i.blade,viewProps:i.viewProps}),d=F(!0);super({blade:i.blade,rackController:a,view:new ml(t,{contentsElement:a.view.element,empty:d,viewProps:i.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onPageSelectedChange_=this.onPageSelectedChange_.bind(this),this.pageSet_=new Ln(()=>null),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.empty_=d,this.applyPages_()}get pageSet(){return this.pageSet_}add(t,i){this.pageSet_.add(t,i??this.pageSet_.items.length)}remove(t){this.pageSet_.remove(this.pageSet_.items[t])}applyPages_(){this.keepSelection_(),this.empty_.rawValue=this.pageSet_.items.length===0}onPageAdd_(t){const i=t.item;as(this.view.itemsElement,i.itemController.view.element,t.index),this.rackController.rack.add(i.contentController,t.index),i.props.value("selected").emitter.on("change",this.onPageSelectedChange_),this.applyPages_()}onPageRemove_(t){const i=t.item;ls(i.itemController.view.element),this.rackController.rack.remove(i.contentController),i.props.value("selected").emitter.off("change",this.onPageSelectedChange_),this.applyPages_()}keepSelection_(){if(this.pageSet_.items.length===0)return;const t=this.pageSet_.items.findIndex(i=>i.props.get("selected"));t<0?this.pageSet_.items.forEach((i,a)=>{i.props.set("selected",a===0)}):this.pageSet_.items.forEach((i,a)=>{i.props.set("selected",a===t)})}onPageSelectedChange_(t){if(t.rawValue){const i=this.pageSet_.items.findIndex(a=>a.props.value("selected")===t.sender);this.pageSet_.items.forEach((a,d)=>{a.props.set("selected",d===i)})}else this.keepSelection_()}}const Cs={id:"tab",type:"blade",accept(n){const t=H,i=Y(n,{pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")});return!i||i.pages.length===0?null:{params:i}},controller(n){const t=new ys(n.document,{blade:n.blade,viewProps:n.viewProps});return n.params.pages.forEach(i=>{const a=new gs(n.document,{itemProps:L.fromObject({selected:!1,title:i.title}),props:L.fromObject({selected:!1})});t.add(a)}),t},api(n){return n.controller instanceof ys?new xs(n.controller,n.pool):null}};function _l(n,t){const i=n.accept(t.params);if(!i)return null;const a=H.optional.boolean(t.params.disabled).value,d=H.optional.boolean(t.params.hidden).value;return n.controller({blade:pi(),document:t.document,params:Object.assign(Object.assign({},i.params),{disabled:a,hidden:d}),viewProps:Jt.create({disabled:a,hidden:d})})}class vl{constructor(){this.disabled=!1,this.emitter=new y}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class bl{constructor(t,i){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new y,this.interval_=i,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class _e{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce((i,a)=>a.constrain(i),t)}}function Ft(n,t){if(n instanceof t)return n;if(n instanceof _e){const i=n.constraints.reduce((a,d)=>a||(d instanceof t?d:null),null);if(i)return i}return null}class bi{constructor(t){this.options=t}constrain(t){const i=this.options;return i.length===0||i.filter(d=>d.value===t).length>0?t:i[0].value}}class xt{constructor(t){this.maxValue=t.max,this.minValue=t.min}constrain(t){let i=t;return m(this.minValue)||(i=Math.max(i,this.minValue)),m(this.maxValue)||(i=Math.min(i,this.maxValue)),i}}class ve{constructor(t){this.step=t}constrain(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step}}const zn=P("lst");class gl{constructor(t,i){this.onValueChange_=this.onValueChange_.bind(this),this.props_=i.props,this.element=t.createElement("div"),this.element.classList.add(zn()),i.viewProps.bindClassModifiers(this.element);const a=t.createElement("select");a.classList.add(zn("s")),T(this.props_,"options",_=>{hs(a),_.forEach((x,A)=>{const R=t.createElement("option");R.dataset.index=String(A),R.textContent=x.text,R.value=String(x.value),a.appendChild(R)})}),i.viewProps.bindDisabled(a),this.element.appendChild(a),this.selectElement=a;const d=t.createElement("div");d.classList.add(zn("m")),d.appendChild(Wi(t,"dropdown")),this.element.appendChild(d),i.value.emitter.on("change",this.onValueChange_),this.value_=i.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class gi{constructor(t,i){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=i.props,this.value=i.value,this.viewProps=i.viewProps,this.view=new gl(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const a=t.currentTarget.selectedOptions.item(0);if(!a)return;const d=Number(a.dataset.index);this.value.rawValue=this.props.get("options")[d].value}}const Ps=P("pop");class wl{constructor(t,i){this.element=t.createElement("div"),this.element.classList.add(Ps()),i.viewProps.bindClassModifiers(this.element),k(i.shows,D(this.element,Ps(void 0,"v")))}}class Es{constructor(t,i){this.shows=F(!1),this.viewProps=i.viewProps,this.view=new wl(t,{shows:this.shows,viewProps:this.viewProps})}}const Ss=P("txt");class xl{constructor(t,i){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Ss()),i.viewProps.bindClassModifiers(this.element),this.props_=i.props,this.props_.emitter.on("change",this.onChange_);const a=t.createElement("input");a.classList.add(Ss("i")),a.type="text",i.viewProps.bindDisabled(a),this.element.appendChild(a),this.inputElement=a,i.value.emitter.on("change",this.onChange_),this.value_=i.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class tn{constructor(t,i){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=i.parser,this.props=i.props,this.value=i.value,this.viewProps=i.viewProps,this.view=new xl(t,{props:i.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const a=t.currentTarget.value,d=this.parser_(a);m(d)||(this.value.rawValue=d),this.view.refresh()}}function yl(n){return String(n)}function ks(n){return n==="false"?!1:!!n}function Ts(n){return yl(n)}class Cl{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const Pl={"**":(n,t)=>Math.pow(n,t),"*":(n,t)=>n*t,"/":(n,t)=>n/t,"%":(n,t)=>n%t,"+":(n,t)=>n+t,"-":(n,t)=>n-t,"<<":(n,t)=>n<<t,">>":(n,t)=>n>>t,">>>":(n,t)=>n>>>t,"&":(n,t)=>n&t,"^":(n,t)=>n^t,"|":(n,t)=>n|t};class El{constructor(t,i,a){this.left=i,this.operator=t,this.right=a}evaluate(){const t=Pl[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Sl={"+":n=>n,"-":n=>-n,"~":n=>~n};class kl{constructor(t,i){this.operator=t,this.expression=i}evaluate(){const t=Sl[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function jn(n){return(t,i)=>{for(let a=0;a<n.length;a++){const d=n[a](t,i);if(d!=="")return d}return""}}function wi(n,t){var i;const a=n.substr(t).match(/^\s+/);return(i=a&&a[0])!==null&&i!==void 0?i:""}function Tl(n,t){const i=n.substr(t,1);return i.match(/^[1-9]$/)?i:""}function xi(n,t){var i;const a=n.substr(t).match(/^[0-9]+/);return(i=a&&a[0])!==null&&i!==void 0?i:""}function Ml(n,t){const i=xi(n,t);if(i!=="")return i;const a=n.substr(t,1);if(t+=1,a!=="-"&&a!=="+")return"";const d=xi(n,t);return d===""?"":a+d}function Kn(n,t){const i=n.substr(t,1);if(t+=1,i.toLowerCase()!=="e")return"";const a=Ml(n,t);return a===""?"":i+a}function Ms(n,t){const i=n.substr(t,1);if(i==="0")return i;const a=Tl(n,t);return t+=a.length,a===""?"":a+xi(n,t)}function Al(n,t){const i=Ms(n,t);if(t+=i.length,i==="")return"";const a=n.substr(t,1);if(t+=a.length,a!==".")return"";const d=xi(n,t);return t+=d.length,i+a+d+Kn(n,t)}function Dl(n,t){const i=n.substr(t,1);if(t+=i.length,i!==".")return"";const a=xi(n,t);return t+=a.length,a===""?"":i+a+Kn(n,t)}function Ol(n,t){const i=Ms(n,t);return t+=i.length,i===""?"":i+Kn(n,t)}const Vl=jn([Al,Dl,Ol]);function Ll(n,t){var i;const a=n.substr(t).match(/^[01]+/);return(i=a&&a[0])!==null&&i!==void 0?i:""}function Rl(n,t){const i=n.substr(t,2);if(t+=i.length,i.toLowerCase()!=="0b")return"";const a=Ll(n,t);return a===""?"":i+a}function Nl(n,t){var i;const a=n.substr(t).match(/^[0-7]+/);return(i=a&&a[0])!==null&&i!==void 0?i:""}function Il(n,t){const i=n.substr(t,2);if(t+=i.length,i.toLowerCase()!=="0o")return"";const a=Nl(n,t);return a===""?"":i+a}function Bl(n,t){var i;const a=n.substr(t).match(/^[0-9a-f]+/i);return(i=a&&a[0])!==null&&i!==void 0?i:""}function Fl(n,t){const i=n.substr(t,2);if(t+=i.length,i.toLowerCase()!=="0x")return"";const a=Bl(n,t);return a===""?"":i+a}const Ul=jn([Rl,Il,Fl]),zl=jn([Ul,Vl]);function jl(n,t){const i=zl(n,t);return t+=i.length,i===""?null:{evaluable:new Cl(i),cursor:t}}function Kl(n,t){const i=n.substr(t,1);if(t+=i.length,i!=="(")return null;const a=Ds(n,t);if(!a)return null;t=a.cursor,t+=wi(n,t).length;const d=n.substr(t,1);return t+=d.length,d!==")"?null:{evaluable:a.evaluable,cursor:t}}function Hl(n,t){return jl(n,t)||Kl(n,t)}function As(n,t){const i=Hl(n,t);if(i)return i;const a=n.substr(t,1);if(t+=a.length,a!=="+"&&a!=="-"&&a!=="~")return null;const d=As(n,t);return d?(t=d.cursor,{cursor:t,evaluable:new kl(a,d.evaluable)}):null}function Yl(n,t,i){i+=wi(t,i).length;const a=n.filter(d=>t.startsWith(d,i))[0];return a?(i+=a.length,i+=wi(t,i).length,{cursor:i,operator:a}):null}function ql(n,t){return(i,a)=>{const d=n(i,a);if(!d)return null;a=d.cursor;let _=d.evaluable;for(;;){const x=Yl(t,i,a);if(!x)break;a=x.cursor;const A=n(i,a);if(!A)return null;a=A.cursor,_=new El(x.operator,_,A.evaluable)}return _?{cursor:a,evaluable:_}:null}}const Gl=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((n,t)=>ql(n,t),As);function Ds(n,t){return t+=wi(n,t).length,Gl(n,t)}function $l(n){const t=Ds(n,0);return!t||t.cursor+wi(n,t.cursor).length!==n.length?null:t.evaluable}function Yt(n){var t;const i=$l(n);return(t=i?.evaluate())!==null&&t!==void 0?t:null}function Os(n){if(typeof n=="number")return n;if(typeof n=="string"){const t=Yt(n);if(!m(t))return t}return 0}function Xl(n){return String(n)}function ft(n){return t=>t.toFixed(Math.max(Math.min(n,20),0))}const Wl=ft(0);function en(n){return Wl(n)+"%"}function Vs(n){return String(n)}function Hn(n){return n}function Ls(n,t){for(;n.length<t;)n.push(void 0)}function Zl(n){const t=[];return Ls(t,n),F(t)}function Ql(n){const t=n.indexOf(void 0);return t<0?n:n.slice(0,t)}function Jl(n,t){const i=[...Ql(n),t];return i.length>n.length?i.splice(0,i.length-n.length):Ls(i,n.length),i}function yi({primary:n,secondary:t,forward:i,backward:a}){let d=!1;function _(x){d||(d=!0,x(),d=!1)}n.emitter.on("change",x=>{_(()=>{t.setRawValue(i(n,t),x.options)})}),t.emitter.on("change",x=>{_(()=>{n.setRawValue(a(n,t),x.options)}),_(()=>{t.setRawValue(i(n,t),x.options)})}),_(()=>{t.setRawValue(i(n,t),{forceEmit:!1,last:!0})})}function mt(n,t){const i=n*(t.altKey?.1:1)*(t.shiftKey?10:1);return t.upKey?+i:t.downKey?-i:0}function Ci(n){return{altKey:n.altKey,downKey:n.key==="ArrowDown",shiftKey:n.shiftKey,upKey:n.key==="ArrowUp"}}function qt(n){return{altKey:n.altKey,downKey:n.key==="ArrowLeft",shiftKey:n.shiftKey,upKey:n.key==="ArrowRight"}}function th(n){return n==="ArrowUp"||n==="ArrowDown"}function Rs(n){return th(n)||n==="ArrowLeft"||n==="ArrowRight"}function Yn(n,t){const i=t.ownerDocument.defaultView,a=t.getBoundingClientRect();return{x:n.pageX-((i&&i.scrollX||0)+a.left),y:n.pageY-((i&&i.scrollY||0)+a.top)}}class be{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new y,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const i=this.elem_.getBoundingClientRect();return{bounds:{width:i.width,height:i.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var i;t.preventDefault(),(i=t.currentTarget)===null||i===void 0||i.focus();const a=this.elem_.ownerDocument;a.addEventListener("mousemove",this.onDocumentMouseMove_),a.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(Yn(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(Yn(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const i=this.elem_.ownerDocument;i.removeEventListener("mousemove",this.onDocumentMouseMove_),i.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(Yn(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const i=t.targetTouches.item(0),a=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(i?{x:i.clientX-a.left,y:i.clientY-a.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=i}onTouchMove_(t){const i=t.targetTouches.item(0),a=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(i?{x:i.clientX-a.left,y:i.clientY-a.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=i}onTouchEnd_(t){var i;const a=(i=t.targetTouches.item(0))!==null&&i!==void 0?i:this.lastTouch_,d=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(a?{x:a.clientX-d.left,y:a.clientY-d.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function Z(n,t,i,a,d){const _=(n-t)/(i-t);return a+_*(d-a)}function Ns(n){return String(n.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function W(n,t,i){return Math.min(Math.max(n,t),i)}function qn(n,t){return(n%t+t)%t}const St=P("txt");class eh{constructor(t,i){this.onChange_=this.onChange_.bind(this),this.props_=i.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(St(),St(void 0,"num")),i.arrayPosition&&this.element.classList.add(St(void 0,i.arrayPosition)),i.viewProps.bindClassModifiers(this.element);const a=t.createElement("input");a.classList.add(St("i")),a.type="text",i.viewProps.bindDisabled(a),this.element.appendChild(a),this.inputElement=a,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=i.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(St()),this.inputElement.classList.add(St("i"));const d=t.createElement("div");d.classList.add(St("k")),this.element.appendChild(d),this.knobElement=d;const _=t.createElementNS(It,"svg");_.classList.add(St("g")),this.knobElement.appendChild(_);const x=t.createElementNS(It,"path");x.classList.add(St("gb")),_.appendChild(x),this.guideBodyElem_=x;const A=t.createElementNS(It,"path");A.classList.add(St("gh")),_.appendChild(A),this.guideHeadElem_=A;const R=t.createElement("div");R.classList.add(P("tt")()),this.knobElement.appendChild(R),this.tooltipElem_=R,i.value.emitter.on("change",this.onChange_),this.value=i.value,this.refresh()}onDraggingChange_(t){if(t.rawValue===null){this.element.classList.remove(St(void 0,"drg"));return}this.element.classList.add(St(void 0,"drg"));const i=t.rawValue/this.props_.get("draggingScale"),a=i+(i>0?-1:i<0?1:0),d=W(-a,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${a+d},0 L${a},4 L${a+d},8`,`M ${i},-1 L${i},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${i},4`);const _=this.props_.get("formatter");this.tooltipElem_.textContent=_(this.value.rawValue),this.tooltipElem_.style.left=`${i}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class Pi{constructor(t,i){this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=i.baseStep,this.parser_=i.parser,this.props=i.props,this.value=i.value,this.viewProps=i.viewProps,this.dragging_=F(null),this.view=new eh(t,{arrayPosition:i.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const a=new be(this.view.knobElement);a.emitter.on("down",this.onPointerDown_),a.emitter.on("move",this.onPointerMove_),a.emitter.on("up",this.onPointerUp_)}onInputChange_(t){const a=t.currentTarget.value,d=this.parser_(a);m(d)||(this.value.rawValue=d),this.view.refresh()}onInputKeyDown_(t){const i=mt(this.baseStep_,Ci(t));i!==0&&this.value.setRawValue(this.value.rawValue+i,{forceEmit:!1,last:!1})}onInputKeyUp_(t){mt(this.baseStep_,Ci(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const i=t.point.x-t.bounds.width/2;return this.originRawValue_+i*this.props.get("draggingScale")}onPointerMove_(t){const i=this.computeDraggingValue_(t.data);i!==null&&(this.value.setRawValue(i,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const i=this.computeDraggingValue_(t.data);i!==null&&(this.value.setRawValue(i,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Gn=P("sld");class ih{constructor(t,i){this.onChange_=this.onChange_.bind(this),this.props_=i.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Gn()),i.viewProps.bindClassModifiers(this.element);const a=t.createElement("div");a.classList.add(Gn("t")),i.viewProps.bindTabIndex(a),this.element.appendChild(a),this.trackElement=a;const d=t.createElement("div");d.classList.add(Gn("k")),this.trackElement.appendChild(d),this.knobElement=d,i.value.emitter.on("change",this.onChange_),this.value=i.value,this.update_()}update_(){const t=W(Z(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class nh{constructor(t,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=i.baseStep,this.value=i.value,this.viewProps=i.viewProps,this.props=i.props,this.view=new ih(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new be(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,i){t.point&&this.value.setRawValue(Z(W(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),i)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const i=mt(this.baseStep_,qt(t));i!==0&&this.value.setRawValue(this.value.rawValue+i,{forceEmit:!1,last:!1})}onKeyUp_(t){mt(this.baseStep_,qt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const $n=P("sldtxt");class rh{constructor(t,i){this.element=t.createElement("div"),this.element.classList.add($n());const a=t.createElement("div");a.classList.add($n("s")),this.sliderView_=i.sliderView,a.appendChild(this.sliderView_.element),this.element.appendChild(a);const d=t.createElement("div");d.classList.add($n("t")),this.textView_=i.textView,d.appendChild(this.textView_.element),this.element.appendChild(d)}}class Xn{constructor(t,i){this.value=i.value,this.viewProps=i.viewProps,this.sliderC_=new nh(t,{baseStep:i.baseStep,props:i.sliderProps,value:i.value,viewProps:this.viewProps}),this.textC_=new Pi(t,{baseStep:i.baseStep,parser:i.parser,props:i.textProps,value:i.value,viewProps:i.viewProps}),this.view=new rh(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function Ei(n,t){n.write(t)}function nn(n){const t=H;if(Array.isArray(n))return t.required.array(t.required.object({text:t.required.string,value:t.required.raw}))(n).value;if(typeof n=="object")return t.required.raw(n).value}function Is(n){if(n==="inline"||n==="popup")return n}function te(n){const t=H;return t.required.object({max:t.optional.number,min:t.optional.number,step:t.optional.number})(n).value}function Bs(n){if(Array.isArray(n))return n;const t=[];return Object.keys(n).forEach(i=>{t.push({text:i,value:n[i]})}),t}function Wn(n){return m(n)?null:new bi(Bs(n))}function Zn(n){const t=n?Ft(n,bi):null;return t?t.options:null}function sh(n){const t=n?Ft(n,ve):null;return t?t.step:null}function rn(n,t){const i=n&&Ft(n,ve);return i?Ns(i.step):Math.max(Ns(t),2)}function Be(n){const t=sh(n);return t??1}function Fe(n,t){var i;const a=n&&Ft(n,ve),d=Math.abs((i=a?.step)!==null&&i!==void 0?i:t);return d===0?.1:Math.pow(10,Math.floor(Math.log10(d))-1)}const sn=P("ckb");class oh{constructor(t,i){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(sn()),i.viewProps.bindClassModifiers(this.element);const a=t.createElement("label");a.classList.add(sn("l")),this.element.appendChild(a);const d=t.createElement("input");d.classList.add(sn("i")),d.type="checkbox",a.appendChild(d),this.inputElement=d,i.viewProps.bindDisabled(this.inputElement);const _=t.createElement("div");_.classList.add(sn("w")),a.appendChild(_);const x=Wi(t,"check");_.appendChild(x),i.value.emitter.on("change",this.onValueChange_),this.value=i.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class ah{constructor(t,i){this.onInputChange_=this.onInputChange_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new oh(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const i=t.currentTarget;this.value.rawValue=i.checked}}function lh(n){const t=[],i=Wn(n.options);return i&&t.push(i),new _e(t)}const hh={id:"input-bool",type:"input",accept:(n,t)=>{if(typeof n!="boolean")return null;const a=Y(t,{options:H.optional.custom(nn)});return a?{initialValue:n,params:a}:null},binding:{reader:n=>ks,constraint:n=>lh(n.params),writer:n=>Ei},controller:n=>{var t;const i=n.document,a=n.value,d=n.constraint;return d&&Ft(d,bi)?new gi(i,{props:L.fromObject({options:(t=Zn(d))!==null&&t!==void 0?t:[]}),value:a,viewProps:n.viewProps}):new ah(i,{value:a,viewProps:n.viewProps})}},ge=P("col");class uh{constructor(t,i){this.element=t.createElement("div"),this.element.classList.add(ge()),i.foldable.bindExpandedClass(this.element,ge(void 0,"expanded")),T(i.foldable,"completed",D(this.element,ge(void 0,"cpl")));const a=t.createElement("div");a.classList.add(ge("h")),this.element.appendChild(a);const d=t.createElement("div");d.classList.add(ge("s")),a.appendChild(d),this.swatchElement=d;const _=t.createElement("div");if(_.classList.add(ge("t")),a.appendChild(_),this.textElement=_,i.pickerLayout==="inline"){const x=t.createElement("div");x.classList.add(ge("p")),this.element.appendChild(x),this.pickerElement=x}else this.pickerElement=null}}function dh(n,t,i){const a=W(n/255,0,1),d=W(t/255,0,1),_=W(i/255,0,1),x=Math.max(a,d,_),A=Math.min(a,d,_),R=x-A;let N=0,z=0;const j=(A+x)/2;return R!==0&&(z=R/(1-Math.abs(x+A-1)),a===x?N=(d-_)/R:d===x?N=2+(_-a)/R:N=4+(a-d)/R,N=N/6+(N<0?1:0)),[N*360,z*100,j*100]}function ch(n,t,i){const a=(n%360+360)%360,d=W(t/100,0,1),_=W(i/100,0,1),x=(1-Math.abs(2*_-1))*d,A=x*(1-Math.abs(a/60%2-1)),R=_-x/2;let N,z,j;return a>=0&&a<60?[N,z,j]=[x,A,0]:a>=60&&a<120?[N,z,j]=[A,x,0]:a>=120&&a<180?[N,z,j]=[0,x,A]:a>=180&&a<240?[N,z,j]=[0,A,x]:a>=240&&a<300?[N,z,j]=[A,0,x]:[N,z,j]=[x,0,A],[(N+R)*255,(z+R)*255,(j+R)*255]}function ph(n,t,i){const a=W(n/255,0,1),d=W(t/255,0,1),_=W(i/255,0,1),x=Math.max(a,d,_),A=Math.min(a,d,_),R=x-A;let N;R===0?N=0:x===a?N=60*(((d-_)/R%6+6)%6):x===d?N=60*((_-a)/R+2):N=60*((a-d)/R+4);const z=x===0?0:R/x,j=x;return[N,z*100,j*100]}function Fs(n,t,i){const a=qn(n,360),d=W(t/100,0,1),_=W(i/100,0,1),x=_*d,A=x*(1-Math.abs(a/60%2-1)),R=_-x;let N,z,j;return a>=0&&a<60?[N,z,j]=[x,A,0]:a>=60&&a<120?[N,z,j]=[A,x,0]:a>=120&&a<180?[N,z,j]=[0,x,A]:a>=180&&a<240?[N,z,j]=[0,A,x]:a>=240&&a<300?[N,z,j]=[A,0,x]:[N,z,j]=[x,0,A],[(N+R)*255,(z+R)*255,(j+R)*255]}function fh(n,t,i){const a=i+t*(100-Math.abs(2*i-100))/200;return[n,a!==0?t*(100-Math.abs(2*i-100))/a:0,i+t*(100-Math.abs(2*i-100))/200]}function mh(n,t,i){const a=100-Math.abs(i*(200-t)/100-100);return[n,a!==0?t*i/a:0,i*(200-t)/200]}function Ue(n){return[n[0],n[1],n[2]]}function Us(n,t){return[n[0],n[1],n[2],t]}const _h={hsl:{hsl:(n,t,i)=>[n,t,i],hsv:fh,rgb:ch},hsv:{hsl:mh,hsv:(n,t,i)=>[n,t,i],rgb:Fs},rgb:{hsl:dh,hsv:ph,rgb:(n,t,i)=>[n,t,i]}};function vh(n,t,i){return _h[t][i](...n)}const bh={hsl:n=>{var t;return[qn(n[0],360),W(n[1],0,100),W(n[2],0,100),W((t=n[3])!==null&&t!==void 0?t:1,0,1)]},hsv:n=>{var t;return[qn(n[0],360),W(n[1],0,100),W(n[2],0,100),W((t=n[3])!==null&&t!==void 0?t:1,0,1)]},rgb:n=>{var t;return[W(n[0],0,255),W(n[1],0,255),W(n[2],0,255),W((t=n[3])!==null&&t!==void 0?t:1,0,1)]}};function on(n,t){return typeof n!="object"||m(n)?!1:t in n&&typeof n[t]=="number"}class B{constructor(t,i){this.mode_=i,this.comps_=bh[i](t)}static black(){return new B([0,0,0],"rgb")}static fromObject(t){const i="a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b];return new B(i,"rgb")}static toRgbaObject(t){return t.toRgbaObject()}static isRgbColorObject(t){return on(t,"r")&&on(t,"g")&&on(t,"b")}static isRgbaColorObject(t){return this.isRgbColorObject(t)&&on(t,"a")}static isColorObject(t){return this.isRgbColorObject(t)}static equals(t,i){if(t.mode_!==i.mode_)return!1;const a=t.comps_,d=i.comps_;for(let _=0;_<a.length;_++)if(a[_]!==d[_])return!1;return!0}get mode(){return this.mode_}getComponents(t){return Us(vh(Ue(this.comps_),this.mode_,t||this.mode_),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const ee=P("colp");class gh{constructor(t,i){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(ee());const a=t.createElement("div");a.classList.add(ee("hsv"));const d=t.createElement("div");d.classList.add(ee("sv")),this.svPaletteView_=i.svPaletteView,d.appendChild(this.svPaletteView_.element),a.appendChild(d);const _=t.createElement("div");_.classList.add(ee("h")),this.hPaletteView_=i.hPaletteView,_.appendChild(this.hPaletteView_.element),a.appendChild(_),this.element.appendChild(a);const x=t.createElement("div");if(x.classList.add(ee("rgb")),this.textView_=i.textView,x.appendChild(this.textView_.element),this.element.appendChild(x),i.alphaViews){this.alphaViews_={palette:i.alphaViews.palette,text:i.alphaViews.text};const A=t.createElement("div");A.classList.add(ee("a"));const R=t.createElement("div");R.classList.add(ee("ap")),R.appendChild(this.alphaViews_.palette.element),A.appendChild(R);const N=t.createElement("div");N.classList.add(ee("at")),N.appendChild(this.alphaViews_.text.element),A.appendChild(N),this.element.appendChild(A)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map(i=>i.inputElement)];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function Qn(n){const t=H;return Y(n,{alpha:t.optional.boolean,expanded:t.optional.boolean,picker:t.optional.custom(Is)})}function we(n){return n?.1:1}function kt(n,t){const i=n.match(/^(.+)%$/);return Math.min(i?parseFloat(i[1])*.01*t:parseFloat(n),t)}const wh={deg:n=>n,grad:n=>n*360/400,rad:n=>n*360/(2*Math.PI),turn:n=>n*360};function zs(n){const t=n.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(n);const i=parseFloat(t[1]),a=t[2];return wh[a](i)}const Jn={"func.rgb":n=>{const t=n.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const i=[kt(t[1],255),kt(t[2],255),kt(t[3],255)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:new B(i,"rgb")},"func.rgba":n=>{const t=n.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const i=[kt(t[1],255),kt(t[2],255),kt(t[3],255),kt(t[4],1)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:new B(i,"rgb")},"func.hsl":n=>{const t=n.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const i=[zs(t[1]),kt(t[2],100),kt(t[3],100)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:new B(i,"hsl")},"func.hsla":n=>{const t=n.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const i=[zs(t[1]),kt(t[2],100),kt(t[3],100),kt(t[4],1)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:new B(i,"hsl")},"hex.rgb":n=>{const t=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return new B([parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)],"rgb");const i=n.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return i?new B([parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)],"rgb"):null},"hex.rgba":n=>{const t=n.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return new B([parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),Z(parseInt(t[4]+t[4],16),0,255,0,1)],"rgb");const i=n.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return i?new B([parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),Z(parseInt(i[4],16),0,255,0,1)],"rgb"):null}};function an(n){return Object.keys(Jn).reduce((i,a)=>{if(i)return i;const d=Jn[a];return d(n)?a:null},null)}const ln=n=>{const t=an(n);return t?Jn[t](n):null};function xh(n){return n==="func.hsla"||n==="func.rgba"||n==="hex.rgba"}function yh(n){if(typeof n=="string"){const t=ln(n);if(t)return t}return B.black()}function js(n){const t=W(Math.floor(n),0,255).toString(16);return t.length===1?`0${t}`:t}function tr(n,t="#"){const i=Ue(n.getComponents("rgb")).map(js).join("");return`${t}${i}`}function hn(n,t="#"){const i=n.getComponents("rgb"),a=[i[0],i[1],i[2],i[3]*255].map(js).join("");return`${t}${a}`}function Ks(n){const t=ft(0);return`rgb(${Ue(n.getComponents("rgb")).map(a=>t(a)).join(", ")})`}function un(n){const t=ft(2),i=ft(0);return`rgba(${n.getComponents("rgb").map((d,_)=>(_===3?t:i)(d)).join(", ")})`}function Ch(n){const t=[ft(0),en,en];return`hsl(${Ue(n.getComponents("hsl")).map((a,d)=>t[d](a)).join(", ")})`}function Ph(n){const t=[ft(0),en,en,ft(2)];return`hsla(${n.getComponents("hsl").map((a,d)=>t[d](a)).join(", ")})`}const Eh={"func.hsl":Ch,"func.hsla":Ph,"func.rgb":Ks,"func.rgba":un,"hex.rgb":tr,"hex.rgba":hn};function Hs(n){return Eh[n]}const Si=P("apl");class Sh{constructor(t,i){this.onValueChange_=this.onValueChange_.bind(this),this.value=i.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Si()),i.viewProps.bindTabIndex(this.element);const a=t.createElement("div");a.classList.add(Si("b")),this.element.appendChild(a);const d=t.createElement("div");d.classList.add(Si("c")),a.appendChild(d),this.colorElem_=d;const _=t.createElement("div");_.classList.add(Si("m")),this.element.appendChild(_),this.markerElem_=_;const x=t.createElement("div");x.classList.add(Si("p")),this.markerElem_.appendChild(x),this.previewElem_=x,this.update_()}update_(){const t=this.value.rawValue,i=t.getComponents("rgb"),a=new B([i[0],i[1],i[2],0],"rgb"),d=new B([i[0],i[1],i[2],255],"rgb"),_=["to right",un(a),un(d)];this.colorElem_.style.background=`linear-gradient(${_.join(",")})`,this.previewElem_.style.backgroundColor=un(t);const x=Z(i[3],0,1,0,100);this.markerElem_.style.left=`${x}%`}onValueChange_(){this.update_()}}class kh{constructor(t,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new Sh(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new be(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,i){if(!t.point)return;const a=t.point.x/t.bounds.width,d=this.value.rawValue,[_,x,A]=d.getComponents("hsv");this.value.setRawValue(new B([_,x,A,a],"hsv"),i)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const i=mt(we(!0),qt(t));if(i===0)return;const a=this.value.rawValue,[d,_,x,A]=a.getComponents("hsv");this.value.setRawValue(new B([d,_,x,A+i],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){mt(we(!0),qt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const ze=P("coltxt");function Th(n){const t=n.createElement("select"),i=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return t.appendChild(i.reduce((a,d)=>{const _=n.createElement("option");return _.textContent=d.text,_.value=d.value,a.appendChild(_),a},n.createDocumentFragment())),t}class Mh{constructor(t,i){this.element=t.createElement("div"),this.element.classList.add(ze());const a=t.createElement("div");a.classList.add(ze("m")),this.modeElem_=Th(t),this.modeElem_.classList.add(ze("ms")),a.appendChild(this.modeSelectElement);const d=t.createElement("div");d.classList.add(ze("mm")),d.appendChild(Wi(t,"dropdown")),a.appendChild(d),this.element.appendChild(a);const _=t.createElement("div");_.classList.add(ze("w")),this.element.appendChild(_),this.textsElem_=_,this.textViews_=i.textViews,this.applyTextViews_(),k(i.colorMode,x=>{this.modeElem_.value=x})}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(t){this.textViews_=t,this.applyTextViews_()}applyTextViews_(){hs(this.textsElem_);const t=this.element.ownerDocument;this.textViews_.forEach(i=>{const a=t.createElement("div");a.classList.add(ze("c")),a.appendChild(i.element),this.textsElem_.appendChild(a)})}}const Ah=ft(0),Dh={rgb:()=>new xt({min:0,max:255}),hsl:n=>n===0?new xt({min:0,max:360}):new xt({min:0,max:100}),hsv:n=>n===0?new xt({min:0,max:360}):new xt({min:0,max:100})};function er(n,t,i){return new Pi(n,{arrayPosition:i===0?"fst":i===2?"lst":"mid",baseStep:we(!1),parser:t.parser,props:L.fromObject({draggingScale:1,formatter:Ah}),value:F(0,{constraint:Dh[t.colorMode](i)}),viewProps:t.viewProps})}class Oh{constructor(t,i){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.parser_=i.parser,this.value=i.value,this.viewProps=i.viewProps,this.colorMode=F(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new Mh(t,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const i={colorMode:this.colorMode.rawValue,parser:this.parser_,viewProps:this.viewProps},a=[er(t,i,0),er(t,i,1),er(t,i,2)];return a.forEach((d,_)=>{yi({primary:this.value,secondary:d.value,forward:x=>x.rawValue.getComponents(this.colorMode.rawValue)[_],backward:(x,A)=>{const R=this.colorMode.rawValue,N=x.rawValue.getComponents(R);return N[_]=A.rawValue,new B(Us(Ue(N),N[3]),R)}})}),a}onModeSelectChange_(t){const i=t.currentTarget;this.colorMode.rawValue=i.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const ir=P("hpl");class Vh{constructor(t,i){this.onValueChange_=this.onValueChange_.bind(this),this.value=i.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(ir()),i.viewProps.bindTabIndex(this.element);const a=t.createElement("div");a.classList.add(ir("c")),this.element.appendChild(a);const d=t.createElement("div");d.classList.add(ir("m")),this.element.appendChild(d),this.markerElem_=d,this.update_()}update_(){const t=this.value.rawValue,[i]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=Ks(new B([i,100,100],"hsv"));const a=Z(i,0,360,0,100);this.markerElem_.style.left=`${a}%`}onValueChange_(){this.update_()}}class Lh{constructor(t,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new Vh(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new be(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,i){if(!t.point)return;const a=Z(W(t.point.x,0,t.bounds.width),0,t.bounds.width,0,359),d=this.value.rawValue,[,_,x,A]=d.getComponents("hsv");this.value.setRawValue(new B([a,_,x,A],"hsv"),i)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const i=mt(we(!1),qt(t));if(i===0)return;const a=this.value.rawValue,[d,_,x,A]=a.getComponents("hsv");this.value.setRawValue(new B([d+i,_,x,A],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){mt(we(!1),qt(t))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const nr=P("svp"),Ys=64;class Rh{constructor(t,i){this.onValueChange_=this.onValueChange_.bind(this),this.value=i.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(nr()),i.viewProps.bindTabIndex(this.element);const a=t.createElement("canvas");a.height=Ys,a.width=Ys,a.classList.add(nr("c")),this.element.appendChild(a),this.canvasElement=a;const d=t.createElement("div");d.classList.add(nr("m")),this.element.appendChild(d),this.markerElem_=d,this.update_()}update_(){const t=Ya(this.canvasElement);if(!t)return;const a=this.value.rawValue.getComponents("hsv"),d=this.canvasElement.width,_=this.canvasElement.height,x=t.getImageData(0,0,d,_),A=x.data;for(let z=0;z<_;z++)for(let j=0;j<d;j++){const xe=Z(j,0,d,0,100),Ti=Z(z,0,_,100,0),Mi=Fs(a[0],xe,Ti),Ye=(z*d+j)*4;A[Ye]=Mi[0],A[Ye+1]=Mi[1],A[Ye+2]=Mi[2],A[Ye+3]=255}t.putImageData(x,0,0);const R=Z(a[1],0,100,0,100);this.markerElem_.style.left=`${R}%`;const N=Z(a[2],0,100,100,0);this.markerElem_.style.top=`${N}%`}onValueChange_(){this.update_()}}class Nh{constructor(t,i){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.view=new Rh(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new be(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,i){if(!t.point)return;const a=Z(t.point.x,0,t.bounds.width,0,100),d=Z(t.point.y,0,t.bounds.height,100,0),[_,,,x]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new B([_,a,d,x],"hsv"),i)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){Rs(t.key)&&t.preventDefault();const[i,a,d,_]=this.value.rawValue.getComponents("hsv"),x=we(!1),A=mt(x,qt(t)),R=mt(x,Ci(t));A===0&&R===0||this.value.setRawValue(new B([i,a+A,d+R,_],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const i=we(!1),a=mt(i,qt(t)),d=mt(i,Ci(t));a===0&&d===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Ih{constructor(t,i){this.value=i.value,this.viewProps=i.viewProps,this.hPaletteC_=new Lh(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Nh(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=i.supportsAlpha?{palette:new kh(t,{value:this.value,viewProps:this.viewProps}),text:new Pi(t,{parser:Yt,baseStep:.1,props:L.fromObject({draggingScale:.01,formatter:ft(2)}),value:F(0,{constraint:new xt({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&yi({primary:this.value,secondary:this.alphaIcs_.text.value,forward:a=>a.rawValue.getComponents()[3],backward:(a,d)=>{const _=a.rawValue.getComponents();return _[3]=d.rawValue,new B(_,a.rawValue.mode)}}),this.textC_=new Oh(t,{parser:Yt,value:this.value,viewProps:this.viewProps}),this.view=new gh(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:i.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}get textController(){return this.textC_}}const rr=P("colsw");class Bh{constructor(t,i){this.onValueChange_=this.onValueChange_.bind(this),i.value.emitter.on("change",this.onValueChange_),this.value=i.value,this.element=t.createElement("div"),this.element.classList.add(rr()),i.viewProps.bindClassModifiers(this.element);const a=t.createElement("div");a.classList.add(rr("sw")),this.element.appendChild(a),this.swatchElem_=a;const d=t.createElement("button");d.classList.add(rr("b")),i.viewProps.bindDisabled(d),this.element.appendChild(d),this.buttonElement=d,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=hn(t)}onValueChange_(){this.update_()}}class Fh{constructor(t,i){this.value=i.value,this.viewProps=i.viewProps,this.view=new Bh(t,{value:this.value,viewProps:this.viewProps})}}class sr{constructor(t,i){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.foldable_=fi.create(i.expanded),this.swatchC_=new Fh(t,{value:this.value,viewProps:this.viewProps});const a=this.swatchC_.view.buttonElement;a.addEventListener("blur",this.onButtonBlur_),a.addEventListener("click",this.onButtonClick_),this.textC_=new tn(t,{parser:i.parser,props:L.fromObject({formatter:i.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new uh(t,{foldable:this.foldable_,pickerLayout:i.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=i.pickerLayout==="popup"?new Es(t,{viewProps:this.viewProps}):null;const d=new Ih(t,{supportsAlpha:i.supportsAlpha,value:this.value,viewProps:this.viewProps});d.view.allFocusableElements.forEach(_=>{_.addEventListener("blur",this.onPopupChildBlur_),_.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=d,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(d.view.element),yi({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:_=>_.rawValue,backward:(_,x)=>x.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),On(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const i=this.view.element,a=t.relatedTarget;(!a||!i.contains(a))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const i=this.popC_.view.element,a=us(t);a&&i.contains(a)||a&&a===this.swatchC_.view.buttonElement&&!Dn(i.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function Uh(n){return B.isColorObject(n)?B.fromObject(n):B.black()}function zh(n){return Ue(n.getComponents("rgb")).reduce((t,i)=>t<<8|Math.floor(i)&255,0)}function jh(n){return n.getComponents("rgb").reduce((t,i,a)=>{const d=Math.floor(a===3?i*255:i)&255;return t<<8|d},0)>>>0}function Kh(n){return new B([n>>16&255,n>>8&255,n&255],"rgb")}function Hh(n){return new B([n>>24&255,n>>16&255,n>>8&255,Z(n&255,0,255,0,1)],"rgb")}function Yh(n){return typeof n!="number"?B.black():Kh(n)}function qh(n){return typeof n!="number"?B.black():Hh(n)}function Gh(n){const t=Hs(n);return(i,a)=>{Ei(i,t(a))}}function $h(n){const t=n?jh:zh;return(i,a)=>{Ei(i,t(a))}}function Xh(n,t){const i=t.toRgbaObject();n.writeProperty("r",i.r),n.writeProperty("g",i.g),n.writeProperty("b",i.b),n.writeProperty("a",i.a)}function Wh(n,t){const i=t.toRgbaObject();n.writeProperty("r",i.r),n.writeProperty("g",i.g),n.writeProperty("b",i.b)}function Zh(n){return n?Xh:Wh}function or(n){return"alpha"in n&&n.alpha===!0}function Qh(n){return n?t=>hn(t,"0x"):t=>tr(t,"0x")}const Jh={id:"input-color-number",type:"input",accept:(n,t)=>{if(typeof n!="number"||!("view"in t)||t.view!=="color")return null;const i=Qn(t);return i?{initialValue:n,params:i}:null},binding:{reader:n=>or(n.params)?qh:Yh,equals:B.equals,writer:n=>$h(or(n.params))},controller:n=>{const t=or(n.params),i="expanded"in n.params?n.params.expanded:void 0,a="picker"in n.params?n.params.picker:void 0;return new sr(n.document,{expanded:i??!1,formatter:Qh(t),parser:ln,pickerLayout:a??"popup",supportsAlpha:t,value:n.value,viewProps:n.viewProps})}};function tu(n){return B.isRgbaColorObject(n)}const eu={id:"input-color-object",type:"input",accept:(n,t)=>{if(!B.isColorObject(n))return null;const i=Qn(t);return i?{initialValue:n,params:i}:null},binding:{reader:n=>Uh,equals:B.equals,writer:n=>Zh(tu(n.initialValue))},controller:n=>{const t=B.isRgbaColorObject(n.initialValue),i="expanded"in n.params?n.params.expanded:void 0,a="picker"in n.params?n.params.picker:void 0,d=t?hn:tr;return new sr(n.document,{expanded:i??!1,formatter:d,parser:ln,pickerLayout:a??"popup",supportsAlpha:t,value:n.value,viewProps:n.viewProps})}},iu={id:"input-color-string",type:"input",accept:(n,t)=>{if(typeof n!="string"||"view"in t&&t.view==="text"||!an(n))return null;const a=Qn(t);return a?{initialValue:n,params:a}:null},binding:{reader:n=>yh,equals:B.equals,writer:n=>{const t=an(n.initialValue);if(!t)throw v.shouldNeverHappen();return Gh(t)}},controller:n=>{const t=an(n.initialValue);if(!t)throw v.shouldNeverHappen();const i=Hs(t),a="expanded"in n.params?n.params.expanded:void 0,d="picker"in n.params?n.params.picker:void 0;return new sr(n.document,{expanded:a??!1,formatter:i,parser:ln,pickerLayout:d??"popup",supportsAlpha:xh(t),value:n.value,viewProps:n.viewProps})}};class ie{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const i=this.asm_.toComponents(t).map((a,d)=>{var _,x;return(x=(_=this.components[d])===null||_===void 0?void 0:_.constrain(a))!==null&&x!==void 0?x:a});return this.asm_.fromComponents(i)}}const qs=P("pndtxt");class nu{constructor(t,i){this.textViews=i.textViews,this.element=t.createElement("div"),this.element.classList.add(qs()),this.textViews.forEach(a=>{const d=t.createElement("div");d.classList.add(qs("a")),d.appendChild(a.element),this.element.appendChild(d)})}}function ru(n,t,i){return new Pi(n,{arrayPosition:i===0?"fst":i===t.axes.length-1?"lst":"mid",baseStep:t.axes[i].baseStep,parser:t.parser,props:t.axes[i].textProps,value:F(0,{constraint:t.axes[i].constraint}),viewProps:t.viewProps})}class ar{constructor(t,i){this.value=i.value,this.viewProps=i.viewProps,this.acs_=i.axes.map((a,d)=>ru(t,i,d)),this.acs_.forEach((a,d)=>{yi({primary:this.value,secondary:a.value,forward:_=>i.assembly.toComponents(_.rawValue)[d],backward:(_,x)=>{const A=i.assembly.toComponents(_.rawValue);return A[d]=x.rawValue,i.assembly.fromComponents(A)}})}),this.view=new nu(t,{textViews:this.acs_.map(a=>a.view)})}}function su(n){return"step"in n&&!m(n.step)?new ve(n.step):null}function ou(n){return"max"in n&&!m(n.max)||"min"in n&&!m(n.min)?new xt({max:n.max,min:n.min}):null}function au(n){const t=[],i=su(n);i&&t.push(i);const a=ou(n);a&&t.push(a);const d=Wn(n.options);return d&&t.push(d),new _e(t)}function lu(n){const t=n?Ft(n,xt):null;return t?[t.minValue,t.maxValue]:[void 0,void 0]}function hu(n){const[t,i]=lu(n);return[t??0,i??100]}const uu={id:"input-number",type:"input",accept:(n,t)=>{if(typeof n!="number")return null;const i=H,a=Y(t,{format:i.optional.function,max:i.optional.number,min:i.optional.number,options:i.optional.custom(nn),step:i.optional.number});return a?{initialValue:n,params:a}:null},binding:{reader:n=>Os,constraint:n=>au(n.params),writer:n=>Ei},controller:n=>{var t,i;const a=n.value,d=n.constraint;if(d&&Ft(d,bi))return new gi(n.document,{props:L.fromObject({options:(t=Zn(d))!==null&&t!==void 0?t:[]}),value:a,viewProps:n.viewProps});const _=(i="format"in n.params?n.params.format:void 0)!==null&&i!==void 0?i:ft(rn(d,a.rawValue));if(d&&Ft(d,xt)){const[x,A]=hu(d);return new Xn(n.document,{baseStep:Be(d),parser:Yt,sliderProps:L.fromObject({maxValue:A,minValue:x}),textProps:L.fromObject({draggingScale:Fe(d,a.rawValue),formatter:_}),value:a,viewProps:n.viewProps})}return new Pi(n.document,{baseStep:Be(d),parser:Yt,props:L.fromObject({draggingScale:Fe(d,a.rawValue),formatter:_}),value:a,viewProps:n.viewProps})}};class ne{constructor(t=0,i=0){this.x=t,this.y=i}getComponents(){return[this.x,this.y]}static isObject(t){if(m(t))return!1;const i=t.x,a=t.y;return!(typeof i!="number"||typeof a!="number")}static equals(t,i){return t.x===i.x&&t.y===i.y}toObject(){return{x:this.x,y:this.y}}}const Gs={toComponents:n=>n.getComponents(),fromComponents:n=>new ne(...n)},je=P("p2d");class du{constructor(t,i){this.element=t.createElement("div"),this.element.classList.add(je()),i.viewProps.bindClassModifiers(this.element),k(i.expanded,D(this.element,je(void 0,"expanded")));const a=t.createElement("div");a.classList.add(je("h")),this.element.appendChild(a);const d=t.createElement("button");d.classList.add(je("b")),d.appendChild(Wi(t,"p2dpad")),i.viewProps.bindDisabled(d),a.appendChild(d),this.buttonElement=d;const _=t.createElement("div");if(_.classList.add(je("t")),a.appendChild(_),this.textElement=_,i.pickerLayout==="inline"){const x=t.createElement("div");x.classList.add(je("p")),this.element.appendChild(x),this.pickerElement=x}else this.pickerElement=null}}const re=P("p2dp");class cu{constructor(t,i){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=i.invertsY,this.maxValue_=i.maxValue,this.element=t.createElement("div"),this.element.classList.add(re()),i.layout==="popup"&&this.element.classList.add(re(void 0,"p"));const a=t.createElement("div");a.classList.add(re("p")),i.viewProps.bindTabIndex(a),this.element.appendChild(a),this.padElement=a;const d=t.createElementNS(It,"svg");d.classList.add(re("g")),this.padElement.appendChild(d),this.svgElem_=d;const _=t.createElementNS(It,"line");_.classList.add(re("ax")),_.setAttributeNS(null,"x1","0"),_.setAttributeNS(null,"y1","50%"),_.setAttributeNS(null,"x2","100%"),_.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(_);const x=t.createElementNS(It,"line");x.classList.add(re("ax")),x.setAttributeNS(null,"x1","50%"),x.setAttributeNS(null,"y1","0"),x.setAttributeNS(null,"x2","50%"),x.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(x);const A=t.createElementNS(It,"line");A.classList.add(re("l")),A.setAttributeNS(null,"x1","50%"),A.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(A),this.lineElem_=A;const R=t.createElement("div");R.classList.add(re("m")),this.padElement.appendChild(R),this.markerElem_=R,i.value.emitter.on("change",this.onValueChange_),this.value=i.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,i]=this.value.rawValue.getComponents(),a=this.maxValue_,d=Z(t,-a,+a,0,100),_=Z(i,-a,+a,0,100),x=this.invertsY_?100-_:_;this.lineElem_.setAttributeNS(null,"x2",`${d}%`),this.lineElem_.setAttributeNS(null,"y2",`${x}%`),this.markerElem_.style.left=`${d}%`,this.markerElem_.style.top=`${x}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function $s(n,t,i){return[mt(t[0],qt(n)),mt(t[1],Ci(n))*(i?1:-1)]}class pu{constructor(t,i){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.baseSteps_=i.baseSteps,this.maxValue_=i.maxValue,this.invertsY_=i.invertsY,this.view=new cu(t,{invertsY:this.invertsY_,layout:i.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new be(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,i){if(!t.point)return;const a=this.maxValue_,d=Z(t.point.x,0,t.bounds.width,-a,+a),_=Z(this.invertsY_?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-a,+a);this.value.setRawValue(new ne(d,_),i)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){Rs(t.key)&&t.preventDefault();const[i,a]=$s(t,this.baseSteps_,this.invertsY_);i===0&&a===0||this.value.setRawValue(new ne(this.value.rawValue.x+i,this.value.rawValue.y+a),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[i,a]=$s(t,this.baseSteps_,this.invertsY_);i===0&&a===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class fu{constructor(t,i){var a,d;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.foldable_=fi.create(i.expanded),this.popC_=i.pickerLayout==="popup"?new Es(t,{viewProps:this.viewProps}):null;const _=new pu(t,{baseSteps:[i.axes[0].baseStep,i.axes[1].baseStep],invertsY:i.invertsY,layout:i.pickerLayout,maxValue:i.maxValue,value:this.value,viewProps:this.viewProps});_.view.allFocusableElements.forEach(x=>{x.addEventListener("blur",this.onPopupChildBlur_),x.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=_,this.textC_=new ar(t,{assembly:Gs,axes:i.axes,parser:i.parser,value:this.value,viewProps:this.viewProps}),this.view=new du(t,{expanded:this.foldable_.value("expanded"),pickerLayout:i.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(a=this.view.buttonElement)===null||a===void 0||a.addEventListener("blur",this.onPadButtonBlur_),(d=this.view.buttonElement)===null||d===void 0||d.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),yi({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:x=>x.rawValue,backward:(x,A)=>A.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),On(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(t){if(!this.popC_)return;const i=this.view.element,a=t.relatedTarget;(!a||!i.contains(a))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const i=this.popC_.view.element,a=us(t);a&&i.contains(a)||a&&a===this.view.buttonElement&&!Dn(i.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?t.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&t.key==="Escape"&&this.view.buttonElement.focus()}}function mu(n){return ne.isObject(n)?new ne(n.x,n.y):new ne}function _u(n,t){n.writeProperty("x",t.x),n.writeProperty("y",t.y)}function Xs(n){if(!n)return;const t=[];return m(n.step)||t.push(new ve(n.step)),(!m(n.max)||!m(n.min))&&t.push(new xt({max:n.max,min:n.min})),new _e(t)}function vu(n){return new ie({assembly:Gs,components:[Xs("x"in n?n.x:void 0),Xs("y"in n?n.y:void 0)]})}function Ws(n,t){const i=n&&Ft(n,xt);if(i)return Math.max(Math.abs(i.minValue||0),Math.abs(i.maxValue||0));const a=Be(n);return Math.max(Math.abs(a)*10,Math.abs(t)*10)}function bu(n,t){const i=t instanceof ie?t.components[0]:void 0,a=t instanceof ie?t.components[1]:void 0,d=Ws(i,n.x),_=Ws(a,n.y);return Math.max(d,_)}function Zs(n,t){return{baseStep:Be(t),constraint:t,textProps:L.fromObject({draggingScale:Fe(t,n),formatter:ft(rn(t,n))})}}function gu(n){if(!("y"in n))return!1;const t=n.y;return t&&"inverted"in t?!!t.inverted:!1}const wu={id:"input-point2d",type:"input",accept:(n,t)=>{if(!ne.isObject(n))return null;const i=H,a=Y(t,{expanded:i.optional.boolean,picker:i.optional.custom(Is),x:i.optional.custom(te),y:i.optional.object({inverted:i.optional.boolean,max:i.optional.number,min:i.optional.number,step:i.optional.number})});return a?{initialValue:n,params:a}:null},binding:{reader:n=>mu,constraint:n=>vu(n.params),equals:ne.equals,writer:n=>_u},controller:n=>{const t=n.document,i=n.value,a=n.constraint;if(!(a instanceof ie))throw v.shouldNeverHappen();const d="expanded"in n.params?n.params.expanded:void 0,_="picker"in n.params?n.params.picker:void 0;return new fu(t,{axes:[Zs(i.rawValue.x,a.components[0]),Zs(i.rawValue.y,a.components[1])],expanded:d??!1,invertsY:gu(n.params),maxValue:bu(i.rawValue,a),parser:Yt,pickerLayout:_??"popup",value:i,viewProps:n.viewProps})}};class Ke{constructor(t=0,i=0,a=0){this.x=t,this.y=i,this.z=a}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(m(t))return!1;const i=t.x,a=t.y,d=t.z;return!(typeof i!="number"||typeof a!="number"||typeof d!="number")}static equals(t,i){return t.x===i.x&&t.y===i.y&&t.z===i.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Qs={toComponents:n=>n.getComponents(),fromComponents:n=>new Ke(...n)};function xu(n){return Ke.isObject(n)?new Ke(n.x,n.y,n.z):new Ke}function yu(n,t){n.writeProperty("x",t.x),n.writeProperty("y",t.y),n.writeProperty("z",t.z)}function lr(n){if(!n)return;const t=[];return m(n.step)||t.push(new ve(n.step)),(!m(n.max)||!m(n.min))&&t.push(new xt({max:n.max,min:n.min})),new _e(t)}function Cu(n){return new ie({assembly:Qs,components:[lr("x"in n?n.x:void 0),lr("y"in n?n.y:void 0),lr("z"in n?n.z:void 0)]})}function hr(n,t){return{baseStep:Be(t),constraint:t,textProps:L.fromObject({draggingScale:Fe(t,n),formatter:ft(rn(t,n))})}}const Pu={id:"input-point3d",type:"input",accept:(n,t)=>{if(!Ke.isObject(n))return null;const i=H,a=Y(t,{x:i.optional.custom(te),y:i.optional.custom(te),z:i.optional.custom(te)});return a?{initialValue:n,params:a}:null},binding:{reader:n=>xu,constraint:n=>Cu(n.params),equals:Ke.equals,writer:n=>yu},controller:n=>{const t=n.value,i=n.constraint;if(!(i instanceof ie))throw v.shouldNeverHappen();return new ar(n.document,{assembly:Qs,axes:[hr(t.rawValue.x,i.components[0]),hr(t.rawValue.y,i.components[1]),hr(t.rawValue.z,i.components[2])],parser:Yt,value:t,viewProps:n.viewProps})}};class He{constructor(t=0,i=0,a=0,d=0){this.x=t,this.y=i,this.z=a,this.w=d}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(m(t))return!1;const i=t.x,a=t.y,d=t.z,_=t.w;return!(typeof i!="number"||typeof a!="number"||typeof d!="number"||typeof _!="number")}static equals(t,i){return t.x===i.x&&t.y===i.y&&t.z===i.z&&t.w===i.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Js={toComponents:n=>n.getComponents(),fromComponents:n=>new He(...n)};function Eu(n){return He.isObject(n)?new He(n.x,n.y,n.z,n.w):new He}function Su(n,t){n.writeProperty("x",t.x),n.writeProperty("y",t.y),n.writeProperty("z",t.z),n.writeProperty("w",t.w)}function dn(n){if(!n)return;const t=[];return m(n.step)||t.push(new ve(n.step)),(!m(n.max)||!m(n.min))&&t.push(new xt({max:n.max,min:n.min})),new _e(t)}function ku(n){return new ie({assembly:Js,components:[dn("x"in n?n.x:void 0),dn("y"in n?n.y:void 0),dn("z"in n?n.z:void 0),dn("w"in n?n.w:void 0)]})}function Tu(n,t){return{baseStep:Be(t),constraint:t,textProps:L.fromObject({draggingScale:Fe(t,n),formatter:ft(rn(t,n))})}}const Mu={id:"input-point4d",type:"input",accept:(n,t)=>{if(!He.isObject(n))return null;const i=H,a=Y(t,{x:i.optional.custom(te),y:i.optional.custom(te),z:i.optional.custom(te),w:i.optional.custom(te)});return a?{initialValue:n,params:a}:null},binding:{reader:n=>Eu,constraint:n=>ku(n.params),equals:He.equals,writer:n=>Su},controller:n=>{const t=n.value,i=n.constraint;if(!(i instanceof ie))throw v.shouldNeverHappen();return new ar(n.document,{assembly:Js,axes:t.rawValue.getComponents().map((a,d)=>Tu(a,i.components[d])),parser:Yt,value:t,viewProps:n.viewProps})}};function Au(n){const t=[],i=Wn(n.options);return i&&t.push(i),new _e(t)}const Du={id:"input-string",type:"input",accept:(n,t)=>{if(typeof n!="string")return null;const a=Y(t,{options:H.optional.custom(nn)});return a?{initialValue:n,params:a}:null},binding:{reader:n=>Vs,constraint:n=>Au(n.params),writer:n=>Ei},controller:n=>{var t;const i=n.document,a=n.value,d=n.constraint;return d&&Ft(d,bi)?new gi(i,{props:L.fromObject({options:(t=Zn(d))!==null&&t!==void 0?t:[]}),value:a,viewProps:n.viewProps}):new tn(i,{parser:_=>_,props:L.fromObject({formatter:Hn}),value:a,viewProps:n.viewProps})}},ki={monitor:{defaultInterval:200,defaultLineCount:3}},to=P("mll");class Ou{constructor(t,i){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=i.formatter,this.element=t.createElement("div"),this.element.classList.add(to()),i.viewProps.bindClassModifiers(this.element);const a=t.createElement("textarea");a.classList.add(to("i")),a.style.height=`calc(var(--bld-us) * ${i.lineCount})`,a.readOnly=!0,i.viewProps.bindDisabled(a),this.element.appendChild(a),this.textareaElem_=a,i.value.emitter.on("change",this.onValueUpdate_),this.value=i.value,this.update_()}update_(){const t=this.textareaElem_,i=t.scrollTop===t.scrollHeight-t.clientHeight,a=[];this.value.rawValue.forEach(d=>{d!==void 0&&a.push(this.formatter_(d))}),t.textContent=a.join(`
`),i&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class ur{constructor(t,i){this.value=i.value,this.viewProps=i.viewProps,this.view=new Ou(t,{formatter:i.formatter,lineCount:i.lineCount,value:this.value,viewProps:this.viewProps})}}const eo=P("sgl");class Vu{constructor(t,i){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=i.formatter,this.element=t.createElement("div"),this.element.classList.add(eo()),i.viewProps.bindClassModifiers(this.element);const a=t.createElement("input");a.classList.add(eo("i")),a.readOnly=!0,a.type="text",i.viewProps.bindDisabled(a),this.element.appendChild(a),this.inputElement=a,i.value.emitter.on("change",this.onValueUpdate_),this.value=i.value,this.update_()}update_(){const t=this.value.rawValue,i=t[t.length-1];this.inputElement.value=i!==void 0?this.formatter_(i):""}onValueUpdate_(){this.update_()}}class dr{constructor(t,i){this.value=i.value,this.viewProps=i.viewProps,this.view=new Vu(t,{formatter:i.formatter,value:this.value,viewProps:this.viewProps})}}const Lu={id:"monitor-bool",type:"monitor",accept:(n,t)=>{if(typeof n!="boolean")return null;const a=Y(t,{lineCount:H.optional.number});return a?{initialValue:n,params:a}:null},binding:{reader:n=>ks},controller:n=>{var t;return n.value.rawValue.length===1?new dr(n.document,{formatter:Ts,value:n.value,viewProps:n.viewProps}):new ur(n.document,{formatter:Ts,lineCount:(t=n.params.lineCount)!==null&&t!==void 0?t:ki.monitor.defaultLineCount,value:n.value,viewProps:n.viewProps})}};class Ru{constructor(){this.emitter=new y,this.index_=-1}get index(){return this.index_}set index(t){this.index_!==t&&(this.index_=t,this.emitter.emit("change",{index:t,sender:this}))}}const se=P("grl");class Nu{constructor(t,i){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(se()),i.viewProps.bindClassModifiers(this.element),this.formatter_=i.formatter,this.minValue_=i.minValue,this.maxValue_=i.maxValue,this.cursor_=i.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const a=t.createElementNS(It,"svg");a.classList.add(se("g")),a.style.height=`calc(var(--bld-us) * ${i.lineCount})`,this.element.appendChild(a),this.svgElem_=a;const d=t.createElementNS(It,"polyline");this.svgElem_.appendChild(d),this.lineElem_=d;const _=t.createElement("div");_.classList.add(se("t"),P("tt")()),this.element.appendChild(_),this.tooltipElem_=_,i.value.emitter.on("change",this.onValueUpdate_),this.value=i.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const t=this.svgElem_.getBoundingClientRect(),i=this.value.rawValue.length-1,a=this.minValue_,d=this.maxValue_,_=[];this.value.rawValue.forEach((z,j)=>{if(z===void 0)return;const xe=Z(j,0,i,0,t.width),Ti=Z(z,a,d,t.height,0);_.push([xe,Ti].join(","))}),this.lineElem_.setAttributeNS(null,"points",_.join(" "));const x=this.tooltipElem_,A=this.value.rawValue[this.cursor_.index];if(A===void 0){x.classList.remove(se("t","a"));return}const R=Z(this.cursor_.index,0,i,0,t.width),N=Z(A,a,d,t.height,0);x.style.left=`${R}px`,x.style.top=`${N}px`,x.textContent=`${this.formatter_(A)}`,x.classList.contains(se("t","a"))||(x.classList.add(se("t","a"),se("t","in")),Xi(x),x.classList.remove(se("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Iu{constructor(t,i){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.value=i.value,this.viewProps=i.viewProps,this.cursor_=new Ru,this.view=new Nu(t,{cursor:this.cursor_,formatter:i.formatter,lineCount:i.lineCount,maxValue:i.maxValue,minValue:i.minValue,value:this.value,viewProps:this.viewProps}),!Dn(t))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const a=new be(this.view.element);a.emitter.on("down",this.onGraphPointerDown_),a.emitter.on("move",this.onGraphPointerMove_),a.emitter.on("up",this.onGraphPointerUp_)}}onGraphMouseLeave_(){this.cursor_.index=-1}onGraphMouseMove_(t){const i=this.view.element.getBoundingClientRect();this.cursor_.index=Math.floor(Z(t.offsetX,0,i.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){if(!t.data.point){this.cursor_.index=-1;return}this.cursor_.index=Math.floor(Z(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.index=-1}}function cr(n){return"format"in n&&!m(n.format)?n.format:ft(2)}function Bu(n){var t;return n.value.rawValue.length===1?new dr(n.document,{formatter:cr(n.params),value:n.value,viewProps:n.viewProps}):new ur(n.document,{formatter:cr(n.params),lineCount:(t=n.params.lineCount)!==null&&t!==void 0?t:ki.monitor.defaultLineCount,value:n.value,viewProps:n.viewProps})}function Fu(n){var t,i,a;return new Iu(n.document,{formatter:cr(n.params),lineCount:(t=n.params.lineCount)!==null&&t!==void 0?t:ki.monitor.defaultLineCount,maxValue:(i="max"in n.params?n.params.max:null)!==null&&i!==void 0?i:100,minValue:(a="min"in n.params?n.params.min:null)!==null&&a!==void 0?a:0,value:n.value,viewProps:n.viewProps})}function io(n){return"view"in n&&n.view==="graph"}const Uu={id:"monitor-number",type:"monitor",accept:(n,t)=>{if(typeof n!="number")return null;const i=H,a=Y(t,{format:i.optional.function,lineCount:i.optional.number,max:i.optional.number,min:i.optional.number,view:i.optional.string});return a?{initialValue:n,params:a}:null},binding:{defaultBufferSize:n=>io(n)?64:1,reader:n=>Os},controller:n=>io(n.params)?Fu(n):Bu(n)},zu={id:"monitor-string",type:"monitor",accept:(n,t)=>{if(typeof n!="string")return null;const i=H,a=Y(t,{lineCount:i.optional.number,multiline:i.optional.boolean});return a?{initialValue:n,params:a}:null},binding:{reader:n=>Vs},controller:n=>{var t;const i=n.value;return i.rawValue.length>1||"multiline"in n.params&&n.params.multiline?new ur(n.document,{formatter:Hn,lineCount:(t=n.params.lineCount)!==null&&t!==void 0?t:ki.monitor.defaultLineCount,value:i,viewProps:n.viewProps}):new dr(n.document,{formatter:Hn,value:i,viewProps:n.viewProps})}};class ju{constructor(t){this.onValueChange_=this.onValueChange_.bind(this),this.reader=t.reader,this.writer=t.writer,this.emitter=new y,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}read(){const t=this.target.read();t!==void 0&&(this.value.rawValue=this.reader(t))}write_(t){this.writer(this.target,t)}onValueChange_(t){this.write_(t.rawValue),this.emitter.emit("change",{options:t.options,rawValue:t.rawValue,sender:this})}}function Ku(n,t){const i=n.accept(t.target.read(),t.params);if(m(i))return null;const a=H,d={target:t.target,initialValue:i.initialValue,params:i.params},_=n.binding.reader(d),x=n.binding.constraint?n.binding.constraint(d):void 0,A=F(_(i.initialValue),{constraint:x,equals:n.binding.equals}),R=new ju({reader:_,target:t.target,value:A,writer:n.binding.writer(d)}),N=a.optional.boolean(t.params.disabled).value,z=a.optional.boolean(t.params.hidden).value,j=n.controller({constraint:x,document:t.document,initialValue:i.initialValue,params:i.params,value:R.value,viewProps:Jt.create({disabled:N,hidden:z})}),xe=a.optional.string(t.params.label).value;return new Bt(t.document,{binding:R,blade:pi(),props:L.fromObject({label:xe||t.target.key}),valueController:j})}class Hu{constructor(t){this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.emitter=new y,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const t=this.target.read();if(t===void 0)return;const i=this.value.rawValue,a=this.reader_(t);this.value.rawValue=Jl(i,a),this.emitter.emit("update",{rawValue:a,sender:this})}onTick_(t){this.read()}}function Yu(n,t){return t===0?new vl:new bl(n,t??ki.monitor.defaultInterval)}function qu(n,t){var i,a,d;const _=H,x=n.accept(t.target.read(),t.params);if(m(x))return null;const A={target:t.target,initialValue:x.initialValue,params:x.params},R=n.binding.reader(A),N=(a=(i=_.optional.number(t.params.bufferSize).value)!==null&&i!==void 0?i:n.binding.defaultBufferSize&&n.binding.defaultBufferSize(x.params))!==null&&a!==void 0?a:1,z=_.optional.number(t.params.interval).value,j=new Hu({reader:R,target:t.target,ticker:Yu(t.document,z),value:Zl(N)}),xe=_.optional.boolean(t.params.disabled).value,Ti=_.optional.boolean(t.params.hidden).value,Mi=n.controller({document:t.document,params:x.params,value:j.value,viewProps:Jt.create({disabled:xe,hidden:Ti})}),Ye=(d=_.optional.string(t.params.label).value)!==null&&d!==void 0?d:t.target.key;return new Qt(t.document,{binding:j,blade:pi(),props:L.fromObject({label:Ye}),valueController:Mi})}class Gu{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t){t.type==="blade"?this.pluginsMap_.blades.unshift(t):t.type==="input"?this.pluginsMap_.inputs.unshift(t):t.type==="monitor"&&this.pluginsMap_.monitors.unshift(t)}createInput(t,i,a){const d=i.read();if(m(d))throw new v({context:{key:i.key},type:"nomatchingcontroller"});const _=this.pluginsMap_.inputs.reduce((x,A)=>x||Ku(A,{document:t,target:i,params:a}),null);if(_)return _;throw new v({context:{key:i.key},type:"nomatchingcontroller"})}createMonitor(t,i,a){const d=this.pluginsMap_.monitors.reduce((_,x)=>_||qu(x,{document:t,params:a,target:i}),null);if(d)return d;throw new v({context:{key:i.key},type:"nomatchingcontroller"})}createBlade(t,i){const a=this.pluginsMap_.blades.reduce((d,_)=>d||_l(_,{document:t,params:i}),null);if(!a)throw new v({type:"nomatchingview",context:{params:i}});return a}createBladeApi(t){if(t instanceof Bt)return new Rn(t);if(t instanceof Qt)return new Nn(t);if(t instanceof _i)return new Qi(t,this);const i=this.pluginsMap_.blades.reduce((a,d)=>a||d.api({controller:t,pool:this}),null);if(!i)throw v.shouldNeverHappen();return i}}function $u(){const n=new Gu;return[wu,Pu,Mu,Du,uu,iu,eu,Jh,hh,Lu,zu,Uu,Xa,hl,dl,Cs].forEach(t=>{n.register(t)}),n}class no extends o{constructor(t){super(t),this.emitter_=new y,this.controller_.valueController.value.emitter.on("change",i=>{this.emitter_.emit("change",{event:new h(this,i.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get options(){return this.controller_.valueController.props.get("options")}set options(t){this.controller_.valueController.props.set("options",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,i){const a=i.bind(this);return this.emitter_.on(t,d=>{a(d.event)}),this}}class ro extends o{constructor(t){super(t),this.emitter_=new y,this.controller_.valueController.value.emitter.on("change",i=>{this.emitter_.emit("change",{event:new h(this,i.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(t){this.controller_.valueController.sliderController.props.set("maxValue",t)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(t){this.controller_.valueController.sliderController.props.set("minValue",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,i){const a=i.bind(this);return this.emitter_.on(t,d=>{a(d.event)}),this}}class so extends o{constructor(t){super(t),this.emitter_=new y,this.controller_.valueController.value.emitter.on("change",i=>{this.emitter_.emit("change",{event:new h(this,i.rawValue)})})}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(t){this.controller_.valueController.props.set("formatter",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,i){const a=i.bind(this);return this.emitter_.on(t,d=>{a(d.event)}),this}}const Xu=(function(){return{id:"list",type:"blade",accept(n){const t=H,i=Y(n,{options:t.required.custom(nn),value:t.required.raw,view:t.required.constant("list"),label:t.optional.string});return i?{params:i}:null},controller(n){const t=new gi(n.document,{props:L.fromObject({options:Bs(n.params.options)}),value:F(n.params.value),viewProps:n.viewProps});return new Ie(n.document,{blade:n.blade,props:L.fromObject({label:n.params.label}),valueController:t})},api(n){return!(n.controller instanceof Ie)||!(n.controller.valueController instanceof gi)?null:new no(n.controller)}}})();function Wu(n){return n.reduce((t,i)=>Object.assign(t,{[i.presetKey]:i.read()}),{})}function Zu(n,t){n.forEach(i=>{const a=t[i.presetKey];a!==void 0&&i.write(a)})}class Qu extends In{constructor(t,i){super(t,i)}get element(){return this.controller_.view.element}importPreset(t){const i=this.controller_.rackController.rack.find(Bt).map(a=>a.binding.target);Zu(i,t),this.refresh()}exportPreset(){const t=this.controller_.rackController.rack.find(Bt).map(i=>i.binding.target);return Wu(t)}refresh(){this.controller_.rackController.rack.find(Bt).forEach(t=>{t.binding.read()}),this.controller_.rackController.rack.find(Qt).forEach(t=>{t.binding.read()})}}class Ju extends Un{constructor(t,i){super(t,{expanded:i.expanded,blade:i.blade,props:i.props,root:!0,viewProps:i.viewProps})}}const td={id:"slider",type:"blade",accept(n){const t=H,i=Y(n,{max:t.required.number,min:t.required.number,view:t.required.constant("slider"),format:t.optional.function,label:t.optional.string,value:t.optional.number});return i?{params:i}:null},controller(n){var t,i;const a=(t=n.params.value)!==null&&t!==void 0?t:0,d=new Xn(n.document,{baseStep:1,parser:Yt,sliderProps:L.fromObject({maxValue:n.params.max,minValue:n.params.min}),textProps:L.fromObject({draggingScale:Fe(void 0,a),formatter:(i=n.params.format)!==null&&i!==void 0?i:Xl}),value:F(a),viewProps:n.viewProps});return new Ie(n.document,{blade:n.blade,props:L.fromObject({label:n.params.label}),valueController:d})},api(n){return!(n.controller instanceof Ie)||!(n.controller.valueController instanceof Xn)?null:new ro(n.controller)}},ed=(function(){return{id:"text",type:"blade",accept(n){const t=H,i=Y(n,{parse:t.required.function,value:t.required.raw,view:t.required.constant("text"),format:t.optional.function,label:t.optional.string});return i?{params:i}:null},controller(n){var t;const i=new tn(n.document,{parser:n.params.parse,props:L.fromObject({formatter:(t=n.params.format)!==null&&t!==void 0?t:(a=>String(a))}),value:F(n.params.value),viewProps:n.viewProps});return new Ie(n.document,{blade:n.blade,props:L.fromObject({label:n.params.label}),valueController:i})},api(n){return!(n.controller instanceof Ie)||!(n.controller.valueController instanceof tn)?null:new so(n.controller)}}})();function id(n){const t=n.createElement("div");return t.classList.add(P("dfw")()),n.body&&n.body.appendChild(t),t}function oo(n,t,i){if(n.querySelector(`style[data-tp-style=${t}]`))return;const a=n.createElement("style");a.dataset.tpStyle=t,a.textContent=i,n.head.appendChild(a)}class nd extends Qu{constructor(t){var i;const a=t||{},d=(i=a.document)!==null&&i!==void 0?i:Ha(),_=$u(),x=new Ju(d,{expanded:a.expanded,blade:pi(),props:L.fromObject({title:a.title}),viewProps:Jt.create()});super(x,_),this.pool_=_,this.containerElem_=a.container||id(d),this.containerElem_.appendChild(this.element),this.doc_=d,this.usesDefaultWrapper_=!a.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw v.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw v.alreadyDisposed();if(this.usesDefaultWrapper_){const i=t.parentElement;i&&i.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach(a=>{this.pool_.register(a),this.embedPluginStyle_(a)})}embedPluginStyle_(t){t.css&&oo(this.document,`plugin-${t.id}`,t.css)}setUpDefaultPlugins_(){oo(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor transparent;scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:transparent}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:transparent solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #28292e);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #28292e);--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i,.tp-fldv_c>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach(t=>{this.embedPluginStyle_(t)}),this.registerPlugin({plugins:[td,Xu,Cs,ed]})}}const rd=new s("3.0.8");r.BladeApi=o,r.ButtonApi=b,r.FolderApi=In,r.InputBindingApi=Rn,r.ListApi=no,r.MonitorBindingApi=Nn,r.Pane=nd,r.SeparatorApi=ms,r.SliderApi=ro,r.TabApi=xs,r.TabPageApi=ws,r.TextApi=so,r.TpChangeEvent=h,r.VERSION=rd,Object.defineProperty(r,"__esModule",{value:!0})}))})(Li,Li.exports)),Li.exports}var Qc=Zc();const wn={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class $i{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Jc=new sd(-1,1,1,-1,0,1);class tp extends Uo{constructor(){super(),this.setAttribute("position",new ao([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new ao([0,2,0,0,2,0],2))}}const ep=new tp;class Ba{constructor(e){this._mesh=new Fo(ep,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Jc)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class ip extends $i{constructor(e,r="tDiffuse"){super(),this.textureID=r,this.uniforms=null,this.material=null,e instanceof Xe?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Ar.clone(e.uniforms),this.material=new Xe({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this._fsQuad=new Ba(this.material)}render(e,r,s){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=s.texture),this._fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this._fsQuad.render(e))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}class To extends $i{constructor(e,r){super(),this.scene=e,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,r,s){const o=e.getContext(),l=e.state;l.buffers.color.setMask(!1),l.buffers.depth.setMask(!1),l.buffers.color.setLocked(!0),l.buffers.depth.setLocked(!0);let h,u;this.inverse?(h=0,u=1):(h=1,u=0),l.buffers.stencil.setTest(!0),l.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),l.buffers.stencil.setFunc(o.ALWAYS,h,4294967295),l.buffers.stencil.setClear(u),l.buffers.stencil.setLocked(!0),e.setRenderTarget(s),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),l.buffers.color.setLocked(!1),l.buffers.depth.setLocked(!1),l.buffers.color.setMask(!0),l.buffers.depth.setMask(!0),l.buffers.stencil.setLocked(!1),l.buffers.stencil.setFunc(o.EQUAL,1,4294967295),l.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),l.buffers.stencil.setLocked(!0)}}class np extends $i{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class rp{constructor(e,r){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),r===void 0){const s=e.getSize(new et);this._width=s.width,this._height=s.height,r=new _n(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:vn}),r.texture.name="EffectComposer.rt1"}else this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new ip(wn),this.copyPass.material.blending=od,this.clock=new ad}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,r){this.passes.splice(r,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const r=this.passes.indexOf(e);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(e){for(let r=e+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const r=this.renderer.getRenderTarget();let s=!1;for(let o=0,l=this.passes.length;o<l;o++){const h=this.passes[o];if(h.enabled!==!1){if(h.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),h.render(this.renderer,this.writeBuffer,this.readBuffer,e,s),h.needsSwap){if(s){const u=this.renderer.getContext(),p=this.renderer.state.buffers.stencil;p.setFunc(u.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),p.setFunc(u.EQUAL,1,4294967295)}this.swapBuffers()}To!==void 0&&(h instanceof To?s=!0:h instanceof np&&(s=!1))}}this.renderer.setRenderTarget(r)}reset(e){if(e===void 0){const r=this.renderer.getSize(new et);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,r){this._width=e,this._height=r;const s=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(s,o),this.renderTarget2.setSize(s,o);for(let l=0;l<this.passes.length;l++)this.passes[l].setSize(s,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class sp extends $i{constructor(e,r,s=null,o=null,l=null){super(),this.scene=e,this.camera=r,this.overrideMaterial=s,this.clearColor=o,this.clearAlpha=l,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new ni}render(e,r,s){const o=e.autoClear;e.autoClear=!1;let l,h;this.overrideMaterial!==null&&(h=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(l=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:s),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(l),this.overrideMaterial!==null&&(this.scene.overrideMaterial=h),e.autoClear=o}}const op={uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new ni(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			float v = luminance( texel.xyz );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class hi extends $i{constructor(e,r=1,s,o){super(),this.strength=r,this.radius=s,this.threshold=o,this.resolution=e!==void 0?new et(e.x,e.y):new et(256,256),this.clearColor=new ni(0,0,0),this.needsSwap=!1,this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let l=Math.round(this.resolution.x/2),h=Math.round(this.resolution.y/2);this.renderTargetBright=new _n(l,h,{type:vn}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let m=0;m<this.nMips;m++){const g=new _n(l,h,{type:vn});g.texture.name="UnrealBloomPass.h"+m,g.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(g);const w=new _n(l,h,{type:vn});w.texture.name="UnrealBloomPass.v"+m,w.texture.generateMipmaps=!1,this.renderTargetsVertical.push(w),l=Math.round(l/2),h=Math.round(h/2)}const u=op;this.highPassUniforms=Ar.clone(u.uniforms),this.highPassUniforms.luminosityThreshold.value=o,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Xe({uniforms:this.highPassUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}),this.separableBlurMaterials=[];const p=[6,10,14,18,22];l=Math.round(this.resolution.x/2),h=Math.round(this.resolution.y/2);for(let m=0;m<this.nMips;m++)this.separableBlurMaterials.push(this._getSeparableBlurMaterial(p[m])),this.separableBlurMaterials[m].uniforms.invSize.value=new et(1/l,1/h),l=Math.round(l/2),h=Math.round(h/2);this.compositeMaterial=this._getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=r,this.compositeMaterial.uniforms.bloomRadius.value=.1;const f=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=f,this.bloomTintColors=[new pt(1,1,1),new pt(1,1,1),new pt(1,1,1),new pt(1,1,1),new pt(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,this.copyUniforms=Ar.clone(wn.uniforms),this.blendMaterial=new Xe({uniforms:this.copyUniforms,vertexShader:wn.vertexShader,fragmentShader:wn.fragmentShader,blending:ld,depthTest:!1,depthWrite:!1,transparent:!0}),this._oldClearColor=new ni,this._oldClearAlpha=1,this._basic=new hd,this._fsQuad=new Ba(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this._basic.dispose(),this._fsQuad.dispose()}setSize(e,r){let s=Math.round(e/2),o=Math.round(r/2);this.renderTargetBright.setSize(s,o);for(let l=0;l<this.nMips;l++)this.renderTargetsHorizontal[l].setSize(s,o),this.renderTargetsVertical[l].setSize(s,o),this.separableBlurMaterials[l].uniforms.invSize.value=new et(1/s,1/o),s=Math.round(s/2),o=Math.round(o/2)}render(e,r,s,o,l){e.getClearColor(this._oldClearColor),this._oldClearAlpha=e.getClearAlpha();const h=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),l&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this._fsQuad.material=this._basic,this._basic.map=s.texture,e.setRenderTarget(null),e.clear(),this._fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=s.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this._fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this._fsQuad.render(e);let u=this.renderTargetBright;for(let p=0;p<this.nMips;p++)this._fsQuad.material=this.separableBlurMaterials[p],this.separableBlurMaterials[p].uniforms.colorTexture.value=u.texture,this.separableBlurMaterials[p].uniforms.direction.value=hi.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[p]),e.clear(),this._fsQuad.render(e),this.separableBlurMaterials[p].uniforms.colorTexture.value=this.renderTargetsHorizontal[p].texture,this.separableBlurMaterials[p].uniforms.direction.value=hi.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[p]),e.clear(),this._fsQuad.render(e),u=this.renderTargetsVertical[p];this._fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this._fsQuad.render(e),this._fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,l&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this._fsQuad.render(e)):(e.setRenderTarget(s),this._fsQuad.render(e)),e.setClearColor(this._oldClearColor,this._oldClearAlpha),e.autoClear=h}_getSeparableBlurMaterial(e){const r=[],s=e/3;for(let o=0;o<e;o++)r.push(.39894*Math.exp(-.5*o*o/(s*s))/s);return new Xe({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new et(.5,.5)},direction:{value:new et(.5,.5)},gaussianCoefficients:{value:r}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 invSize;
				uniform vec2 direction;
				uniform float gaussianCoefficients[KERNEL_RADIUS];

				void main() {
					float weightSum = gaussianCoefficients[0];
					vec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianCoefficients[i];
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;
						diffuseSum += ( sample1 + sample2 ) * w;
					}
					gl_FragColor = vec4( diffuseSum, 1.0 );
				}`})}_getCompositeMaterial(e){return new Xe({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}hi.BlurDirectionX=new et(1,0);hi.BlurDirectionY=new et(0,1);const Mo={type:"change"},rs={type:"start"},Fa={type:"end"},pn=new dd,Ao=new cd,ap=Math.cos(70*pd.DEG2RAD),nt=new pt,_t=2*Math.PI,K={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},xr=1e-6;class lp extends ud{constructor(e,r=null){super(e,r),this.state=K.NONE,this.target=new pt,this.cursor=new pt,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Je.ROTATE,MIDDLE:Je.DOLLY,RIGHT:Je.PAN},this.touches={ONE:We.ROTATE,TWO:We.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new pt,this._lastQuaternion=new lo,this._lastTargetPosition=new pt,this._quat=new lo().setFromUnitVectors(e.up,new pt(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new ho,this._sphericalDelta=new ho,this._scale=1,this._panOffset=new pt,this._rotateStart=new et,this._rotateEnd=new et,this._rotateDelta=new et,this._panStart=new et,this._panEnd=new et,this._panDelta=new et,this._dollyStart=new et,this._dollyEnd=new et,this._dollyDelta=new et,this._dollyDirection=new pt,this._mouse=new et,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=up.bind(this),this._onPointerDown=hp.bind(this),this._onPointerUp=dp.bind(this),this._onContextMenu=bp.bind(this),this._onMouseWheel=fp.bind(this),this._onKeyDown=mp.bind(this),this._onTouchStart=_p.bind(this),this._onTouchMove=vp.bind(this),this._onMouseDown=cp.bind(this),this._onMouseMove=pp.bind(this),this._interceptControlDown=gp.bind(this),this._interceptControlUp=wp.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(Mo),this.update(),this.state=K.NONE}update(e=null){const r=this.object.position;nt.copy(r).sub(this.target),nt.applyQuaternion(this._quat),this._spherical.setFromVector3(nt),this.autoRotate&&this.state===K.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let s=this.minAzimuthAngle,o=this.maxAzimuthAngle;isFinite(s)&&isFinite(o)&&(s<-Math.PI?s+=_t:s>Math.PI&&(s-=_t),o<-Math.PI?o+=_t:o>Math.PI&&(o-=_t),s<=o?this._spherical.theta=Math.max(s,Math.min(o,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(s+o)/2?Math.max(s,this._spherical.theta):Math.min(o,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let l=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const h=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),l=h!=this._spherical.radius}if(nt.setFromSpherical(this._spherical),nt.applyQuaternion(this._quatInverse),r.copy(this.target).add(nt),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let h=null;if(this.object.isPerspectiveCamera){const u=nt.length();h=this._clampDistance(u*this._scale);const p=u-h;this.object.position.addScaledVector(this._dollyDirection,p),this.object.updateMatrixWorld(),l=!!p}else if(this.object.isOrthographicCamera){const u=new pt(this._mouse.x,this._mouse.y,0);u.unproject(this.object);const p=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),l=p!==this.object.zoom;const f=new pt(this._mouse.x,this._mouse.y,0);f.unproject(this.object),this.object.position.sub(f).add(u),this.object.updateMatrixWorld(),h=nt.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;h!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(h).add(this.object.position):(pn.origin.copy(this.object.position),pn.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(pn.direction))<ap?this.object.lookAt(this.target):(Ao.setFromNormalAndCoplanarPoint(this.object.up,this.target),pn.intersectPlane(Ao,this.target))))}else if(this.object.isOrthographicCamera){const h=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),h!==this.object.zoom&&(this.object.updateProjectionMatrix(),l=!0)}return this._scale=1,this._performCursorZoom=!1,l||this._lastPosition.distanceToSquared(this.object.position)>xr||8*(1-this._lastQuaternion.dot(this.object.quaternion))>xr||this._lastTargetPosition.distanceToSquared(this.target)>xr?(this.dispatchEvent(Mo),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?_t/60*this.autoRotateSpeed*e:_t/60/60*this.autoRotateSpeed}_getZoomScale(e){const r=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*r)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,r){nt.setFromMatrixColumn(r,0),nt.multiplyScalar(-e),this._panOffset.add(nt)}_panUp(e,r){this.screenSpacePanning===!0?nt.setFromMatrixColumn(r,1):(nt.setFromMatrixColumn(r,0),nt.crossVectors(this.object.up,nt)),nt.multiplyScalar(e),this._panOffset.add(nt)}_pan(e,r){const s=this.domElement;if(this.object.isPerspectiveCamera){const o=this.object.position;nt.copy(o).sub(this.target);let l=nt.length();l*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*l/s.clientHeight,this.object.matrix),this._panUp(2*r*l/s.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/s.clientWidth,this.object.matrix),this._panUp(r*(this.object.top-this.object.bottom)/this.object.zoom/s.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,r){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const s=this.domElement.getBoundingClientRect(),o=e-s.left,l=r-s.top,h=s.width,u=s.height;this._mouse.x=o/h*2-1,this._mouse.y=-(l/u)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(_t*this._rotateDelta.x/r.clientHeight),this._rotateUp(_t*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let r=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(_t*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),r=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-_t*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),r=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(_t*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),r=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-_t*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),r=!0;break}r&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),s=.5*(e.pageX+r.x),o=.5*(e.pageY+r.y);this._rotateStart.set(s,o)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),s=.5*(e.pageX+r.x),o=.5*(e.pageY+r.y);this._panStart.set(s,o)}}_handleTouchStartDolly(e){const r=this._getSecondPointerPosition(e),s=e.pageX-r.x,o=e.pageY-r.y,l=Math.sqrt(s*s+o*o);this._dollyStart.set(0,l)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const s=this._getSecondPointerPosition(e),o=.5*(e.pageX+s.x),l=.5*(e.pageY+s.y);this._rotateEnd.set(o,l)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(_t*this._rotateDelta.x/r.clientHeight),this._rotateUp(_t*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),s=.5*(e.pageX+r.x),o=.5*(e.pageY+r.y);this._panEnd.set(s,o)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const r=this._getSecondPointerPosition(e),s=e.pageX-r.x,o=e.pageY-r.y,l=Math.sqrt(s*s+o*o);this._dollyEnd.set(0,l),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const h=(e.pageX+r.x)*.5,u=(e.pageY+r.y)*.5;this._updateZoomParameters(h,u)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId){this._pointers.splice(r,1);return}}_isTrackingPointer(e){for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId)return!0;return!1}_trackPointer(e){let r=this._pointerPositions[e.pointerId];r===void 0&&(r=new et,this._pointerPositions[e.pointerId]=r),r.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const r=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[r]}_customWheelEvent(e){const r=e.deltaMode,s={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(r){case 1:s.deltaY*=16;break;case 2:s.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(s.deltaY*=10),s}}function hp(c){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(c.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(c)&&(this._addPointer(c),c.pointerType==="touch"?this._onTouchStart(c):this._onMouseDown(c)))}function up(c){this.enabled!==!1&&(c.pointerType==="touch"?this._onTouchMove(c):this._onMouseMove(c))}function dp(c){switch(this._removePointer(c),this._pointers.length){case 0:this.domElement.releasePointerCapture(c.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Fa),this.state=K.NONE;break;case 1:const e=this._pointers[0],r=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:r.x,pageY:r.y});break}}function cp(c){let e;switch(c.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Je.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(c),this.state=K.DOLLY;break;case Je.ROTATE:if(c.ctrlKey||c.metaKey||c.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(c),this.state=K.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(c),this.state=K.ROTATE}break;case Je.PAN:if(c.ctrlKey||c.metaKey||c.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(c),this.state=K.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(c),this.state=K.PAN}break;default:this.state=K.NONE}this.state!==K.NONE&&this.dispatchEvent(rs)}function pp(c){switch(this.state){case K.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(c);break;case K.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(c);break;case K.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(c);break}}function fp(c){this.enabled===!1||this.enableZoom===!1||this.state!==K.NONE||(c.preventDefault(),this.dispatchEvent(rs),this._handleMouseWheel(this._customWheelEvent(c)),this.dispatchEvent(Fa))}function mp(c){this.enabled!==!1&&this._handleKeyDown(c)}function _p(c){switch(this._trackPointer(c),this._pointers.length){case 1:switch(this.touches.ONE){case We.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(c),this.state=K.TOUCH_ROTATE;break;case We.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(c),this.state=K.TOUCH_PAN;break;default:this.state=K.NONE}break;case 2:switch(this.touches.TWO){case We.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(c),this.state=K.TOUCH_DOLLY_PAN;break;case We.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(c),this.state=K.TOUCH_DOLLY_ROTATE;break;default:this.state=K.NONE}break;default:this.state=K.NONE}this.state!==K.NONE&&this.dispatchEvent(rs)}function vp(c){switch(this._trackPointer(c),this.state){case K.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(c),this.update();break;case K.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(c),this.update();break;case K.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(c),this.update();break;case K.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(c),this.update();break;default:this.state=K.NONE}}function bp(c){this.enabled!==!1&&c.preventDefault()}function gp(c){c.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function wp(c){c.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var yr,Do;function xp(){return Do||(Do=1,yr={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}),yr}var Cr,Oo;function yp(){if(Oo)return Cr;Oo=1;function c(e,r,s){return e*(1-s)+r*s}return Cr=c,Cr}var Pr,Vo;function Cp(){if(Vo)return Pr;Vo=1;var c=xp(),e=yp();Pr=r;function r(h){var u,p,f,m,g,w,v,C,P,b,y;if(h||(h={}),C=(h.nshades||72)-1,v=h.format||"hex",w=h.colormap,w||(w="jet"),typeof w=="string"){if(w=w.toLowerCase(),!c[w])throw Error(w+" not a supported colorscale");g=c[w]}else if(Array.isArray(w))g=w.slice();else throw Error("unsupported colormap option",w);if(g.length>C+1)throw new Error(w+" map requires nshades to be at least size "+g.length);Array.isArray(h.alpha)?h.alpha.length!==2?b=[1,1]:b=h.alpha.slice():typeof h.alpha=="number"?b=[h.alpha,h.alpha]:b=[1,1],u=g.map(function(k){return Math.round(k.index*C)}),b[0]=Math.min(Math.max(b[0],0),1),b[1]=Math.min(Math.max(b[1],0),1);var E=g.map(function(k,T){var V=g[T].index,D=g[T].rgb.slice();return D.length===4&&D[3]>=0&&D[3]<=1||(D[3]=b[0]+(b[1]-b[0])*V),D}),P=[];for(y=0;y<u.length-1;++y){m=u[y+1]-u[y],p=E[y],f=E[y+1];for(var S=0;S<m;S++){var M=S/m;P.push([Math.round(e(p[0],f[0],M)),Math.round(e(p[1],f[1],M)),Math.round(e(p[2],f[2],M)),e(p[3],f[3],M)])}}return P.push(g[g.length-1].rgb.concat(b[1])),v==="hex"?P=P.map(o):v==="rgbaString"?P=P.map(l):v==="float"&&(P=P.map(s)),P}function s(h){return[h[0]/255,h[1]/255,h[2]/255,h[3]]}function o(h){for(var u,p="#",f=0;f<3;++f)u=h[f],u=u.toString(16),p+=("00"+u).substr(u.length);return p}function l(h){return"rgba("+h.join(",")+")"}return Pr}var Pp=Cp();const Ep=Bo(Pp),Lo=(c,e)=>Ep({colormap:c,nshades:e,format:"float",alpha:1}),Ro=(c,e,r)=>c*(1-r)+e*r,Sp=(c,e,r)=>kp((r-c)/(e-c)),kp=(c,e=0,r=1)=>Math.min(r,Math.max(e,c)),Tp=`
    precision highp float;
    precision highp int;
  
    uniform mat4 viewMatrix;
    uniform mat4 projectionMatrix;
    uniform mat4 modelMatrix;
   
    attribute vec3 position;
  
    uniform vec4 uColor;
  
    varying vec4 vColor;
  
    void main(){
      
      gl_Position = projectionMatrix * viewMatrix * // THREE.Camera
        modelMatrix * // THREE.Mesh
        vec4( position, 1.0 ); // from THREE.BufferGeometry
  
      vColor = uColor;
    }
  `,Mp=`
    precision highp float;
  
    varying vec4 vColor;
  
    void main(){
      gl_FragColor =vColor;
    }
  `;var Ap=fd();const Te=512,Dp=50,Op=-15,Vp=15,Lp=5,Rp=3,Np=50,Ip=(c,e)=>{let r=[];for(let s=0;s<c;s++)r.push(Array(e).fill(0));return r},Bp=c=>{const{perceptualSpread:e,perceptualSharpness:r,spectralFlatness:s,loudness:o}=c;return{loudness:Sp(Rp,Np,o.total),perceptualSharpness:r,perceptualSpread:e,spectralFlatness:s}},Fp={audio:{channelCount:{ideal:2,min:1},echoCancellation:!0,autoGainControl:!0,noiseSuppression:!0}};class Up{meydaPromise({constrains:e=Fp,bufferSize:r=Te}){return!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia?Promise.reject(new Error("getUserMedia is not supported in this browser. Please use a modern browser with Web Audio API support.")):navigator.mediaDevices.getUserMedia(e).then(s=>this.successStream({stream:s,bufferSize:r})).catch(s=>this.errorStream(s))}successStream({stream:e,bufferSize:r}){this.audioContext=new AudioContext;const s=e.getAudioTracks()[0];return s&&(this.streamAudioSettings=s.getSettings()),this.source=this.audioContext.createMediaStreamSource(e),this.meyda=Ap.createMeydaAnalyzer({audioContext:this.audioContext,source:this.source,bufferSize:r}),this.meyda.start(),e}errorStream(e){e.name==="NotAllowedError"?console.error("AudioFeaturesExtractor: Microphone access denied by user"):e.name==="NotFoundError"?console.error("AudioFeaturesExtractor: No microphone device found"):e.name==="NotSupportedError"?console.error("AudioFeaturesExtractor: getUserMedia not supported in this browser"):console.error("AudioFeaturesExtractor:",e.message||e)}features(e=["amplitudeSpectrum","spectralCentroid","spectralRolloff","perceptualSharpness","loudness","rms","chroma","mfcc"]){return!this.meyda||!this.audioContext?null:this.meyda.get(e)}signal(){return this.meyda?this.meyda._m.signal:null}}function zp(c){return md(c,"click").pipe(_d(250),vd())}const Bi=Math.min(1.2,window.devicePixelRatio);function jp({renderer:c,composer:e}){const r=c.domElement,s=r.clientWidth*Bi|0,o=r.clientHeight*Bi|0,l=r.width!==s||r.height!==o;return l&&(c.setSize(s,o,!1),e.setSize(s,o)),l}const Kp=75,Hp=4/3,Yp=5,qp=1e4,Gp=25,$p=7,Xp=.05,Wp=1,Zp=Math.PI/2;function Qp(){return new bd(Kp,Hp,Yp,qp)}function Jp(c,e){const r=new lp(c,e);return r.enableDamping=!0,r.enablePan=!1,r.maxDistance=Gp,r.minDistance=$p,r.dampingFactor=Xp,r.minAzimuthAngle=-Math.PI,r.maxAzimuthAngle=Math.PI,r.minPolarAngle=Wp,r.maxPolarAngle=Zp,r}const tf=-5,ef=10,No=16777215,nf=.75,rf=1,sf=1,of=0,af=1.75,lf=1,hf=1.25,uf=1.5,df=1,cf=3,pf=30,ff=15,mf=.001,Er=.5,_f=-8,Io="picnic",Sr=new Up,vf=document.querySelector("#cover"),fn=document.querySelector("#canvas"),Ua=new Xc;document.querySelector("#stats").appendChild(Ua.dom);let Tt,kr,Ge,Pe,Di,Ee,Tr,Lt,mn,$e,Mr;const Fi={amount:4,xscale:50},Ve={loudness:0,perceptualSharpness:0,perceptualSpread:0,spectralFlatness:0},ui=new Qc.Pane({title:"controls",expanded:!0});ui.addInput(Fi,"amount",{min:1,max:6});ui.addInput(Fi,"xscale",{min:20,max:100});ui.addMonitor(Ve,"loudness",{view:"graph",min:0,max:1});ui.addMonitor(Ve,"perceptualSpread",{view:"graph",min:0,max:1});ui.addMonitor(Ve,"perceptualSharpness",{view:"graph",min:0,max:1});ui.addMonitor(Ve,"spectralFlatness",{view:"graph",min:0,max:1});class bf{init(){this.scene=new gd,Pe=Qp(),Pe.position.set(0,tf,ef),Pe.lookAt(0,0,0),Ge=new wd({canvas:fn,antialias:!0,alpha:!0,powerPreference:"high-performance"}),Ge.setPixelRatio(Bi),Tr=Jp(Pe,fn),Tr.update();const e=new xd(No,nf);e.position.set(0,rf,sf),this.scene.add(e);const r=new sp(this.scene,Pe);let s=fn.clientWidth*Bi,o=fn.clientHeight*Bi,l=new et(s,o);Ee=new hi(l,0,0,0),Ee.threshold=of,Ee.strength=af,Ee.radius=uf,Di=new rp(Ge),Di.addPass(r),Di.addPass(Ee),Tt=Ip(Dp,Te),$e=new yd,Mr=new ni,Lt=new Cd(new Pd(1),new Ed({color:No}),Te),Lt.instanceMatrix.setUsage(Sd),Lt.position.set(_f,0,0),Lt.scale.set(1,1,1);let h=Lo(Io,Tt.length);kr=Lo(Io,Te).map(u=>new ni().fromArray(u)),kr.forEach((u,p)=>Lt.setColorAt(p,u)),this.scene.add(Lt),mn=new kd;for(let u=0;u<Tt.length;u++)if(Tt[u]){const p=new Uo;p.setAttribute("position",new Td(new Float32Array(Tt[u].length*3),3)),p.setDrawRange(0,Tt[u].length),p.computeBoundingSphere();const f=new Md({uniforms:{uColor:{value:h[Tt.length-u-1]}},vertexShader:Tp,fragmentShader:Mp,transparent:!0,side:Ad}),m=new Fo(p,f);m.frustumCulled=!1,mn.add(m)}this.scene.add(mn),Ge.setAnimationLoop(this.render.bind(this))}intro(){jr.timeline().to("#cover",{duration:1,autoAlpha:0,ease:"power2.out"}).to("#cover",{duration:1,delay:1,autoAlpha:0,ease:"power2.out"}),console.log("intro")}render(e){if(jp({renderer:Ge,composer:Di})){const{clientWidth:p,clientHeight:f}=Ge.domElement;Pe.aspect=p/f,Pe.updateProjectionMatrix()}const r=Sr.features(["perceptualSharpness","perceptualSpread","spectralFlatness","amplitudeSpectrum","loudness"]);if(!r)return;const{amplitudeSpectrum:s}=r;Tt.pop(),Tt.unshift(s),Object.assign(Ve,Bp(r));const{loudness:o,perceptualSharpness:l,perceptualSpread:h}=Ve;Ee.strength=Ro(lf,hf,o),Ee.radius=Ro(df,cf,l);for(let p=0;p<Tt.length;p++){const f=mn.children[p].geometry.getAttribute("position");for(let m=0;m<f.count*3;m++){const g=m*3;f.array[g+0]=Fi.xscale+Fi.xscale*Math.log10(m/Tt[p].length),f.array[g+1]=Op+Ve.perceptualSharpness+Tt[p][m]*(Fi.amount*o),f.array[g+2]=Vp-p*(Lp*h)}f.needsUpdate=!0}const u=Sr.signal();if(u&&Lt){for(let p=0;p<Te;p++)$e.position.set(ff*p/Te,u[p]*pf,0),$e.rotation.set((e+o)*mf,0,o),$e.scale.set(o*Er,l*Er,h*Er),$e.updateMatrix(),Mr.set(kr[p]),Lt.setColorAt(p,Mr),Lt.setMatrixAt(p,$e.matrix);Lt.instanceMatrix.needsUpdate=!0,Lt.instanceColor.needsUpdate=!0}Tr.update(),Di.render(),Ua.update()}run$(){return jr.timeline().to("#cover",{duration:2,autoAlpha:1,ease:"expo.inOut"}),Dd(Od([zp(vf),Vd(Sr.meydaPromise({fftSize:Te}))]).pipe(Ld({count:2,delay:1e3}),Rd(()=>{this.init(),this.intro()}))).pipe(Nd(e=>(console.error("Error:",e),Id))).subscribe()}}document.addEventListener("DOMContentLoaded",()=>{new bf().run$()});
