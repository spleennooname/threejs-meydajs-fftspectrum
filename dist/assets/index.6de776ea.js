import{c as t,O as e,B as n,F as i,M as r,S as s,U as o,V as a,W as l,H as h,N as d,C as p,a as u,b as c,A as v,d as m,R as f,P as g,E as b,e as _,T as w,Q as x,f as y,g as C,m as P,h as E,i as k,s as M,j as T,k as S,w as V,l as A,n as L,o as D,p as O,q as R,D as j,r as U,I as B,t as z,u as I,v as N,G as F,x as K,y as H,z as Y,J as q,K as $,L as X,X as G,Y as Q,Z,_ as W}from"./vendor.4305f282.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();function J(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}
/*!
 * GSAP 3.10.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var et,nt,it,rt,st,ot,at,lt,ht,dt,pt,ut,ct,vt,mt,ft,gt,bt,_t,wt,xt,yt,Ct,Pt,Et,kt,Mt,Tt,St={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Vt={duration:.5,overwrite:!1,delay:0},At=2*Math.PI,Lt=At/4,Dt=0,Ot=Math.sqrt,Rt=Math.cos,jt=Math.sin,Ut=function(t){return"string"==typeof t},Bt=function(t){return"function"==typeof t},zt=function(t){return"number"==typeof t},It=function(t){return void 0===t},Nt=function(t){return"object"==typeof t},Ft=function(t){return!1!==t},Kt=function(){return"undefined"!=typeof window},Ht=function(t){return Bt(t)||Ut(t)},Yt="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},qt=Array.isArray,$t=/(?:-?\.?\d|\.)+/gi,Xt=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Gt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Qt=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Zt=/[+-]=-?[.\d]+/,Wt=/[^,'"\[\]\s]+/gi,Jt=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,te={},ee={},ne=function(t){return(ee=Me(t,te))&&fi},ie=function(t,e){return!e&&void 0},re=function(t,e){return t&&(te[t]=e)&&ee&&(ee[t]=e)||te},se=function(){return 0},oe={},ae=[],le={},he={},de={},pe=30,ue=[],ce="",ve=function(t){var e,n,i=t[0];if(Nt(i)||Bt(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(n=ue.length;n--&&!ue[n].targetTest(i););e=ue[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new zn(t[n],e)))||t.splice(n,1);return t},me=function(t){return t._gsap||ve(sn(t))[0]._gsap},fe=function(t,e,n){return(n=t[e])&&Bt(n)?t[e]():It(n)&&t.getAttribute&&t.getAttribute(e)||n},ge=function(t,e){return(t=t.split(",")).forEach(e)||t},be=function(t){return Math.round(1e5*t)/1e5||0},_e=function(t){return Math.round(1e7*t)/1e7||0},we=function(t,e){var n=e.charAt(0),i=parseFloat(e.substr(2));return t=parseFloat(t),"+"===n?t+i:"-"===n?t-i:"*"===n?t*i:t/i},xe=function(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n},ye=function(){var t,e,n=ae.length,i=ae.slice(0);for(le={},ae.length=0,t=0;t<n;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Ce=function(t,e,n,i){ae.length&&ye(),t.render(e,n,i),ae.length&&ye()},Pe=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(Wt).length<2?e:Ut(t)?t.trim():t},Ee=function(t){return t},ke=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Me=function(t,e){for(var n in e)t[n]=e[n];return t},Te=function t(e,n){for(var i in n)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=Nt(n[i])?t(e[i]||(e[i]={}),n[i]):n[i]);return e},Se=function(t,e){var n,i={};for(n in t)n in e||(i[n]=t[n]);return i},Ve=function(t){var e,n=t.parent||nt,i=t.keyframes?(e=qt(t.keyframes),function(t,n){for(var i in n)i in t||"duration"===i&&e||"ease"===i||(t[i]=n[i])}):ke;if(Ft(t.inherit))for(;n;)i(t,n.vars.defaults),n=n.parent||n._dp;return t},Ae=function(t,e,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var s,o=t[i];if(r)for(s=e[r];o&&o[r]>s;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=o,e.parent=e._dp=t,e},Le=function(t,e,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=e._prev,s=e._next;r?r._next=s:t[n]===e&&(t[n]=s),s?s._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null},De=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Oe=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},Re=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},je=function t(e){return!e||e._ts&&t(e.parent)},Ue=function(t){return t._repeat?Be(t._tTime,t=t.duration()+t._rDelay)*t:0},Be=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},ze=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ie=function(t){return t._end=_e(t._start+(t._tDur/Math.abs(t._ts||t._rts||1e-8)||0))},Ne=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=_e(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ie(t),n._dirty||Oe(n,t)),t},Fe=function(t,e){var n;if((e._time||e._initted&&!e._dur)&&(n=ze(t.rawTime(),e),(!e._dur||tn(0,e.totalDuration(),n)-e._tTime>1e-8)&&e.render(n,!0)),Oe(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-1e-8}},Ke=function(t,e,n,i){return e.parent&&De(e),e._start=_e((zt(n)?n:n||t!==nt?Ze(t,n,e):t._time)+e._delay),e._end=_e(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Ae(t,e,"_first","_last",t._sort?"_start":0),$e(e)||(t._recent=e),i||Fe(t,e),t},He=function(t,e){return te.ScrollTrigger?te.ScrollTrigger.create(e,t):void 0},Ye=function(t,e,n,i){return $n(t,e),t._initted?!n&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&at!==kn.frame?(ae.push(t),t._lazy=[e,i],1):void 0:1},qe=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},$e=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},Xe=function(t,e,n,i){var r=t._repeat,s=_e(e)||0,o=t._tTime/t._tDur;return o&&!i&&(t._time*=s/t._dur),t._dur=s,t._tDur=r?r<0?1e10:_e(s*(r+1)+t._rDelay*r):s,o>0&&!i?Ne(t,t._tTime=t._tDur*o):t.parent&&Ie(t),n||Oe(t.parent,t),t},Ge=function(t){return t instanceof Nn?Oe(t):Xe(t,t._dur)},Qe={_start:0,endTime:se,totalDuration:se},Ze=function t(e,n,i){var r,s,o,a=e.labels,l=e._recent||Qe,h=e.duration()>=1e8?l.endTime(!1):e._dur;return Ut(n)&&(isNaN(n)||n in a)?(s=n.charAt(0),o="%"===n.substr(-1),r=n.indexOf("="),"<"===s||">"===s?(r>=0&&(n=n.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(o?(r<0?l:i).totalDuration()/100:1)):r<0?(n in a||(a[n]=h),a[n]):(s=parseFloat(n.charAt(r-1)+n.substr(r+1)),o&&i&&(s=s/100*(qt(i)?i[0]:i).totalDuration()),r>1?t(e,n.substr(0,r-1),i)+s:h+s)):null==n?h:+n},We=function(t,e,n){var i,r,s=zt(e[1]),o=(s?2:1)+(t<2?0:1),a=e[o];if(s&&(a.duration=e[1]),a.parent=n,t){for(i=a,r=n;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=Ft(r.vars.inherit)&&r.parent;a.immediateRender=Ft(i.immediateRender),t<2?a.runBackwards=1:a.startAt=e[o-1]}return new Wn(e[0],a,e[o+1])},Je=function(t,e){return t||0===t?e(t):e},tn=function(t,e,n){return n<t?t:n>e?e:n},en=function(t,e){return Ut(t)&&(e=Jt.exec(t))?e[1]:""},nn=[].slice,rn=function(t,e){return t&&Nt(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Nt(t[0]))&&!t.nodeType&&t!==it},sn=function(t,e,n){return!Ut(t)||n||!rt&&Mn()?qt(t)?function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){var i;return Ut(t)&&!e||rn(t,1)?(i=n).push.apply(i,sn(t)):n.push(t)}))||n}(t,n):rn(t)?nn.call(t,0):t?[t]:[]:nn.call((e||st).querySelectorAll(t),0)},on=function(t){return t.sort((function(){return.5-Math.random()}))},an=function(t){if(Bt(t))return t;var e=Nt(t)?t:{each:t},n=On(e.ease),i=e.from||0,r=parseFloat(e.base)||0,s={},o=i>0&&i<1,a=isNaN(i)||o,l=e.axis,h=i,d=i;return Ut(i)?h=d={center:.5,edges:.5,end:1}[i]||0:!o&&a&&(h=i[0],d=i[1]),function(t,o,p){var u,c,v,m,f,g,b,_,w,x=(p||e).length,y=s[x];if(!y){if(!(w="auto"===e.grid?0:(e.grid||[1,1e8])[1])){for(b=-1e8;b<(b=p[w++].getBoundingClientRect().left)&&w<x;);w--}for(y=s[x]=[],u=a?Math.min(w,x)*h-.5:i%w,c=1e8===w?0:a?x*d/w-.5:i/w|0,b=0,_=1e8,g=0;g<x;g++)v=g%w-u,m=c-(g/w|0),y[g]=f=l?Math.abs("y"===l?m:v):Ot(v*v+m*m),f>b&&(b=f),f<_&&(_=f);"random"===i&&on(y),y.max=b-_,y.min=_,y.v=x=(parseFloat(e.amount)||parseFloat(e.each)*(w>x?x-1:l?"y"===l?x/w:w:Math.max(w,x/w))||0)*("edges"===i?-1:1),y.b=x<0?r-x:r,y.u=en(e.amount||e.each)||0,n=n&&x<0?Ln(n):n}return x=(y[t]-y.min)/y.max||0,_e(y.b+(n?n(x):x)*y.v)+y.u}},ln=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var i=Math.round(parseFloat(n)/t)*t*e;return(i-i%1)/e+(zt(n)?0:en(n))}},hn=function(t,e){var n,i,r=qt(t);return!r&&Nt(t)&&(n=r=t.radius||1e8,t.values?(t=sn(t.values),(i=!zt(t[0]))&&(n*=n)):t=ln(t.increment)),Je(e,r?Bt(t)?function(e){return i=t(e),Math.abs(i-e)<=n?i:e}:function(e){for(var r,s,o=parseFloat(i?e.x:e),a=parseFloat(i?e.y:0),l=1e8,h=0,d=t.length;d--;)(r=i?(r=t[d].x-o)*r+(s=t[d].y-a)*s:Math.abs(t[d]-o))<l&&(l=r,h=d);return h=!n||l<=n?t[h]:e,i||h===e||zt(e)?h:h+en(e)}:ln(t))},dn=function(t,e,n,i){return Je(qt(t)?!e:!0===n?!!(n=0):!i,(function(){return qt(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*i)/i}))},pn=function(t,e,n){return Je(n,(function(n){return t[~~e(n)]}))},un=function(t){for(var e,n,i,r,s=0,o="";~(e=t.indexOf("random(",s));)i=t.indexOf(")",e),r="["===t.charAt(e+7),n=t.substr(e+7,i-e-7).match(r?Wt:$t),o+=t.substr(s,e-s)+dn(r?n:+n[0],r?0:+n[1],+n[2]||1e-5),s=i+1;return o+t.substr(s,t.length-s)},cn=function(t,e,n,i,r){var s=e-t,o=i-n;return Je(r,(function(e){return n+((e-t)/s*o||0)}))},vn=function(t,e,n){var i,r,s,o=t.labels,a=1e8;for(i in o)(r=o[i]-e)<0==!!n&&r&&a>(r=Math.abs(r))&&(s=i,a=r);return s},mn=function(t,e,n){var i,r,s=t.vars,o=s[e];if(o)return i=s[e+"Params"],r=s.callbackScope||t,n&&ae.length&&ye(),i?o.apply(r,i):o.call(r)},fn=function(t){return De(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&mn(t,"onInterrupt"),t},gn=function(t){var e=(t=!t.name&&t.default||t).name,n=Bt(t),i=e&&!n&&t.init?function(){this._props=[]}:t,r={init:se,render:ai,add:Yn,kill:hi,modifier:li,rawVars:0},s={targetTest:0,get:0,getSetter:ii,aliases:{},register:0};if(Mn(),t!==i){if(he[e])return;ke(i,ke(Se(t,r),s)),Me(i.prototype,Me(r,Se(t,s))),he[i.prop=e]=i,t.targetTest&&(ue.push(i),oe[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}re(e,i),t.register&&t.register(fi,i,ui)},bn={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},_n=function(t,e,n){return 255*(6*(t+=t<0?1:t>1?-1:0)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)+.5|0},wn=function(t,e,n){var i,r,s,o,a,l,h,d,p,u,c=t?zt(t)?[t>>16,t>>8&255,255&t]:0:bn.black;if(!c){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),bn[t])c=bn[t];else if("#"===t.charAt(0)){if(t.length<6&&(i=t.charAt(1),r=t.charAt(2),s=t.charAt(3),t="#"+i+i+r+r+s+s+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(c=parseInt(t.substr(1,6),16))>>16,c>>8&255,255&c,parseInt(t.substr(7),16)/255];c=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]}else if("hsl"===t.substr(0,3))if(c=u=t.match($t),e){if(~t.indexOf("="))return c=t.match(Xt),n&&c.length<4&&(c[3]=1),c}else o=+c[0]%360/360,a=+c[1]/100,i=2*(l=+c[2]/100)-(r=l<=.5?l*(a+1):l+a-l*a),c.length>3&&(c[3]*=1),c[0]=_n(o+1/3,i,r),c[1]=_n(o,i,r),c[2]=_n(o-1/3,i,r);else c=t.match($t)||bn.transparent;c=c.map(Number)}return e&&!u&&(i=c[0]/255,r=c[1]/255,s=c[2]/255,l=((h=Math.max(i,r,s))+(d=Math.min(i,r,s)))/2,h===d?o=a=0:(p=h-d,a=l>.5?p/(2-h-d):p/(h+d),o=h===i?(r-s)/p+(r<s?6:0):h===r?(s-i)/p+2:(i-r)/p+4,o*=60),c[0]=~~(o+.5),c[1]=~~(100*a+.5),c[2]=~~(100*l+.5)),n&&c.length<4&&(c[3]=1),c},xn=function(t){var e=[],n=[],i=-1;return t.split(Cn).forEach((function(t){var r=t.match(Gt)||[];e.push.apply(e,r),n.push(i+=r.length+1)})),e.c=n,e},yn=function(t,e,n){var i,r,s,o,a="",l=(t+a).match(Cn),h=e?"hsla(":"rgba(",d=0;if(!l)return t;if(l=l.map((function(t){return(t=wn(t,e,1))&&h+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),n&&(s=xn(t),(i=n.c).join(a)!==s.c.join(a)))for(o=(r=t.replace(Cn,"1").split(Gt)).length-1;d<o;d++)a+=r[d]+(~i.indexOf(d)?l.shift()||h+"0,0,0,0)":(s.length?s:l.length?l:n).shift());if(!r)for(o=(r=t.split(Cn)).length-1;d<o;d++)a+=r[d]+l[d];return a+r[o]},Cn=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in bn)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Pn=/hsl[a]?\(/,En=function(t){var e,n=t.join(" ");if(Cn.lastIndex=0,Cn.test(n))return e=Pn.test(n),t[1]=yn(t[1],e),t[0]=yn(t[0],e,xn(t[1])),!0},kn=(ft=Date.now,gt=500,bt=33,_t=ft(),wt=_t,yt=xt=1e3/240,Pt=function t(e){var n,i,r,s,o=ft()-wt,a=!0===e;if(o>gt&&(_t+=o-bt),((n=(r=(wt+=o)-_t)-yt)>0||a)&&(s=++ct.frame,vt=r-1e3*ct.time,ct.time=r/=1e3,yt+=n+(n>=xt?4:xt-n),i=1),a||(dt=pt(t)),i)for(mt=0;mt<Ct.length;mt++)Ct[mt](r,vt,s,e)},ct={time:0,frame:0,tick:function(){Pt(!0)},deltaRatio:function(t){return vt/(1e3/(t||60))},wake:function(){ot&&(!rt&&Kt()&&(it=rt=window,st=it.document||{},te.gsap=fi,(it.gsapVersions||(it.gsapVersions=[])).push(fi.version),ne(ee||it.GreenSockGlobals||!it.gsap&&it||{}),ut=it.requestAnimationFrame),dt&&ct.sleep(),pt=ut||function(t){return setTimeout(t,yt-1e3*ct.time+1|0)},ht=1,Pt(2))},sleep:function(){(ut?it.cancelAnimationFrame:clearTimeout)(dt),ht=0,pt=se},lagSmoothing:function(t,e){gt=t||1/1e-8,bt=Math.min(e,gt,0)},fps:function(t){xt=1e3/(t||240),yt=1e3*ct.time+xt},add:function(t,e,n){var i=e?function(e,n,r,s){t(e,n,r,s),ct.remove(i)}:t;return ct.remove(t),Ct[n?"unshift":"push"](i),Mn(),i},remove:function(t,e){~(e=Ct.indexOf(t))&&Ct.splice(e,1)&&mt>=e&&mt--},_listeners:Ct=[]}),Mn=function(){return!ht&&kn.wake()},Tn={},Sn=/^[\d.\-M][\d.\-,\s]/,Vn=/["']/g,An=function(t){for(var e,n,i,r={},s=t.substr(1,t.length-3).split(":"),o=s[0],a=1,l=s.length;a<l;a++)n=s[a],e=a!==l-1?n.lastIndexOf(","):n.length,i=n.substr(0,e),r[o]=isNaN(i)?i.replace(Vn,"").trim():+i,o=n.substr(e+1).trim();return r},Ln=function(t){return function(e){return 1-t(1-e)}},Dn=function t(e,n){for(var i,r=e._first;r;)r instanceof Nn?t(r,n):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===n||(r.timeline?t(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},On=function(t,e){return t&&(Bt(t)?t:Tn[t]||function(t){var e,n,i,r,s=(t+"").split("("),o=Tn[s[0]];return o&&s.length>1&&o.config?o.config.apply(null,~t.indexOf("{")?[An(s[1])]:(e=t,n=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",n),e.substring(n,~r&&r<i?e.indexOf(")",i+1):i)).split(",").map(Pe)):Tn._CE&&Sn.test(t)?Tn._CE("",t):o}(t))||e},Rn=function(t,e,n,i){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,s={easeIn:e,easeOut:n,easeInOut:i};return ge(t,(function(t){for(var e in Tn[t]=te[t]=s,Tn[r=t.toLowerCase()]=n,s)Tn[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Tn[t+"."+e]=s[e]})),s},jn=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Un=function t(e,n,i){var r=n>=1?n:1,s=(i||(e?.3:.45))/(n<1?n:1),o=s/At*(Math.asin(1/r)||0),a=function(t){return 1===t?1:r*Math.pow(2,-10*t)*jt((t-o)*s)+1},l="out"===e?a:"in"===e?function(t){return 1-a(1-t)}:jn(a);return s=At/s,l.config=function(n,i){return t(e,n,i)},l},Bn=function t(e,n){void 0===n&&(n=1.70158);var i=function(t){return t?--t*t*((n+1)*t+n)+1:0},r="out"===e?i:"in"===e?function(t){return 1-i(1-t)}:jn(i);return r.config=function(n){return t(e,n)},r};ge("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var n=e<5?e+1:e;Rn(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},(function(t){return 1-Math.pow(1-t,n)}),(function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2}))})),Tn.Linear.easeNone=Tn.none=Tn.Linear.easeIn,Rn("Elastic",Un("in"),Un("out"),Un()),Et=7.5625,Mt=1/(kt=2.75),Rn("Bounce",(function(t){return 1-Tt(1-t)}),Tt=function(t){return t<Mt?Et*t*t:t<.7272727272727273?Et*Math.pow(t-1.5/kt,2)+.75:t<.9090909090909092?Et*(t-=2.25/kt)*t+.9375:Et*Math.pow(t-2.625/kt,2)+.984375}),Rn("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),Rn("Circ",(function(t){return-(Ot(1-t*t)-1)})),Rn("Sine",(function(t){return 1===t?1:1-Rt(t*Lt)})),Rn("Back",Bn("in"),Bn("out"),Bn()),Tn.SteppedEase=Tn.steps=te.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,i=t+(e?0:1),r=e?1:0;return function(t){return((i*tn(0,.99999999,t)|0)+r)*n}}},Vt.ease=Tn["quad.out"],ge("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return ce+=t+","+t+"Params,"}));var zn=function(t,e){this.id=Dt++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:fe,this.set=e?e.getSetter:ii},In=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Xe(this,+t.duration,1,1),this.data=t.data,ht||kn.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Xe(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Mn(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Ne(this,t),!n._dp||n.parent||Fe(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Ke(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&1e-8===Math.abs(this._zTime)||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),Ce(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Ue(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Ue(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?Be(this._tTime,n)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?ze(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,this.totalTime(tn(-this._delay,this._tDur,e),!0),Ie(this),Re(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Mn(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&1e-8!==Math.abs(this._zTime)&&(this._tTime-=1e-8)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Ke(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(Ft(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ze(e.rawTime(t),this):this._tTime:this._tTime},e.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(e._ts||1),e=e._dp;return n},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,Ge(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,Ge(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Ze(this,t),Ft(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,Ft(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-1e-8))},e.eventCallback=function(t,e,n){var i=this.vars;return arguments.length>1?(e?(i[t]=e,n&&(i[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},e.then=function(t){var e=this;return new Promise((function(n){var i=Bt(t)?t:Ee,r=function(){var t=e.then;e.then=null,Bt(i)&&(i=i(e))&&(i.then||i===e)&&(e.then=t),n(i),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?r():e._prom=r}))},e.kill=function(){fn(this)},t}();ke(In.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Nn=function(t){function e(e,n){var i;return void 0===e&&(e={}),(i=t.call(this,e)||this).labels={},i.smoothChildTiming=!!e.smoothChildTiming,i.autoRemoveChildren=!!e.autoRemoveChildren,i._sort=Ft(e.sortChildren),nt&&Ke(e.parent||nt,J(i),n),e.reversed&&i.reverse(),e.paused&&i.paused(!0),e.scrollTrigger&&He(J(i),e.scrollTrigger),i}tt(e,t);var n=e.prototype;return n.to=function(t,e,n){return We(0,arguments,this),this},n.from=function(t,e,n){return We(1,arguments,this),this},n.fromTo=function(t,e,n,i){return We(2,arguments,this),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,Ve(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new Wn(t,e,Ze(this,n),1),this},n.call=function(t,e,n){return Ke(this,Wn.delayedCall(0,t,e),n)},n.staggerTo=function(t,e,n,i,r,s,o){return n.duration=e,n.stagger=n.stagger||i,n.onComplete=s,n.onCompleteParams=o,n.parent=this,new Wn(t,n,Ze(this,r)),this},n.staggerFrom=function(t,e,n,i,r,s,o){return n.runBackwards=1,Ve(n).immediateRender=Ft(n.immediateRender),this.staggerTo(t,e,n,i,r,s,o)},n.staggerFromTo=function(t,e,n,i,r,s,o,a){return i.startAt=n,Ve(i).immediateRender=Ft(i.immediateRender),this.staggerTo(t,e,i,r,s,o,a)},n.render=function(t,e,n){var i,r,s,o,a,l,h,d,p,u,c,v,m=this._time,f=this._dirty?this.totalDuration():this._tDur,g=this._dur,b=t<=0?0:_e(t),_=this._zTime<0!=t<0&&(this._initted||!g);if(this!==nt&&b>f&&t>=0&&(b=f),b!==this._tTime||n||_){if(m!==this._time&&g&&(b+=this._time-m,t+=this._time-m),i=b,p=this._start,l=!(d=this._ts),_&&(g||(m=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(c=this._yoyo,a=g+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,n);if(i=_e(b%a),b===f?(o=this._repeat,i=g):((o=~~(b/a))&&o===b/a&&(i=g,o--),i>g&&(i=g)),u=Be(this._tTime,a),!m&&this._tTime&&u!==o&&(u=o),c&&1&o&&(i=g-i,v=1),o!==u&&!this._lock){var w=c&&1&u,x=w===(c&&1&o);if(o<u&&(w=!w),m=w?0:g,this._lock=1,this.render(m||(v?0:_e(o*a)),e,!g)._lock=0,this._tTime=b,!e&&this.parent&&mn(this,"onRepeat"),this.vars.repeatRefresh&&!v&&(this.invalidate()._lock=1),m&&m!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(g=this._dur,f=this._tDur,x&&(this._lock=2,m=w?g:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!v&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;Dn(this,v)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(h=function(t,e,n){var i;if(n>e)for(i=t._first;i&&i._start<=n;){if("isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=n;){if("isPause"===i.data&&i._start<e)return i;i=i._prev}}(this,_e(m),_e(i)),h&&(b-=i-(i=h._start))),this._tTime=b,this._time=i,this._act=!d,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,m=0),!m&&i&&!e&&(mn(this,"onStart"),this._tTime!==b))return this;if(i>=m&&t>=0)for(r=this._first;r;){if(s=r._next,(r._act||i>=r._start)&&r._ts&&h!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!l){h=0,s&&(b+=this._zTime=-1e-8);break}}r=s}else{r=this._last;for(var y=t<0?t:i;r;){if(s=r._prev,(r._act||y<=r._end)&&r._ts&&h!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(y-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(y-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!l){h=0,s&&(b+=this._zTime=y?-1e-8:1e-8);break}}r=s}}if(h&&!e&&(this.pause(),h.render(i>=m?0:-1e-8)._zTime=i>=m?1:-1,this._ts))return this._start=p,Ie(this),this.render(t,e,n);this._onUpdate&&!e&&mn(this,"onUpdate",!0),(b===f&&this._tTime>=this.totalDuration()||!b&&m)&&(p!==this._start&&Math.abs(d)===Math.abs(this._ts)||this._lock||((t||!g)&&(b===f&&this._ts>0||!b&&this._ts<0)&&De(this,1),e||t<0&&!m||!b&&!m&&f||(mn(this,b===f&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(b<f&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var n=this;if(zt(e)||(e=Ze(this,e,t)),!(t instanceof In)){if(qt(t))return t.forEach((function(t){return n.add(t,e)})),this;if(Ut(t))return this.addLabel(t,e);if(!Bt(t))return this;t=Wn.delayedCall(0,t)}return this!==t?Ke(this,t,e):this},n.getChildren=function(t,e,n,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=-1e8);for(var r=[],s=this._first;s;)s._start>=i&&(s instanceof Wn?e&&r.push(s):(n&&r.push(s),t&&r.push.apply(r,s.getChildren(!0,e,n)))),s=s._next;return r},n.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return Ut(t)?this.removeLabel(t):Bt(t)?this.killTweensOf(t):(Le(this,t),t===this._recent&&(this._recent=this._last),Oe(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_e(kn.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=Ze(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var i=Wn.delayedCall(0,e||se,n);return i.data="isPause",this._hasPause=1,Ke(this,i,Ze(this,t))},n.removePause=function(t){var e=this._first;for(t=Ze(this,t);e;)e._start===t&&"isPause"===e.data&&De(e),e=e._next},n.killTweensOf=function(t,e,n){for(var i=this.getTweensOf(t,n),r=i.length;r--;)Fn!==i[r]&&i[r].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,i=[],r=sn(t),s=this._first,o=zt(e);s;)s instanceof Wn?xe(s._targets,r)&&(o?(!Fn||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&i.push(s):(n=s.getTweensOf(r,e)).length&&i.push.apply(i,n),s=s._next;return i},n.tweenTo=function(t,e){e=e||{};var n,i=this,r=Ze(i,t),s=e,o=s.startAt,a=s.onStart,l=s.onStartParams,h=s.immediateRender,d=Wn.to(i,ke({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(o&&"time"in o?o.time:i._time))/i.timeScale())||1e-8,onStart:function(){if(i.pause(),!n){var t=e.duration||Math.abs((r-(o&&"time"in o?o.time:i._time))/i.timeScale());d._dur!==t&&Xe(d,t,0,1).render(d._time,!0,!0),n=1}a&&a.apply(d,l||[])}},e));return h?d.render(0):d},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,ke({startAt:{time:Ze(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),vn(this,Ze(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),vn(this,Ze(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+1e-8)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var i,r=this._first,s=this.labels;r;)r._start>=n&&(r._start+=t,r._end+=t),r=r._next;if(e)for(i in s)s[i]>=n&&(s[i]+=t);return Oe(this)},n.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Oe(this)},n.totalDuration=function(t){var e,n,i,r=0,s=this,o=s._last,a=1e8;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(i=s.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),(n=o._start)>a&&s._sort&&o._ts&&!s._lock?(s._lock=1,Ke(s,o,n-o._delay,1)._lock=0):a=n,n<0&&o._ts&&(r-=n,(!i&&!s._dp||i&&i.smoothChildTiming)&&(s._start+=n/s._ts,s._time-=n,s._tTime-=n),s.shiftChildren(-n,!1,-1/0),a=0),o._end>r&&o._ts&&(r=o._end),o=e;Xe(s,s===nt&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(t){if(nt._ts&&(Ce(nt,ze(t,nt)),at=kn.frame),kn.frame>=pe){pe+=St.autoSleep||120;var e=nt._first;if((!e||!e._ts)&&St.autoSleep&&kn._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||kn.sleep()}}},e}(In);ke(Nn.prototype,{_lock:0,_hasPause:0,_forcing:0});var Fn,Kn,Hn=function(t,e,n,i,r,s,o){var a,l,h,d,p,u,c,v,m=new ui(this._pt,t,e,0,1,oi,null,r),f=0,g=0;for(m.b=n,m.e=i,n+="",(c=~(i+="").indexOf("random("))&&(i=un(i)),s&&(s(v=[n,i],t,e),n=v[0],i=v[1]),l=n.match(Qt)||[];a=Qt.exec(i);)d=a[0],p=i.substring(f,a.index),h?h=(h+1)%5:"rgba("===p.substr(-5)&&(h=1),d!==l[g++]&&(u=parseFloat(l[g-1])||0,m._pt={_next:m._pt,p:p||1===g?p:",",s:u,c:"="===d.charAt(1)?we(u,d)-u:parseFloat(d)-u,m:h&&h<4?Math.round:0},f=Qt.lastIndex);return m.c=f<i.length?i.substring(f,i.length):"",m.fp=o,(Zt.test(i)||c)&&(m.e=0),this._pt=m,m},Yn=function(t,e,n,i,r,s,o,a,l){Bt(i)&&(i=i(r||0,t,s));var h,d=t[e],p="get"!==n?n:Bt(d)?l?t[e.indexOf("set")||!Bt(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():d,u=Bt(d)?l?ei:ti:Jn;if(Ut(i)&&(~i.indexOf("random(")&&(i=un(i)),"="===i.charAt(1)&&((h=we(p,i)+(en(p)||0))||0===h)&&(i=h)),p!==i||Kn)return isNaN(p*i)||""===i?Hn.call(this,t,e,p,i,u,a||St.stringFilter,l):(h=new ui(this._pt,t,e,+p||0,i-(p||0),"boolean"==typeof d?si:ri,0,u),l&&(h.fp=l),o&&h.modifier(o,this,t),this._pt=h)},qn=function(t,e,n,i,r,s){var o,a,l,h;if(he[t]&&!1!==(o=new he[t]).init(r,o.rawVars?e[t]:function(t,e,n,i,r){if(Bt(t)&&(t=Gn(t,r,e,n,i)),!Nt(t)||t.style&&t.nodeType||qt(t)||Yt(t))return Ut(t)?Gn(t,r,e,n,i):t;var s,o={};for(s in t)o[s]=Gn(t[s],r,e,n,i);return o}(e[t],i,r,s,n),n,i,s)&&(n._pt=a=new ui(n._pt,r,t,0,1,o.render,o,0,o.priority),n!==lt))for(l=n._ptLookup[n._targets.indexOf(r)],h=o._props.length;h--;)l[o._props[h]]=a;return o},$n=function t(e,n){var i,r,s,o,a,l,h,d,p,u,c,v,m,f=e.vars,g=f.ease,b=f.startAt,_=f.immediateRender,w=f.lazy,x=f.onUpdate,y=f.onUpdateParams,C=f.callbackScope,P=f.runBackwards,E=f.yoyoEase,k=f.keyframes,M=f.autoRevert,T=e._dur,S=e._startAt,V=e._targets,A=e.parent,L=A&&"nested"===A.data?A.parent._targets:V,D="auto"===e._overwrite&&!et,O=e.timeline;if(O&&(!k||!g)&&(g="none"),e._ease=On(g,Vt.ease),e._yEase=E?Ln(On(!0===E?g:E,Vt.ease)):0,E&&e._yoyo&&!e._repeat&&(E=e._yEase,e._yEase=e._ease,e._ease=E),e._from=!O&&!!f.runBackwards,!O||k&&!f.stagger){if(v=(d=V[0]?me(V[0]).harness:0)&&f[d.prop],i=Se(f,oe),S&&(De(S.render(-1,!0)),S._lazy=0),b)if(De(e._startAt=Wn.set(V,ke({data:"isStart",overwrite:!1,parent:A,immediateRender:!0,lazy:Ft(w),startAt:null,delay:0,onUpdate:x,onUpdateParams:y,callbackScope:C,stagger:0},b))),n<0&&!_&&!M&&e._startAt.render(-1,!0),_){if(n>0&&!M&&(e._startAt=0),T&&n<=0)return void(n&&(e._zTime=n))}else!1===M&&(e._startAt=0);else if(P&&T)if(S)!M&&(e._startAt=0);else if(n&&(_=!1),s=ke({overwrite:!1,data:"isFromStart",lazy:_&&Ft(w),immediateRender:_,stagger:0,parent:A},i),v&&(s[d.prop]=v),De(e._startAt=Wn.set(V,s)),n<0&&e._startAt.render(-1,!0),e._zTime=n,_){if(!n)return}else t(e._startAt,1e-8);for(e._pt=e._ptCache=0,w=T&&Ft(w)||w&&!T,r=0;r<V.length;r++){if(h=(a=V[r])._gsap||ve(V)[r]._gsap,e._ptLookup[r]=u={},le[h.id]&&ae.length&&ye(),c=L===V?r:L.indexOf(a),d&&!1!==(p=new d).init(a,v||i,e,c,L)&&(e._pt=o=new ui(e._pt,a,p.name,0,1,p.render,p,0,p.priority),p._props.forEach((function(t){u[t]=o})),p.priority&&(l=1)),!d||v)for(s in i)he[s]&&(p=qn(s,i,e,c,a,L))?p.priority&&(l=1):u[s]=o=Yn.call(e,a,s,"get",i[s],c,L,0,f.stringFilter);e._op&&e._op[r]&&e.kill(a,e._op[r]),D&&e._pt&&(Fn=e,nt.killTweensOf(a,u,e.globalTime(n)),m=!e.parent,Fn=0),e._pt&&w&&(le[h.id]=1)}l&&pi(e),e._onInit&&e._onInit(e)}e._onUpdate=x,e._initted=(!e._op||e._pt)&&!m,k&&n<=0&&O.render(1e8,!0,!0)},Xn=function(t,e,n,i){var r,s,o=e.ease||i||"power1.inOut";if(qt(e))s=n[t]||(n[t]=[]),e.forEach((function(t,n){return s.push({t:n/(e.length-1)*100,v:t,e:o})}));else for(r in e)s=n[r]||(n[r]=[]),"ease"===r||s.push({t:parseFloat(t),v:e[r],e:o})},Gn=function(t,e,n,i,r){return Bt(t)?t.call(e,n,i,r):Ut(t)&&~t.indexOf("random(")?un(t):t},Qn=ce+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Zn={};ge(Qn+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return Zn[t]=1}));var Wn=function(t){function e(e,n,i,r){var s;"number"==typeof n&&(i.duration=n,n=i,i=null);var o,a,l,h,d,p,u,c,v=(s=t.call(this,r?n:Ve(n))||this).vars,m=v.duration,f=v.delay,g=v.immediateRender,b=v.stagger,_=v.overwrite,w=v.keyframes,x=v.defaults,y=v.scrollTrigger,C=v.yoyoEase,P=n.parent||nt,E=(qt(e)||Yt(e)?zt(e[0]):"length"in n)?[e]:sn(e);if(s._targets=E.length?ve(E):ie(0,!St.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=_,w||b||Ht(m)||Ht(f)){if(n=s.vars,(o=s.timeline=new Nn({data:"nested",defaults:x||{}})).kill(),o.parent=o._dp=J(s),o._start=0,b||Ht(m)||Ht(f)){if(h=E.length,u=b&&an(b),Nt(b))for(d in b)~Qn.indexOf(d)&&(c||(c={}),c[d]=b[d]);for(a=0;a<h;a++)(l=Se(n,Zn)).stagger=0,C&&(l.yoyoEase=C),c&&Me(l,c),p=E[a],l.duration=+Gn(m,J(s),a,p,E),l.delay=(+Gn(f,J(s),a,p,E)||0)-s._delay,!b&&1===h&&l.delay&&(s._delay=f=l.delay,s._start+=f,l.delay=0),o.to(p,l,u?u(a,p,E):0),o._ease=Tn.none;o.duration()?m=f=0:s.timeline=0}else if(w){Ve(ke(o.vars.defaults,{ease:"none"})),o._ease=On(w.ease||n.ease||"none");var k,M,T,S=0;if(qt(w))w.forEach((function(t){return o.to(E,t,">")}));else{for(d in l={},w)"ease"===d||"easeEach"===d||Xn(d,w[d],l,w.easeEach);for(d in l)for(k=l[d].sort((function(t,e){return t.t-e.t})),S=0,a=0;a<k.length;a++)(T={ease:(M=k[a]).e,duration:(M.t-(a?k[a-1].t:0))/100*m})[d]=M.v,o.to(E,T,S),S+=T.duration;o.duration()<m&&o.to({},{duration:m-o.duration()})}}m||s.duration(m=o.duration())}else s.timeline=0;return!0!==_||et||(Fn=J(s),nt.killTweensOf(E),Fn=0),Ke(P,J(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(g||!m&&!w&&s._start===_e(P._time)&&Ft(g)&&je(J(s))&&"nested"!==P.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-f))),y&&He(J(s),y),s}tt(e,t);var n=e.prototype;return n.render=function(t,e,n){var i,r,s,o,a,l,h,d,p,u=this._time,c=this._tDur,v=this._dur,m=t>c-1e-8&&t>=0?c:t<1e-8?0:t;if(v){if(m!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=t<0){if(i=m,d=this.timeline,this._repeat){if(o=v+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*o+t,e,n);if(i=_e(m%o),m===c?(s=this._repeat,i=v):((s=~~(m/o))&&s===m/o&&(i=v,s--),i>v&&(i=v)),(l=this._yoyo&&1&s)&&(p=this._yEase,i=v-i),a=Be(this._tTime,o),i===u&&!n&&this._initted)return this._tTime=m,this;s!==a&&(d&&this._yEase&&Dn(d,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=n=1,this.render(_e(o*s),!0).invalidate()._lock=0))}if(!this._initted){if(Ye(this,t<0?t:i,n,e))return this._tTime=0,this;if(u!==this._time)return this;if(v!==this._dur)return this.render(t,e,n)}if(this._tTime=m,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=h=(p||this._ease)(i/v),this._from&&(this.ratio=h=1-h),i&&!u&&!e&&(mn(this,"onStart"),this._tTime!==m))return this;for(r=this._pt;r;)r.r(h,r.d),r=r._next;d&&d.render(t<0?t:!i&&l?-1e-8:d._dur*d._ease(i/this._dur),e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,n),mn(this,"onUpdate")),this._repeat&&s!==a&&this.vars.onRepeat&&!e&&this.parent&&mn(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),(t||!v)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&De(this,1),e||t<0&&!u||!m&&!u||(mn(this,m===c?"onComplete":"onReverseComplete",!0),this._prom&&!(m<c&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,i){var r,s,o,a=t.ratio,l=e<0||!e&&(!t._start&&qe(t)&&(t._initted||!$e(t))||(t._ts<0||t._dp._ts<0)&&!$e(t))?0:1,h=t._rDelay,d=0;if(h&&t._repeat&&(d=tn(0,t._tDur,e),s=Be(d,h),t._yoyo&&1&s&&(l=1-l),s!==Be(t._tTime,h)&&(a=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==a||i||1e-8===t._zTime||!e&&t._zTime){if(!t._initted&&Ye(t,e,i,n))return;for(o=t._zTime,t._zTime=e||(n?1e-8:0),n||(n=e&&!o),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=d,r=t._pt;r;)r.r(l,r.d),r=r._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!n&&mn(t,"onUpdate"),d&&t._repeat&&!n&&t.parent&&mn(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&De(t,1),n||(mn(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},n.resetTo=function(t,e,n,i){ht||kn.wake(),this._ts||this.play();var r=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||$n(this,r),function(t,e,n,i,r,s,o){var a,l,h,d=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!d)for(d=t._ptCache[e]=[],l=t._ptLookup,h=t._targets.length;h--;){if((a=l[h][e])&&a.d&&a.d._pt)for(a=a.d._pt;a&&a.p!==e;)a=a._next;if(!a)return Kn=1,t.vars[e]="+=0",$n(t,o),Kn=0,1;d.push(a)}for(h=d.length;h--;)(a=d[h]).s=!i&&0!==i||r?a.s+(i||0)+s*a.c:i,a.c=n-a.s,a.e&&(a.e=be(n)+en(a.e)),a.b&&(a.b=a.s+en(a.b))}(this,t,e,n,i,this._ease(r/this._dur),r)?this.resetTo(t,e,n,i):(Ne(this,0),this.parent||Ae(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?fn(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Fn&&!0!==Fn.vars.overwrite)._first||fn(this),this.parent&&n!==this.timeline.totalDuration()&&Xe(this,this._dur*this.timeline._tDur/n,0,1),this}var i,r,s,o,a,l,h,d=this._targets,p=t?sn(t):d,u=this._ptLookup,c=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,i=n===e.length;i&&n--&&t[n]===e[n];);return n<0}(d,p))return"all"===e&&(this._pt=0),fn(this);for(i=this._op=this._op||[],"all"!==e&&(Ut(e)&&(a={},ge(e,(function(t){return a[t]=1})),e=a),e=function(t,e){var n,i,r,s,o=t[0]?me(t[0]).harness:0,a=o&&o.aliases;if(!a)return e;for(i in n=Me({},e),a)if(i in n)for(r=(s=a[i].split(",")).length;r--;)n[s[r]]=n[i];return n}(d,e)),h=d.length;h--;)if(~p.indexOf(d[h]))for(a in r=u[h],"all"===e?(i[h]=e,o=r,s={}):(s=i[h]=i[h]||{},o=e),o)(l=r&&r[a])&&("kill"in l.d&&!0!==l.d.kill(a)||Le(this,l,"_pt"),delete r[a]),"all"!==s&&(s[a]=1);return this._initted&&!this._pt&&c&&fn(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,e){return We(1,arguments)},e.delayedCall=function(t,n,i,r){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},e.fromTo=function(t,e,n){return We(2,arguments)},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return nt.killTweensOf(t,e,n)},e}(In);ke(Wn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),ge("staggerTo,staggerFrom,staggerFromTo",(function(t){Wn[t]=function(){var e=new Nn,n=nn.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var Jn=function(t,e,n){return t[e]=n},ti=function(t,e,n){return t[e](n)},ei=function(t,e,n,i){return t[e](i.fp,n)},ni=function(t,e,n){return t.setAttribute(e,n)},ii=function(t,e){return Bt(t[e])?ti:It(t[e])&&t.setAttribute?ni:Jn},ri=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},si=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},oi=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},ai=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},li=function(t,e,n,i){for(var r,s=this._pt;s;)r=s._next,s.p===i&&s.modifier(t,e,n),s=r},hi=function(t){for(var e,n,i=this._pt;i;)n=i._next,i.p===t&&!i.op||i.op===t?Le(this,i,"_pt"):i.dep||(e=1),i=n;return!e},di=function(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)},pi=function(t){for(var e,n,i,r,s=t._pt;s;){for(e=s._next,n=i;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:r)?s._prev._next=s:i=s,(s._next=n)?n._prev=s:r=s,s=e}t._pt=i},ui=function(){function t(t,e,n,i,r,s,o,a,l){this.t=e,this.s=i,this.c=r,this.p=n,this.r=s||ri,this.d=o||this,this.set=a||Jn,this.pr=l||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=di,this.m=t,this.mt=n,this.tween=e},t}();ge(ce+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return oe[t]=1})),te.TweenMax=te.TweenLite=Wn,te.TimelineLite=te.TimelineMax=Nn,nt=new Nn({sortChildren:!1,defaults:Vt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),St.stringFilter=En;var ci={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return gn(t)}))},timeline:function(t){return new Nn(t)},getTweensOf:function(t,e){return nt.getTweensOf(t,e)},getProperty:function(t,e,n,i){Ut(t)&&(t=sn(t)[0]);var r=me(t||{}).get,s=n?Ee:Pe;return"native"===n&&(n=""),t?e?s((he[e]&&he[e].get||r)(t,e,n,i)):function(e,n,i){return s((he[e]&&he[e].get||r)(t,e,n,i))}:t},quickSetter:function(t,e,n){if((t=sn(t)).length>1){var i=t.map((function(t){return fi.quickSetter(t,e,n)})),r=i.length;return function(t){for(var e=r;e--;)i[e](t)}}t=t[0]||{};var s=he[e],o=me(t),a=o.harness&&(o.harness.aliases||{})[e]||e,l=s?function(e){var i=new s;lt._pt=0,i.init(t,n?e+n:e,lt,0,[t]),i.render(1,i),lt._pt&&ai(1,lt)}:o.set(t,a);return s?l:function(e){return l(t,a,n?e+n:e,o,1)}},quickTo:function(t,e,n){var i,r=fi.to(t,Me(((i={})[e]="+=0.1",i.paused=!0,i),n||{})),s=function(t,n,i){return r.resetTo(e,t,n,i)};return s.tween=r,s},isTweening:function(t){return nt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=On(t.ease,Vt.ease)),Te(Vt,t||{})},config:function(t){return Te(St,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,i=t.plugins,r=t.defaults,s=t.extendTimeline;(i||"").split(",").forEach((function(t){return t&&!he[t]&&!te[t]&&ie()})),de[e]=function(t,e,i){return n(sn(t),ke(e||{},r),i)},s&&(Nn.prototype[e]=function(t,n,i){return this.add(de[e](t,Nt(n)?n:(i=n)&&{},this),i)})},registerEase:function(t,e){Tn[t]=On(e)},parseEase:function(t,e){return arguments.length?On(t,e):Tn},getById:function(t){return nt.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,i,r=new Nn(t);for(r.smoothChildTiming=Ft(t.smoothChildTiming),nt.remove(r),r._dp=0,r._time=r._tTime=nt._time,n=nt._first;n;)i=n._next,!e&&!n._dur&&n instanceof Wn&&n.vars.onComplete===n._targets[0]||Ke(r,n,n._start-n._delay),n=i;return Ke(nt,r,0),r},utils:{wrap:function t(e,n,i){var r=n-e;return qt(e)?pn(e,t(0,e.length),n):Je(i,(function(t){return(r+(t-e)%r)%r+e}))},wrapYoyo:function t(e,n,i){var r=n-e,s=2*r;return qt(e)?pn(e,t(0,e.length-1),n):Je(i,(function(t){return e+((t=(s+(t-e)%s)%s||0)>r?s-t:t)}))},distribute:an,random:dn,snap:hn,normalize:function(t,e,n){return cn(t,e,0,1,n)},getUnit:en,clamp:function(t,e,n){return Je(n,(function(n){return tn(t,e,n)}))},splitColor:wn,toArray:sn,selector:function(t){return t=sn(t)[0]||ie()||{},function(e){var n=t.current||t.nativeElement||t;return sn(e,n.querySelectorAll?n:n===t?ie()||st.createElement("div"):t)}},mapRange:cn,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||en(n))}},interpolate:function t(e,n,i,r){var s=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!s){var o,a,l,h,d,p=Ut(e),u={};if(!0===i&&(r=1)&&(i=null),p)e={p:e},n={p:n};else if(qt(e)&&!qt(n)){for(l=[],h=e.length,d=h-2,a=1;a<h;a++)l.push(t(e[a-1],e[a]));h--,s=function(t){t*=h;var e=Math.min(d,~~t);return l[e](t-e)},i=n}else r||(e=Me(qt(e)?[]:{},e));if(!l){for(o in n)Yn.call(u,e,o,"get",n[o]);s=function(t){return ai(t,u)||(p?e.p:e)}}}return Je(i,s)},shuffle:on},install:ne,effects:de,ticker:kn,updateRoot:Nn.updateRoot,plugins:he,globalTimeline:nt,core:{PropTween:ui,globals:re,Tween:Wn,Timeline:Nn,Animation:In,getCache:me,_removeLinkedListItem:Le,suppressOverwrites:function(t){return et=t}}};ge("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return ci[t]=Wn[t]})),kn.add(Nn.updateRoot),lt=ci.to({},{duration:0});var vi=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},mi=function(t,e){return{name:t,rawVars:1,init:function(t,n,i){i._onInit=function(t){var i,r;if(Ut(n)&&(i={},ge(n,(function(t){return i[t]=1})),n=i),e){for(r in i={},n)i[r]=e(n[r]);n=i}!function(t,e){var n,i,r,s=t._targets;for(n in e)for(i=s.length;i--;)(r=t._ptLookup[i][n])&&(r=r.d)&&(r._pt&&(r=vi(r,n)),r&&r.modifier&&r.modifier(e[n],t,s[i],n))}(t,n)}}}},fi=ci.registerPlugin({name:"attr",init:function(t,e,n,i,r){var s,o;for(s in e)(o=this.add(t,"setAttribute",(t.getAttribute(s)||0)+"",e[s],i,r,0,0,s))&&(o.op=s),this._props.push(s)}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n])}},mi("roundProps",ln),mi("modifiers"),mi("snap",hn))||ci;Wn.version=Nn.version=fi.version="3.10.4",ot=1,Kt()&&Mn(),Tn.Power0,Tn.Power1,Tn.Power2,Tn.Power3,Tn.Power4,Tn.Linear,Tn.Quad,Tn.Cubic,Tn.Quart,Tn.Quint,Tn.Strong,Tn.Elastic,Tn.Back,Tn.SteppedEase,Tn.Bounce,Tn.Sine,Tn.Expo,Tn.Circ;
/*!
 * CSSPlugin 3.10.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var gi,bi,_i,wi,xi,yi,Ci,Pi={},Ei=180/Math.PI,ki=Math.PI/180,Mi=Math.atan2,Ti=/([A-Z])/g,Si=/(left|right|width|margin|padding|x)/i,Vi=/[\s,\(]\S/,Ai={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Li=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Di=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Oi=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},Ri=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},ji=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Ui=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Bi=function(t,e,n){return t.style[e]=n},zi=function(t,e,n){return t.style.setProperty(e,n)},Ii=function(t,e,n){return t._gsap[e]=n},Ni=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},Fi=function(t,e,n,i,r){var s=t._gsap;s.scaleX=s.scaleY=n,s.renderTransform(r,s)},Ki=function(t,e,n,i,r){var s=t._gsap;s[e]=n,s.renderTransform(r,s)},Hi="transform",Yi=Hi+"Origin",qi=function(t,e){var n=bi.createElementNS?bi.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):bi.createElement(t);return n.style?n:bi.createElement(t)},$i=function t(e,n,i){var r=getComputedStyle(e);return r[n]||r.getPropertyValue(n.replace(Ti,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&t(e,Gi(n)||n,1)||""},Xi="O,Moz,ms,Ms,Webkit".split(","),Gi=function(t,e,n){var i=(e||xi).style,r=5;if(t in i&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(Xi[r]+t in i););return r<0?null:(3===r?"ms":r>=0?Xi[r]:"")+t},Qi=function(){"undefined"!=typeof window&&window.document&&(gi=window,bi=gi.document,_i=bi.documentElement,xi=qi("div")||{style:{}},qi("div"),Hi=Gi(Hi),Yi=Hi+"Origin",xi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ci=!!Gi("perspective"),wi=1)},Zi=function t(e){var n,i=qi("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,s=this.nextSibling,o=this.style.cssText;if(_i.appendChild(i),i.appendChild(this),this.style.display="block",e)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(a){}else this._gsapBBox&&(n=this._gsapBBox());return r&&(s?r.insertBefore(this,s):r.appendChild(this)),_i.removeChild(i),this.style.cssText=o,n},Wi=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},Ji=function(t){var e;try{e=t.getBBox()}catch(n){e=Zi.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Zi||(e=Zi.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+Wi(t,["x","cx","x1"])||0,y:+Wi(t,["y","cy","y1"])||0,width:0,height:0}},tr=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Ji(t))},er=function(t,e){if(e){var n=t.style;e in Pi&&e!==Yi&&(e=Hi),n.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty(e.replace(Ti,"-$1").toLowerCase())):n.removeAttribute(e)}},nr=function(t,e,n,i,r,s){var o=new ui(t._pt,e,n,0,1,s?Ui:ji);return t._pt=o,o.b=i,o.e=r,t._props.push(n),o},ir={deg:1,rad:1,turn:1},rr=function t(e,n,i,r){var s,o,a,l,h=parseFloat(i)||0,d=(i+"").trim().substr((h+"").length)||"px",p=xi.style,u=Si.test(n),c="svg"===e.tagName.toLowerCase(),v=(c?"client":"offset")+(u?"Width":"Height"),m=100,f="px"===r,g="%"===r;return r===d||!h||ir[r]||ir[d]?h:("px"!==d&&!f&&(h=t(e,n,i,"px")),l=e.getCTM&&tr(e),!g&&"%"!==d||!Pi[n]&&!~n.indexOf("adius")?(p[u?"width":"height"]=m+(f?d:r),o=~n.indexOf("adius")||"em"===r&&e.appendChild&&!c?e:e.parentNode,l&&(o=(e.ownerSVGElement||{}).parentNode),o&&o!==bi&&o.appendChild||(o=bi.body),(a=o._gsap)&&g&&a.width&&u&&a.time===kn.time?be(h/a.width*m):((g||"%"===d)&&(p.position=$i(e,"position")),o===e&&(p.position="static"),o.appendChild(xi),s=xi[v],o.removeChild(xi),p.position="absolute",u&&g&&((a=me(o)).time=kn.time,a.width=o[v]),be(f?s*h/m:s&&h?m/s*h:0))):(s=l?e.getBBox()[u?"width":"height"]:e[v],be(g?h/s*m:h/100*s)))},sr=function(t,e,n,i){var r;return wi||Qi(),e in Ai&&"transform"!==e&&~(e=Ai[e]).indexOf(",")&&(e=e.split(",")[0]),Pi[e]&&"transform"!==e?(r=fr(t,i),r="transformOrigin"!==e?r[e]:r.svg?r.origin:gr($i(t,Yi))+" "+r.zOrigin+"px"):(!(r=t.style[e])||"auto"===r||i||~(r+"").indexOf("calc("))&&(r=hr[e]&&hr[e](t,e,n)||$i(t,e)||fe(t,e)||("opacity"===e?1:0)),n&&!~(r+"").trim().indexOf(" ")?rr(t,e,r,n)+n:r},or=function(t,e,n,i){if(!n||"none"===n){var r=Gi(e,t,1),s=r&&$i(t,r,1);s&&s!==n?(e=r,n=s):"borderColor"===e&&(n=$i(t,"borderTopColor"))}var o,a,l,h,d,p,u,c,v,m,f,g=new ui(this._pt,t.style,e,0,1,oi),b=0,_=0;if(g.b=n,g.e=i,n+="","auto"===(i+="")&&(t.style[e]=i,i=$i(t,e)||i,t.style[e]=n),En(o=[n,i]),i=o[1],l=(n=o[0]).match(Gt)||[],(i.match(Gt)||[]).length){for(;a=Gt.exec(i);)u=a[0],v=i.substring(b,a.index),d?d=(d+1)%5:"rgba("!==v.substr(-5)&&"hsla("!==v.substr(-5)||(d=1),u!==(p=l[_++]||"")&&(h=parseFloat(p)||0,f=p.substr((h+"").length),"="===u.charAt(1)&&(u=we(h,u)+f),c=parseFloat(u),m=u.substr((c+"").length),b=Gt.lastIndex-m.length,m||(m=m||St.units[e]||f,b===i.length&&(i+=m,g.e+=m)),f!==m&&(h=rr(t,e,p,m)||0),g._pt={_next:g._pt,p:v||1===_?v:",",s:h,c:c-h,m:d&&d<4||"zIndex"===e?Math.round:0});g.c=b<i.length?i.substring(b,i.length):""}else g.r="display"===e&&"none"===i?Ui:ji;return Zt.test(i)&&(g.e=0),this._pt=g,g},ar={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},lr=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,i,r,s=e.t,o=s.style,a=e.u,l=s._gsap;if("all"===a||!0===a)o.cssText="",i=1;else for(r=(a=a.split(",")).length;--r>-1;)n=a[r],Pi[n]&&(i=1,n="transformOrigin"===n?Yi:Hi),er(s,n);i&&(er(s,Hi),l&&(l.svg&&s.removeAttribute("transform"),fr(s,1),l.uncache=1))}},hr={clearProps:function(t,e,n,i,r){if("isFromStart"!==r.data){var s=t._pt=new ui(t._pt,e,n,0,0,lr);return s.u=i,s.pr=-10,s.tween=r,t._props.push(n),1}}},dr=[1,0,0,1,0,0],pr={},ur=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},cr=function(t){var e=$i(t,Hi);return ur(e)?dr:e.substr(7).match(Xt).map(be)},vr=function(t,e){var n,i,r,s,o=t._gsap||me(t),a=t.style,l=cr(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?dr:l:(l!==dr||t.offsetParent||t===_i||o.svg||(r=a.display,a.display="block",(n=t.parentNode)&&t.offsetParent||(s=1,i=t.nextSibling,_i.appendChild(t)),l=cr(t),r?a.display=r:er(t,"display"),s&&(i?n.insertBefore(t,i):n?n.appendChild(t):_i.removeChild(t))),e&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},mr=function(t,e,n,i,r,s){var o,a,l,h=t._gsap,d=r||vr(t,!0),p=h.xOrigin||0,u=h.yOrigin||0,c=h.xOffset||0,v=h.yOffset||0,m=d[0],f=d[1],g=d[2],b=d[3],_=d[4],w=d[5],x=e.split(" "),y=parseFloat(x[0])||0,C=parseFloat(x[1])||0;n?d!==dr&&(a=m*b-f*g)&&(l=y*(-f/a)+C*(m/a)-(m*w-f*_)/a,y=y*(b/a)+C*(-g/a)+(g*w-b*_)/a,C=l):(y=(o=Ji(t)).x+(~x[0].indexOf("%")?y/100*o.width:y),C=o.y+(~(x[1]||x[0]).indexOf("%")?C/100*o.height:C)),i||!1!==i&&h.smooth?(_=y-p,w=C-u,h.xOffset=c+(_*m+w*g)-_,h.yOffset=v+(_*f+w*b)-w):h.xOffset=h.yOffset=0,h.xOrigin=y,h.yOrigin=C,h.smooth=!!i,h.origin=e,h.originIsAbsolute=!!n,t.style[Yi]="0px 0px",s&&(nr(s,h,"xOrigin",p,y),nr(s,h,"yOrigin",u,C),nr(s,h,"xOffset",c,h.xOffset),nr(s,h,"yOffset",v,h.yOffset)),t.setAttribute("data-svg-origin",y+" "+C)},fr=function(t,e){var n=t._gsap||new zn(t);if("x"in n&&!e&&!n.uncache)return n;var i,r,s,o,a,l,h,d,p,u,c,v,m,f,g,b,_,w,x,y,C,P,E,k,M,T,S,V,A,L,D,O,R=t.style,j=n.scaleX<0,U="px",B="deg",z=$i(t,Yi)||"0";return i=r=s=l=h=d=p=u=c=0,o=a=1,n.svg=!(!t.getCTM||!tr(t)),f=vr(t,n.svg),n.svg&&(k=(!n.uncache||"0px 0px"===z)&&!e&&t.getAttribute("data-svg-origin"),mr(t,k||z,!!k||n.originIsAbsolute,!1!==n.smooth,f)),v=n.xOrigin||0,m=n.yOrigin||0,f!==dr&&(w=f[0],x=f[1],y=f[2],C=f[3],i=P=f[4],r=E=f[5],6===f.length?(o=Math.sqrt(w*w+x*x),a=Math.sqrt(C*C+y*y),l=w||x?Mi(x,w)*Ei:0,(p=y||C?Mi(y,C)*Ei+l:0)&&(a*=Math.abs(Math.cos(p*ki))),n.svg&&(i-=v-(v*w+m*y),r-=m-(v*x+m*C))):(O=f[6],L=f[7],S=f[8],V=f[9],A=f[10],D=f[11],i=f[12],r=f[13],s=f[14],h=(g=Mi(O,A))*Ei,g&&(k=P*(b=Math.cos(-g))+S*(_=Math.sin(-g)),M=E*b+V*_,T=O*b+A*_,S=P*-_+S*b,V=E*-_+V*b,A=O*-_+A*b,D=L*-_+D*b,P=k,E=M,O=T),d=(g=Mi(-y,A))*Ei,g&&(b=Math.cos(-g),D=C*(_=Math.sin(-g))+D*b,w=k=w*b-S*_,x=M=x*b-V*_,y=T=y*b-A*_),l=(g=Mi(x,w))*Ei,g&&(k=w*(b=Math.cos(g))+x*(_=Math.sin(g)),M=P*b+E*_,x=x*b-w*_,E=E*b-P*_,w=k,P=M),h&&Math.abs(h)+Math.abs(l)>359.9&&(h=l=0,d=180-d),o=be(Math.sqrt(w*w+x*x+y*y)),a=be(Math.sqrt(E*E+O*O)),g=Mi(P,E),p=Math.abs(g)>2e-4?g*Ei:0,c=D?1/(D<0?-D:D):0),n.svg&&(k=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!ur($i(t,Hi)),k&&t.setAttribute("transform",k))),Math.abs(p)>90&&Math.abs(p)<270&&(j?(o*=-1,p+=l<=0?180:-180,l+=l<=0?180:-180):(a*=-1,p+=p<=0?180:-180)),e=e||n.uncache,n.x=i-((n.xPercent=i&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+U,n.y=r-((n.yPercent=r&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+U,n.z=s+U,n.scaleX=be(o),n.scaleY=be(a),n.rotation=be(l)+B,n.rotationX=be(h)+B,n.rotationY=be(d)+B,n.skewX=p+B,n.skewY=u+B,n.transformPerspective=c+U,(n.zOrigin=parseFloat(z.split(" ")[2])||0)&&(R[Yi]=gr(z)),n.xOffset=n.yOffset=0,n.force3D=St.force3D,n.renderTransform=n.svg?xr:Ci?wr:_r,n.uncache=0,n},gr=function(t){return(t=t.split(" "))[0]+" "+t[1]},br=function(t,e,n){var i=en(e);return be(parseFloat(e)+parseFloat(rr(t,"x",n+"px",i)))+i},_r=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,wr(t,e)},wr=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,s=n.x,o=n.y,a=n.z,l=n.rotation,h=n.rotationY,d=n.rotationX,p=n.skewX,u=n.skewY,c=n.scaleX,v=n.scaleY,m=n.transformPerspective,f=n.force3D,g=n.target,b=n.zOrigin,_="",w="auto"===f&&t&&1!==t||!0===f;if(b&&("0deg"!==d||"0deg"!==h)){var x,y=parseFloat(h)*ki,C=Math.sin(y),P=Math.cos(y);y=parseFloat(d)*ki,x=Math.cos(y),s=br(g,s,C*x*-b),o=br(g,o,-Math.sin(y)*-b),a=br(g,a,P*x*-b+b)}"0px"!==m&&(_+="perspective("+m+") "),(i||r)&&(_+="translate("+i+"%, "+r+"%) "),(w||"0px"!==s||"0px"!==o||"0px"!==a)&&(_+="0px"!==a||w?"translate3d("+s+", "+o+", "+a+") ":"translate("+s+", "+o+") "),"0deg"!==l&&(_+="rotate("+l+") "),"0deg"!==h&&(_+="rotateY("+h+") "),"0deg"!==d&&(_+="rotateX("+d+") "),"0deg"===p&&"0deg"===u||(_+="skew("+p+", "+u+") "),1===c&&1===v||(_+="scale("+c+", "+v+") "),g.style[Hi]=_||"translate(0, 0)"},xr=function(t,e){var n,i,r,s,o,a=e||this,l=a.xPercent,h=a.yPercent,d=a.x,p=a.y,u=a.rotation,c=a.skewX,v=a.skewY,m=a.scaleX,f=a.scaleY,g=a.target,b=a.xOrigin,_=a.yOrigin,w=a.xOffset,x=a.yOffset,y=a.forceCSS,C=parseFloat(d),P=parseFloat(p);u=parseFloat(u),c=parseFloat(c),(v=parseFloat(v))&&(c+=v=parseFloat(v),u+=v),u||c?(u*=ki,c*=ki,n=Math.cos(u)*m,i=Math.sin(u)*m,r=Math.sin(u-c)*-f,s=Math.cos(u-c)*f,c&&(v*=ki,o=Math.tan(c-v),r*=o=Math.sqrt(1+o*o),s*=o,v&&(o=Math.tan(v),n*=o=Math.sqrt(1+o*o),i*=o)),n=be(n),i=be(i),r=be(r),s=be(s)):(n=m,s=f,i=r=0),(C&&!~(d+"").indexOf("px")||P&&!~(p+"").indexOf("px"))&&(C=rr(g,"x",d,"px"),P=rr(g,"y",p,"px")),(b||_||w||x)&&(C=be(C+b-(b*n+_*r)+w),P=be(P+_-(b*i+_*s)+x)),(l||h)&&(o=g.getBBox(),C=be(C+l/100*o.width),P=be(P+h/100*o.height)),o="matrix("+n+","+i+","+r+","+s+","+C+","+P+")",g.setAttribute("transform",o),y&&(g.style[Hi]=o)},yr=function(t,e,n,i,r){var s,o,a=360,l=Ut(r),h=parseFloat(r)*(l&&~r.indexOf("rad")?Ei:1)-i,d=i+h+"deg";return l&&("short"===(s=r.split("_")[1])&&(h%=a)!==h%180&&(h+=h<0?a:-360),"cw"===s&&h<0?h=(h+36e9)%a-~~(h/a)*a:"ccw"===s&&h>0&&(h=(h-36e9)%a-~~(h/a)*a)),t._pt=o=new ui(t._pt,e,n,i,h,Di),o.e=d,o.u="deg",t._props.push(n),o},Cr=function(t,e){for(var n in e)t[n]=e[n];return t},Pr=function(t,e,n){var i,r,s,o,a,l,h,d=Cr({},n._gsap),p=n.style;for(r in d.svg?(s=n.getAttribute("transform"),n.setAttribute("transform",""),p[Hi]=e,i=fr(n,1),er(n,Hi),n.setAttribute("transform",s)):(s=getComputedStyle(n)[Hi],p[Hi]=e,i=fr(n,1),p[Hi]=s),Pi)(s=d[r])!==(o=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(a=en(s)!==(h=en(o))?rr(n,r,s,h):parseFloat(s),l=parseFloat(o),t._pt=new ui(t._pt,i,r,a,l-a,Li),t._pt.u=h||0,t._props.push(r));Cr(i,d)};ge("padding,margin,Width,Radius",(function(t,e){var n="Top",i="Right",r="Bottom",s="Left",o=(e<3?[n,i,r,s]:[n+s,n+i,r+i,r+s]).map((function(n){return e<2?t+n:"border"+n+t}));hr[e>1?"border"+t:t]=function(t,e,n,i,r){var s,a;if(arguments.length<4)return s=o.map((function(e){return sr(t,e,n)})),5===(a=s.join(" ")).split(s[0]).length?s[0]:a;s=(i+"").split(" "),a={},o.forEach((function(t,e){return a[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,a,r)}}));var Er,kr,Mr,Tr={name:"css",register:Qi,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,i,r){var s,o,a,l,h,d,p,u,c,v,m,f,g,b,_,w,x,y,C,P=this._props,E=t.style,k=n.vars.startAt;for(p in wi||Qi(),e)if("autoRound"!==p&&(o=e[p],!he[p]||!qn(p,e,n,i,t,r)))if(h=typeof o,d=hr[p],"function"===h&&(h=typeof(o=o.call(n,i,t,r))),"string"===h&&~o.indexOf("random(")&&(o=un(o)),d)d(this,t,p,o,n)&&(_=1);else if("--"===p.substr(0,2))s=(getComputedStyle(t).getPropertyValue(p)+"").trim(),o+="",Cn.lastIndex=0,Cn.test(s)||(u=en(s),c=en(o)),c?u!==c&&(s=rr(t,p,s,c)+c):u&&(o+=u),this.add(E,"setProperty",s,o,i,r,0,0,p),P.push(p);else if("undefined"!==h){if(k&&p in k?(s="function"==typeof k[p]?k[p].call(n,i,t,r):k[p],Ut(s)&&~s.indexOf("random(")&&(s=un(s)),en(s+"")||(s+=St.units[p]||en(sr(t,p))||""),"="===(s+"").charAt(1)&&(s=sr(t,p))):s=sr(t,p),l=parseFloat(s),(v="string"===h&&"="===o.charAt(1)&&o.substr(0,2))&&(o=o.substr(2)),a=parseFloat(o),p in Ai&&("autoAlpha"===p&&(1===l&&"hidden"===sr(t,"visibility")&&a&&(l=0),nr(this,E,"visibility",l?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==p&&"transform"!==p&&~(p=Ai[p]).indexOf(",")&&(p=p.split(",")[0])),m=p in Pi)if(f||((g=t._gsap).renderTransform&&!e.parseTransform||fr(t,e.parseTransform),b=!1!==e.smoothOrigin&&g.smooth,(f=this._pt=new ui(this._pt,E,Hi,0,1,g.renderTransform,g,0,-1)).dep=1),"scale"===p)this._pt=new ui(this._pt,g,"scaleY",g.scaleY,(v?we(g.scaleY,v+a):a)-g.scaleY||0),P.push("scaleY",p),p+="X";else{if("transformOrigin"===p){x=void 0,y=void 0,C=void 0,x=(w=o).split(" "),y=x[0],C=x[1]||"50%","top"!==y&&"bottom"!==y&&"left"!==C&&"right"!==C||(w=y,y=C,C=w),x[0]=ar[y]||y,x[1]=ar[C]||C,o=x.join(" "),g.svg?mr(t,o,0,b,0,this):((c=parseFloat(o.split(" ")[2])||0)!==g.zOrigin&&nr(this,g,"zOrigin",g.zOrigin,c),nr(this,E,p,gr(s),gr(o)));continue}if("svgOrigin"===p){mr(t,o,1,b,0,this);continue}if(p in pr){yr(this,g,p,l,v?we(l,v+o):o);continue}if("smoothOrigin"===p){nr(this,g,"smooth",g.smooth,o);continue}if("force3D"===p){g[p]=o;continue}if("transform"===p){Pr(this,o,t);continue}}else p in E||(p=Gi(p)||p);if(m||(a||0===a)&&(l||0===l)&&!Vi.test(o)&&p in E)a||(a=0),(u=(s+"").substr((l+"").length))!==(c=en(o)||(p in St.units?St.units[p]:u))&&(l=rr(t,p,s,c)),this._pt=new ui(this._pt,m?g:E,p,l,(v?we(l,v+a):a)-l,m||"px"!==c&&"zIndex"!==p||!1===e.autoRound?Li:Ri),this._pt.u=c||0,u!==c&&"%"!==c&&(this._pt.b=s,this._pt.r=Oi);else if(p in E)or.call(this,t,p,s,v?v+o:o);else{if(!(p in t))continue;this.add(t,p,s||t[p],v?v+o:o,i,r)}P.push(p)}_&&pi(this)},get:sr,aliases:Ai,getSetter:function(t,e,n){var i=Ai[e];return i&&i.indexOf(",")<0&&(e=i),e in Pi&&e!==Yi&&(t._gsap.x||sr(t,"x"))?n&&yi===n?"scale"===e?Ni:Ii:(yi=n||{})&&("scale"===e?Fi:Ki):t.style&&!It(t.style[e])?Bi:~e.indexOf("-")?zi:ii(t,e)},core:{_removeProperty:er,_getMatrix:vr}};fi.utils.checkPrefix=Gi,Mr=ge((Er="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(kr="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){Pi[t]=1})),ge(kr,(function(t){St.units[t]="deg",pr[t]=1})),Ai[Mr[13]]=Er+","+kr,ge("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");Ai[e[1]]=Mr[e[0]]})),ge("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){St.units[t]="px"})),fi.registerPlugin(Tr);var Sr=fi.registerPlugin(Tr)||fi;Sr.core.Tween;var Vr,Ar={exports:{}},Lr=Ar.exports=(Vr=function(){function t(t){return i.appendChild(t.dom),t}function e(t){for(var e=0;e<i.children.length;e++)i.children[e].style.display=e===t?"block":"none";n=t}var n=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(t){t.preventDefault(),e(++n%i.children.length)}),!1);var r=(performance||Date).now(),s=r,o=0,a=t(new Vr.Panel("FPS","#0ff","#002")),l=t(new Vr.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=t(new Vr.Panel("MB","#f08","#201"));return e(0),{REVISION:16,dom:i,addPanel:t,showPanel:e,begin:function(){r=(performance||Date).now()},end:function(){o++;var t=(performance||Date).now();if(l.update(t-r,200),t>s+1e3&&(a.update(1e3*o/(t-s),100),s=t,o=0,h)){var e=performance.memory;h.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){r=this.end()},domElement:i,setMode:e}},Vr.Panel=function(t,e,n){var i=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),a=80*o,l=48*o,h=3*o,d=2*o,p=3*o,u=15*o,c=74*o,v=30*o,m=document.createElement("canvas");m.width=a,m.height=l,m.style.cssText="width:80px;height:48px";var f=m.getContext("2d");return f.font="bold "+9*o+"px Helvetica,Arial,sans-serif",f.textBaseline="top",f.fillStyle=n,f.fillRect(0,0,a,l),f.fillStyle=e,f.fillText(t,h,d),f.fillRect(p,u,c,v),f.fillStyle=n,f.globalAlpha=.9,f.fillRect(p,u,c,v),{dom:m,update:function(l,g){i=Math.min(i,l),r=Math.max(r,l),f.fillStyle=n,f.globalAlpha=1,f.fillRect(0,0,a,u),f.fillStyle=e,f.fillText(s(l)+" "+t+" ("+s(i)+"-"+s(r)+")",h,d),f.drawImage(m,p+o,u,c-o,v,p,u,c-o,v),f.fillRect(p+c-o,u,o,v),f.fillStyle=n,f.globalAlpha=.9,f.fillRect(p+c-o,u,o,s((1-l/g)*v))}}},Vr),Dr={exports:{}};!function(t){class e{constructor(t){const[e,n]=t.split("-"),i=e.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=null!=n?n:null}toString(){const t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}class n{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class i{constructor(t){this.target=t}}class r extends i{constructor(t,e,n,i){super(t),this.value=e,this.presetKey=n,this.last=null==i||i}}class s extends i{constructor(t,e,n){super(t),this.value=e,this.presetKey=n}}class o extends i{constructor(t,e){super(t),this.expanded=e}}function a(t){return t}function l(t){return null==t}function h(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const d={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class p{constructor(t){var e;this.message=null!==(e=d[t.type](a(t.context)))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}static alreadyDisposed(){return new p({type:"alreadydisposed"})}static notBindable(){return new p({type:"notbindable"})}static propertyNotFound(t){return new p({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new p({type:"shouldneverhappen"})}}class u{constructor(t,e,n){this.obj_=t,this.key_=e,this.presetKey_=null!=n?n:e}static isBindable(t){return null!==t&&"object"==typeof t}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(t){this.obj_[this.key_]=t}writeProperty(t,e){const n=this.read();if(!u.isBindable(n))throw p.notBindable();if(!(t in n))throw p.propertyNotFound(t);n[t]=e}}class c extends n{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get title(){var t;return null!==(t=this.controller_.valueController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.valueController.props.set("title",t)}on(t,e){const n=e.bind(this);return this.controller_.valueController.emitter.on(t,(()=>{n(new i(this))})),this}}class v{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter((t=>t.handler!==e))),this}emit(t,e){const n=this.observers_[t];n&&n.forEach((t=>{t.handler(e)}))}}const m="tp";function f(t){return(e,n)=>[m,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}function g(t,e){return n=>e(t(n))}function b(t){return t.rawValue}function _(t,e){t.emitter.on("change",g(b,e)),e(t.rawValue)}function w(t,e,n){_(t.value(e),n)}function x(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function y(t,e){return n=>{x(t,e,n)}}function C(t,e){_(t,(t=>{e.textContent=null!=t?t:""}))}const P=f("btn");class E{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(P()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(P("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(P("t")),C(e.props.value("title"),i),this.buttonElement.appendChild(i)}}class k{constructor(t,e){this.emitter=new v,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new E(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class M{constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new v,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(t):t;(!this.equals_(this.rawValue_,i)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:n,rawValue:i,sender:this}))}}class T{constructor(t){this.emitter=new v,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0};(this.value_!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,rawValue:this.value_,sender:this}))}}function S(t,e){const n=null==e?void 0:e.constraint,i=null==e?void 0:e.equals;return n||i?new M(t,e):new T(t)}class V{constructor(t){this.emitter=new v,this.valMap_=t;for(const e in this.valMap_)this.valMap_[e].emitter.on("change",(()=>{this.emitter.emit("change",{key:e,sender:this})}))}static createCore(t){return Object.keys(t).reduce(((e,n)=>Object.assign(e,{[n]:S(t[n])})),{})}static fromObject(t){const e=this.createCore(t);return new V(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function A(t,e){return a(Object.keys(e).reduce(((n,i)=>{if(void 0===n)return;const r=(0,e[i])(t[i]);return r.succeeded?Object.assign(Object.assign({},n),{[i]:r.value}):void 0}),{}))}function L(t,e){return t.reduce(((t,n)=>{if(void 0===t)return;const i=e(n);return i.succeeded&&void 0!==i.value?[...t,i.value]:void 0}),[])}function D(t){return null!==t&&"object"==typeof t}function O(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const i=t(n);return void 0!==i?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function R(t){return{custom:e=>O(e)(t),boolean:O((t=>"boolean"==typeof t?t:void 0))(t),number:O((t=>"number"==typeof t?t:void 0))(t),string:O((t=>"string"==typeof t?t:void 0))(t),function:O((t=>"function"==typeof t?t:void 0))(t),constant:e=>O((t=>t===e?e:void 0))(t),raw:O((t=>t))(t),object:e=>O((t=>{if(D(t))return A(t,e)}))(t),array:e=>O((t=>{if(Array.isArray(t))return L(t,e)}))(t)}}const j={optional:R(!0),required:R(!1)};function U(t,e){const n=j.required.object(e)(t);return n.succeeded?n.value:void 0}function B(t){return t&&t.parentElement&&t.parentElement.removeChild(t),null}function z(){return["veryfirst","first","last","verylast"]}const I=f(""),N={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class F{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",(()=>{z().forEach((t=>{e.classList.remove(I(void 0,N[t]))})),this.blade.get("positions").forEach((t=>{e.classList.add(I(void 0,N[t]))}))})),this.viewProps.handleDispose((()=>{B(e)}))}get parent(){return this.parent_}}const K="http://www.w3.org/2000/svg";function H(t){t.offsetHeight}function Y(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function q(t){return void 0!==t.ontouchstart}function $(){return new Function("return this")()}function X(){return a($()).document}function G(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d"):null}const Q={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Z(t,e){const n=t.createElementNS(K,"svg");return n.innerHTML=Q[e],n}function W(t,e,n){t.insertBefore(e,t.children[n])}function J(t){t.parentElement&&t.parentElement.removeChild(t)}function tt(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function et(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function nt(t){return t.relatedTarget?a(t.relatedTarget):"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}const it=f("lbl");function rt(t,e){const n=t.createDocumentFragment();return e.split("\n").map((e=>t.createTextNode(e))).forEach(((e,i)=>{i>0&&n.appendChild(t.createElement("br")),n.appendChild(e)})),n}class st{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(it()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(it("l")),w(e.props,"label",(e=>{l(e)?this.element.classList.add(it(void 0,"nol")):(this.element.classList.remove(it(void 0,"nol")),et(n),n.appendChild(rt(t,e)))})),this.element.appendChild(n),this.labelElement=n;const i=t.createElement("div");i.classList.add(it("v")),this.element.appendChild(i),this.valueElement=i}}class ot extends F{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{view:new st(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const at={id:"button",type:"blade",accept(t){const e=j,n=U(t,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return n?{params:n}:null},controller:t=>new ot(t.document,{blade:t.blade,props:V.fromObject({label:t.params.label}),valueController:new k(t.document,{props:V.fromObject({title:t.params.title}),viewProps:t.viewProps})}),api:t=>t.controller instanceof ot&&t.controller.valueController instanceof k?new c(t.controller):null};class lt extends F{constructor(t){super(t),this.value=t.value}}function ht(){return new V({positions:S([],{equals:h})})}class dt extends V{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=V.createCore(e);return new dt(n)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!l(t)?`${t}px`:"auto"}bindExpandedClass(t,e){const n=()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)};w(this,"expanded",n),w(this,"temporaryExpanded",n)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function pt(t,e){let n=0;return Y(e,(()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),H(e),n=e.clientHeight,t.set("temporaryExpanded",null),H(e)})),n}function ut(t,e){e.style.height=t.styleHeight}function ct(t,e){t.value("expanded").emitter.on("beforechange",(()=>{t.set("completed",!1),l(t.get("expandedHeight"))&&t.set("expandedHeight",pt(t,e)),t.set("shouldFixHeight",!0),H(e)})),t.emitter.on("change",(()=>{ut(t,e)})),ut(t,e),e.addEventListener("transitionend",(e=>{"height"===e.propertyName&&t.cleanUpTransition()}))}class vt extends n{constructor(t,e){super(t),this.rackApi_=e}}function mt(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function ft(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function gt(t,e){const n=e||{};return t.addBlade(Object.assign(Object.assign({},n),{view:"separator"}))}function bt(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}class _t{constructor(t){this.emitter=new v,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw p.shouldNeverHappen();const n=void 0!==e?e:this.items_.length;this.items_.splice(n,0,t),this.cache_.add(t);const i=this.extract_(t);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach((t=>{this.cache_.add(t)}))),this.emitter.emit("add",{index:n,item:t,root:this,target:this})}remove(t){const e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);const n=this.extract_(t);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}class wt extends n{constructor(t){super(t),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new v,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingChange_(t){const e=t.sender.target.read();this.emitter_.emit("change",{event:new r(this,a(e),this.controller_.binding.target.presetKey,t.options.last)})}}class xt extends ot{constructor(t,e){super(t,e),this.binding=e.binding}}class yt extends n{constructor(t){super(t),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new v,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(t){const e=t.sender.target.read();this.emitter_.emit("update",{event:new s(this,a(e),this.controller_.binding.target.presetKey)})}}class Ct extends ot{constructor(t,e){super(t,e),this.binding=e.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose((()=>{this.binding.dispose()}))}}function Pt(t){return t instanceof Mt?t.apiSet_:t instanceof vt?t.rackApi_.apiSet_:null}function Et(t,e){const n=t.find((t=>t.controller_===e));if(!n)throw p.shouldNeverHappen();return n}function kt(t,e,n){if(!u.isBindable(t))throw p.notBindable();return new u(t,e,n)}class Mt extends n{constructor(t,e){super(t),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new v,this.apiSet_=new _t(Pt),this.pool_=e;const n=this.controller_.rack;n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),n.emitter.on("inputchange",this.onRackInputChange_),n.emitter.on("monitorupdate",this.onRackMonitorUpdate_),n.children.forEach((t=>{this.setUpApi_(t)}))}get children(){return this.controller_.rack.children.map((t=>Et(this.apiSet_,t)))}addInput(t,e,n){const i=n||{},r=this.controller_.view.element.ownerDocument,s=this.pool_.createInput(r,kt(t,e,i.presetKey),i),o=new wt(s);return this.add(o,i.index)}addMonitor(t,e,n){const i=n||{},r=this.controller_.view.element.ownerDocument,s=this.pool_.createMonitor(r,kt(t,e),i),o=new yt(s);return a(this.add(o,i.index))}addFolder(t){return ft(this,t)}addButton(t){return mt(this,t)}addSeparator(t){return gt(this,t)}addTab(t){return bt(this,t)}add(t,e){this.controller_.rack.add(t.controller_,e);const n=this.apiSet_.find((e=>e.controller_===t.controller_));return n&&this.apiSet_.remove(n),this.apiSet_.add(t),t}remove(t){this.controller_.rack.remove(t.controller_)}addBlade(t){const e=this.controller_.view.element.ownerDocument,n=this.pool_.createBlade(e,t),i=this.pool_.createBladeApi(n);return this.add(i,t.index)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}setUpApi_(t){this.apiSet_.find((e=>e.controller_===t))||this.apiSet_.add(this.pool_.createBladeApi(t))}onRackAdd_(t){this.setUpApi_(t.bladeController)}onRackRemove_(t){if(t.isRoot){const e=Et(this.apiSet_,t.bladeController);this.apiSet_.remove(e)}}onRackInputChange_(t){const e=t.bladeController;if(e instanceof xt){const n=Et(this.apiSet_,e),i=e.binding;this.emitter_.emit("change",{event:new r(n,a(i.target.read()),i.target.presetKey,t.options.last)})}else if(e instanceof lt){const n=Et(this.apiSet_,e);this.emitter_.emit("change",{event:new r(n,e.value.rawValue,void 0,t.options.last)})}}onRackMonitorUpdate_(t){if(!(t.bladeController instanceof Ct))throw p.shouldNeverHappen();const e=Et(this.apiSet_,t.bladeController),n=t.bladeController.binding;this.emitter_.emit("update",{event:new s(e,a(n.target.read()),n.target.presetKey)})}}class Tt extends vt{constructor(t,e){super(t,new Mt(t.rackController,e)),this.emitter_=new v,this.controller_.foldable.value("expanded").emitter.on("change",(t=>{this.emitter_.emit("fold",{event:new o(this,t.sender.rawValue)})})),this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})}))}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(t){this.controller_.foldable.set("expanded",t)}get title(){return this.controller_.props.get("title")}set title(t){this.controller_.props.set("title",t)}get children(){return this.rackApi_.children}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class St extends F{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}}class Vt{constructor(t,e){const n=f(e.viewName);this.element=t.createElement("div"),this.element.classList.add(n()),e.viewProps.bindClassModifiers(this.element)}}function At(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(i instanceof xt&&i.binding===e)return i}return null}function Lt(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(i instanceof Ct&&i.binding===e)return i}return null}function Dt(t,e){for(let n=0;n<t.length;n++){const i=t[n];if(i instanceof lt&&i.value===e)return i}return null}function Ot(t){return t instanceof Ut?t.rack:t instanceof St?t.rackController.rack:null}function Rt(t){const e=Ot(t);return e?e.bcSet_:null}class jt{constructor(t){var e;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new v,this.blade_=null!=t?t:null,null===(e=this.blade_)||void 0===e||e.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new _t(Rt),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,e){t.parent&&t.parent.remove(t),t.parent_=this,this.bcSet_.add(t,e)}remove(t){t.parent_=null,this.bcSet_.remove(t)}find(t){return a(this.bcSet_.allItems().filter((e=>e instanceof t)))}onSetAdd_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,isRoot:e,sender:this}),!e)return;const n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),n instanceof xt)n.binding.emitter.on("change",this.onChildInputChange_);else if(n instanceof Ct)n.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(n instanceof lt)n.value.emitter.on("change",this.onChildValueChange_);else{const t=Ot(n);if(t){const e=t.emitter;e.on("layout",this.onDescendantLayout_),e.on("inputchange",this.onDescendantInputChange_),e.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,isRoot:e,sender:this}),!e)return;const n=t.item;if(n instanceof xt)n.binding.emitter.off("change",this.onChildInputChange_);else if(n instanceof Ct)n.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(n instanceof lt)n.value.emitter.off("change",this.onChildValueChange_);else{const t=Ot(n);if(t){const e=t.emitter;e.off("layout",this.onDescendantLayout_),e.off("inputchange",this.onDescendantInputChange_),e.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const t=this.bcSet_.items.filter((t=>!t.viewProps.get("hidden"))),e=t[0],n=t[t.length-1];this.bcSet_.items.forEach((t=>{const i=[];t===e&&(i.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||i.push("veryfirst")),t===n&&(i.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||i.push("verylast")),t.blade.set("positions",i)}))}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter((t=>t.viewProps.get("disposed"))).forEach((t=>{this.bcSet_.remove(t)}))}onChildInputChange_(t){const e=At(this.find(xt),t.sender);if(!e)throw p.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onChildMonitorUpdate_(t){const e=Lt(this.find(Ct),t.sender);if(!e)throw p.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:e,sender:this})}onChildValueChange_(t){const e=Dt(this.find(lt),t.sender);if(!e)throw p.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onDescendantLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(t){this.emitter.emit("inputchange",{bladeController:t.bladeController,options:t.options,sender:this})}onDescendantMonitorUpdate_(t){this.emitter.emit("monitorupdate",{bladeController:t.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Ut extends F{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new Vt(t,{viewName:"brk",viewProps:e.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const n=new jt(e.root?void 0:e.blade);n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose((()=>{for(let t=this.rack.children.length-1;t>=0;t--)this.rack.children[t].viewProps.set("disposed",!0)}))}onRackAdd_(t){t.isRoot&&W(this.view.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.isRoot&&J(t.bladeController.view.element)}}const Bt=f("cnt");class zt{constructor(t,e){this.className_=f(e.viewName||"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),Bt()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),w(this.foldable_,"completed",y(this.element,this.className_(void 0,"cpl")));const n=t.createElement("button");n.classList.add(this.className_("b")),w(e.props,"title",(t=>{l(t)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))})),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(this.className_("t")),C(e.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i;const r=t.createElement("div");r.classList.add(this.className_("m")),this.buttonElement.appendChild(r);const s=e.containerElement;s.classList.add(this.className_("c")),this.element.appendChild(s),this.containerElement=s}}class It extends St{constructor(t,e){var n;const i=dt.create(null===(n=e.expanded)||void 0===n||n),r=new Ut(t,{blade:e.blade,root:e.root,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:r,view:new zt(t,{containerElement:r.view.element,foldable:i,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=i,ct(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",(()=>{this.foldable.cleanUpTransition()})),this.rackController.rack.emitter.on("remove",(()=>{this.foldable.cleanUpTransition()})),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Nt={id:"folder",type:"blade",accept(t){const e=j,n=U(t,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return n?{params:n}:null},controller:t=>new It(t.document,{blade:t.blade,expanded:t.params.expanded,props:V.fromObject({title:t.params.title}),viewProps:t.viewProps}),api:t=>t.controller instanceof It?new Tt(t.controller,t.pool):null};class Ft extends lt{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{value:e.valueController.value,view:new st(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Kt extends n{}const Ht=f("spr");class Yt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ht()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("hr");n.classList.add(Ht("r")),this.element.appendChild(n)}}class qt extends F{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new Yt(t,{viewProps:e.viewProps})}))}}const $t={id:"separator",type:"blade",accept(t){const e=U(t,{view:j.required.constant("separator")});return e?{params:e}:null},controller:t=>new qt(t.document,{blade:t.blade,viewProps:t.viewProps}),api:t=>t.controller instanceof qt?new Kt(t.controller):null},Xt=f("");function Gt(t,e){return y(t,Xt(void 0,e))}class Qt extends V{constructor(t){super(t)}static create(t){var e,n;const i=null!=t?t:{},r={disabled:null!==(e=i.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(n=i.hidden)&&void 0!==n&&n},s=V.createCore(r);return new Qt(s)}bindClassModifiers(t){w(this,"disabled",Gt(t,"disabled")),w(this,"hidden",Gt(t,"hidden"))}bindDisabled(t){w(this,"disabled",(e=>{t.disabled=e}))}bindTabIndex(t){w(this,"disabled",(e=>{t.tabIndex=e?-1:0}))}handleDispose(t){this.value("disposed").emitter.on("change",(e=>{e&&t()}))}}const Zt=f("tbi");class Wt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Zt()),e.viewProps.bindClassModifiers(this.element),w(e.props,"selected",(t=>{t?this.element.classList.add(Zt(void 0,"sel")):this.element.classList.remove(Zt(void 0,"sel"))}));const n=t.createElement("button");n.classList.add(Zt("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const i=t.createElement("div");i.classList.add(Zt("t")),C(e.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class Jt{constructor(t,e){this.emitter=new v,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new Wt(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class te{constructor(t,e){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Jt(t,{props:e.itemProps,viewProps:Qt.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new Ut(t,{blade:ht(),viewProps:Qt.create()}),this.props=e.props,w(this.props,"selected",(t=>{this.itemController.props.set("selected",t),this.contentController.viewProps.set("hidden",!t)}))}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class ee{constructor(t,e){this.controller_=t,this.rackApi_=e}get title(){var t;return null!==(t=this.controller_.itemController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.itemController.props.set("title",t)}get selected(){return this.controller_.props.get("selected")}set selected(t){this.controller_.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addInput(t,e,n){return this.rackApi_.addInput(t,e,n)}addMonitor(t,e,n){return this.rackApi_.addMonitor(t,e,n)}addBlade(t){return this.rackApi_.addBlade(t)}}class ne extends vt{constructor(t,e){super(t,new Mt(t.rackController,e)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.emitter_=new v,this.pageApiMap_=new Map,this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})})),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach((t=>{this.setUpPageApi_(t)}))}get pages(){return this.controller_.pageSet.items.map((t=>{const e=this.pageApiMap_.get(t);if(!e)throw p.shouldNeverHappen();return e}))}addPage(t){const e=this.controller_.view.element.ownerDocument,n=new te(e,{itemProps:V.fromObject({selected:!1,title:t.title}),props:V.fromObject({selected:!1})});this.controller_.add(n,t.index);const i=this.pageApiMap_.get(n);if(!i)throw p.shouldNeverHappen();return i}removePage(t){this.controller_.remove(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}setUpPageApi_(t){const e=this.rackApi_.apiSet_.find((e=>e.controller_===t.contentController));if(!e)throw p.shouldNeverHappen();const n=new ee(t,e);this.pageApiMap_.set(t,n)}onPageAdd_(t){this.setUpPageApi_(t.item)}onPageRemove_(t){if(!this.pageApiMap_.get(t.item))throw p.shouldNeverHappen();this.pageApiMap_.delete(t.item)}}const ie=f("tab");class re{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ie(),Bt()),e.viewProps.bindClassModifiers(this.element),_(e.empty,y(this.element,ie(void 0,"nop")));const n=t.createElement("div");n.classList.add(ie("i")),this.element.appendChild(n),this.itemsElement=n;const i=e.contentsElement;i.classList.add(ie("c")),this.element.appendChild(i),this.contentsElement=i}}class se extends St{constructor(t,e){const n=new Ut(t,{blade:e.blade,viewProps:e.viewProps}),i=S(!0);super({blade:e.blade,rackController:n,view:new re(t,{contentsElement:n.view.element,empty:i,viewProps:e.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onPageSelectedChange_=this.onPageSelectedChange_.bind(this),this.pageSet_=new _t((()=>null)),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.empty_=i,this.applyPages_()}get pageSet(){return this.pageSet_}add(t,e){this.pageSet_.add(t,null!=e?e:this.pageSet_.items.length)}remove(t){this.pageSet_.remove(this.pageSet_.items[t])}applyPages_(){this.keepSelection_(),this.empty_.rawValue=0===this.pageSet_.items.length}onPageAdd_(t){const e=t.item;W(this.view.itemsElement,e.itemController.view.element,t.index),this.rackController.rack.add(e.contentController,t.index),e.props.value("selected").emitter.on("change",this.onPageSelectedChange_),this.applyPages_()}onPageRemove_(t){const e=t.item;J(e.itemController.view.element),this.rackController.rack.remove(e.contentController),e.props.value("selected").emitter.off("change",this.onPageSelectedChange_),this.applyPages_()}keepSelection_(){if(0===this.pageSet_.items.length)return;const t=this.pageSet_.items.findIndex((t=>t.props.get("selected")));t<0?this.pageSet_.items.forEach(((t,e)=>{t.props.set("selected",0===e)})):this.pageSet_.items.forEach(((e,n)=>{e.props.set("selected",n===t)}))}onPageSelectedChange_(t){if(t.rawValue){const e=this.pageSet_.items.findIndex((e=>e.props.value("selected")===t.sender));this.pageSet_.items.forEach(((t,n)=>{t.props.set("selected",n===e)}))}else this.keepSelection_()}}const oe={id:"tab",type:"blade",accept(t){const e=j,n=U(t,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return n&&0!==n.pages.length?{params:n}:null},controller(t){const e=new se(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach((n=>{const i=new te(t.document,{itemProps:V.fromObject({selected:!1,title:n.title}),props:V.fromObject({selected:!1})});e.add(i)})),e},api:t=>t.controller instanceof se?new ne(t.controller,t.pool):null};function ae(t,e){const n=t.accept(e.params);if(!n)return null;const i=j.optional.boolean(e.params.disabled).value,r=j.optional.boolean(e.params.hidden).value;return t.controller({blade:ht(),document:e.document,params:a(Object.assign(Object.assign({},n.params),{disabled:i,hidden:r})),viewProps:Qt.create({disabled:i,hidden:r})})}class le{constructor(){this.disabled=!1,this.emitter=new v}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class he{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new v,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class de{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce(((t,e)=>e.constrain(t)),t)}}function pe(t,e){if(t instanceof e)return t;if(t instanceof de){const n=t.constraints.reduce(((t,n)=>t||(n instanceof e?n:null)),null);if(n)return n}return null}class ue{constructor(t){this.options=t}constrain(t){const e=this.options;return 0===e.length||e.filter((e=>e.value===t)).length>0?t:e[0].value}}class ce{constructor(t){this.maxValue=t.max,this.minValue=t.min}constrain(t){let e=t;return l(this.minValue)||(e=Math.max(e,this.minValue)),l(this.maxValue)||(e=Math.min(e,this.maxValue)),e}}class ve{constructor(t){this.step=t}constrain(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step}}const me=f("lst");class fe{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(me()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("select");n.classList.add(me("s")),w(this.props_,"options",(e=>{tt(n),e.forEach(((e,i)=>{const r=t.createElement("option");r.dataset.index=String(i),r.textContent=e.text,r.value=String(e.value),n.appendChild(r)}))})),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;const i=t.createElement("div");i.classList.add(me("m")),i.appendChild(Z(t,"dropdown")),this.element.appendChild(i),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class ge{constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new fe(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const e=a(t.currentTarget).selectedOptions.item(0);if(!e)return;const n=Number(e.dataset.index);this.value.rawValue=this.props.get("options")[n].value}}const be=f("pop");class _e{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(be()),e.viewProps.bindClassModifiers(this.element),_(e.shows,y(this.element,be(void 0,"v")))}}class we{constructor(t,e){this.shows=S(!1),this.viewProps=e.viewProps,this.view=new _e(t,{shows:this.shows,viewProps:this.viewProps})}}const xe=f("txt");class ye{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(xe()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(xe("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class Ce{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new ye(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=a(t.currentTarget).value,n=this.parser_(e);l(n)||(this.value.rawValue=n),this.view.refresh()}}function Pe(t){return String(t)}function Ee(t){return"false"!==t&&!!t}function ke(t){return Pe(t)}class Me{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const Te={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class Se{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=Te[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Ve={"+":t=>t,"-":t=>-t,"~":t=>~t};class Ae{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=Ve[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Le(t){return(e,n)=>{for(let i=0;i<t.length;i++){const r=t[i](e,n);if(""!==r)return r}return""}}function De(t,e){var n;const i=t.substr(e).match(/^\s+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function Oe(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function Re(t,e){var n;const i=t.substr(e).match(/^[0-9]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function je(t,e){const n=Re(t,e);if(""!==n)return n;const i=t.substr(e,1);if("-"!==i&&"+"!==i)return"";const r=Re(t,e+=1);return""===r?"":i+r}function Ue(t,e){const n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";const i=je(t,e);return""===i?"":n+i}function Be(t,e){const n=t.substr(e,1);if("0"===n)return n;const i=Oe(t,e);return e+=i.length,""===i?"":i+Re(t,e)}function ze(t,e){const n=Be(t,e);if(e+=n.length,""===n)return"";const i=t.substr(e,1);if(e+=i.length,"."!==i)return"";const r=Re(t,e);return n+i+r+Ue(t,e+=r.length)}function Ie(t,e){const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const i=Re(t,e);return e+=i.length,""===i?"":n+i+Ue(t,e)}function Ne(t,e){const n=Be(t,e);return e+=n.length,""===n?"":n+Ue(t,e)}const Fe=Le([ze,Ie,Ne]);function Ke(t,e){var n;const i=t.substr(e).match(/^[01]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function He(t,e){const n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";const i=Ke(t,e);return""===i?"":n+i}function Ye(t,e){var n;const i=t.substr(e).match(/^[0-7]+/);return null!==(n=i&&i[0])&&void 0!==n?n:""}function qe(t,e){const n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";const i=Ye(t,e);return""===i?"":n+i}function $e(t,e){var n;const i=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=i&&i[0])&&void 0!==n?n:""}function Xe(t,e){const n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";const i=$e(t,e);return""===i?"":n+i}const Ge=Le([He,qe,Xe]),Qe=Le([Ge,Fe]);function Ze(t,e){const n=Qe(t,e);return e+=n.length,""===n?null:{evaluable:new Me(n),cursor:e}}function We(t,e){const n=t.substr(e,1);if(e+=n.length,"("!==n)return null;const i=sn(t,e);if(!i)return null;e=i.cursor,e+=De(t,e).length;const r=t.substr(e,1);return e+=r.length,")"!==r?null:{evaluable:i.evaluable,cursor:e}}function Je(t,e){return Ze(t,e)||We(t,e)}function tn(t,e){const n=Je(t,e);if(n)return n;const i=t.substr(e,1);if(e+=i.length,"+"!==i&&"-"!==i&&"~"!==i)return null;const r=tn(t,e);return r?{cursor:e=r.cursor,evaluable:new Ae(i,r.evaluable)}:null}function en(t,e,n){n+=De(e,n).length;const i=t.filter((t=>e.startsWith(t,n)))[0];return i?(n+=i.length,{cursor:n+=De(e,n).length,operator:i}):null}function nn(t,e){return(n,i)=>{const r=t(n,i);if(!r)return null;i=r.cursor;let s=r.evaluable;for(;;){const r=en(e,n,i);if(!r)break;i=r.cursor;const o=t(n,i);if(!o)return null;i=o.cursor,s=new Se(r.operator,s,o.evaluable)}return s?{cursor:i,evaluable:s}:null}}const rn=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(((t,e)=>nn(t,e)),tn);function sn(t,e){return e+=De(t,e).length,rn(t,e)}function on(t){const e=sn(t,0);return e?e.cursor+De(t,e.cursor).length!==t.length?null:e.evaluable:null}function an(t){var e;const n=on(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function ln(t){if("number"==typeof t)return t;if("string"==typeof t){const e=an(t);if(!l(e))return e}return 0}function hn(t){return String(t)}function dn(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}const pn=dn(0);function un(t){return pn(t)+"%"}function cn(t){return String(t)}function vn(t){return t}function mn(t,e){for(;t.length<e;)t.push(void 0)}function fn(t){const e=[];return mn(e,t),S(e)}function gn(t){const e=t.indexOf(void 0);return a(e<0?t:t.slice(0,e))}function bn(t,e){const n=[...gn(t),e];return n.length>t.length?n.splice(0,n.length-t.length):mn(n,t.length),n}function _n({primary:t,secondary:e,forward:n,backward:i}){let r=!1;function s(t){r||(r=!0,t(),r=!1)}t.emitter.on("change",(i=>{s((()=>{e.setRawValue(n(t,e),i.options)}))})),e.emitter.on("change",(r=>{s((()=>{t.setRawValue(i(t,e),r.options)})),s((()=>{e.setRawValue(n(t,e),r.options)}))})),s((()=>{e.setRawValue(n(t,e),{forceEmit:!1,last:!0})}))}function wn(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function xn(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function yn(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function Cn(t){return"ArrowUp"===t||"ArrowDown"===t}function Pn(t){return Cn(t)||"ArrowLeft"===t||"ArrowRight"===t}function En(t,e){const n=e.ownerDocument.defaultView,i=e.getBoundingClientRect();return{x:t.pageX-((n&&n.scrollX||0)+i.left),y:t.pageY-((n&&n.scrollY||0)+i.top)}}class kn{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new v,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(En(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(En(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(En(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-i.left,y:n.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function Mn(t,e,n,i,r){return i+(t-e)/(n-e)*(r-i)}function Tn(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Sn(t,e,n){return Math.min(Math.max(t,e),n)}function Vn(t,e){return(t%e+e)%e}const An=f("txt");class Ln{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(An(),An(void 0,"num")),e.arrayPosition&&this.element.classList.add(An(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(An("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(An()),this.inputElement.classList.add(An("i"));const i=t.createElement("div");i.classList.add(An("k")),this.element.appendChild(i),this.knobElement=i;const r=t.createElementNS(K,"svg");r.classList.add(An("g")),this.knobElement.appendChild(r);const s=t.createElementNS(K,"path");s.classList.add(An("gb")),r.appendChild(s),this.guideBodyElem_=s;const o=t.createElementNS(K,"path");o.classList.add(An("gh")),r.appendChild(o),this.guideHeadElem_=o;const a=t.createElement("div");a.classList.add(f("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(An(void 0,"drg"));this.element.classList.add(An(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),i=Sn(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+i},0 L${n},4 L${n+i},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class Dn{constructor(t,e){this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=S(null),this.view=new Ln(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const n=new kn(this.view.knobElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}onInputChange_(t){const e=a(t.currentTarget).value,n=this.parser_(e);l(n)||(this.value.rawValue=n),this.view.refresh()}onInputKeyDown_(t){const e=wn(this.baseStep_,xn(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==wn(this.baseStep_,xn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.originRawValue_+e*this.props.get("draggingScale")}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const On=f("sld");class Rn{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(On()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(On("t")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;const i=t.createElement("div");i.classList.add(On("k")),this.trackElement.appendChild(i),this.knobElement=i,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}update_(){const t=Sn(Mn(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class jn{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new Rn(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new kn(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){t.point&&this.value.setRawValue(Mn(Sn(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=wn(this.baseStep_,yn(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){0!==wn(this.baseStep_,yn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Un=f("sldtxt");class Bn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Un());const n=t.createElement("div");n.classList.add(Un("s")),this.sliderView_=e.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(Un("t")),this.textView_=e.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class zn{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new jn(t,{baseStep:e.baseStep,props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new Dn(t,{baseStep:e.baseStep,parser:e.parser,props:e.textProps,value:e.value,viewProps:e.viewProps}),this.view=new Bn(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function In(t,e){t.write(e)}function Nn(t){const e=j;return Array.isArray(t)?e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(t).value:"object"==typeof t?e.required.raw(t).value:void 0}function Fn(t){if("inline"===t||"popup"===t)return t}function Kn(t){const e=j;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(t).value}function Hn(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach((n=>{e.push({text:n,value:t[n]})})),e}function Yn(t){return l(t)?null:new ue(Hn(a(t)))}function qn(t){const e=t?pe(t,ue):null;return e?e.options:null}function $n(t){const e=t?pe(t,ve):null;return e?e.step:null}function Xn(t,e){const n=t&&pe(t,ve);return n?Tn(n.step):Math.max(Tn(e),2)}function Gn(t){const e=$n(t);return null!=e?e:1}function Qn(t,e){var n;const i=t&&pe(t,ve),r=Math.abs(null!==(n=null==i?void 0:i.step)&&void 0!==n?n:e);return 0===r?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}const Zn=f("ckb");class Wn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Zn()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(Zn("l")),this.element.appendChild(n);const i=t.createElement("input");i.classList.add(Zn("i")),i.type="checkbox",n.appendChild(i),this.inputElement=i,e.viewProps.bindDisabled(this.inputElement);const r=t.createElement("div");r.classList.add(Zn("w")),n.appendChild(r);const s=Z(t,"check");r.appendChild(s),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Jn{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Wn(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=a(t.currentTarget);this.value.rawValue=e.checked}}function ti(t){const e=[],n=Yn(t.options);return n&&e.push(n),new de(e)}const ei={id:"input-bool",type:"input",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=U(e,{options:j.optional.custom(Nn)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Ee,constraint:t=>ti(t.params),writer:t=>In},controller:t=>{var e;const n=t.document,i=t.value,r=t.constraint;return r&&pe(r,ue)?new ge(n,{props:V.fromObject({options:null!==(e=qn(r))&&void 0!==e?e:[]}),value:i,viewProps:t.viewProps}):new Jn(n,{value:i,viewProps:t.viewProps})}},ni=f("col");class ii{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ni()),e.foldable.bindExpandedClass(this.element,ni(void 0,"expanded")),w(e.foldable,"completed",y(this.element,ni(void 0,"cpl")));const n=t.createElement("div");n.classList.add(ni("h")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(ni("s")),n.appendChild(i),this.swatchElement=i;const r=t.createElement("div");if(r.classList.add(ni("t")),n.appendChild(r),this.textElement=r,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(ni("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}function ri(t,e,n){const i=Sn(t/255,0,1),r=Sn(e/255,0,1),s=Sn(n/255,0,1),o=Math.max(i,r,s),a=Math.min(i,r,s),l=o-a;let h=0,d=0;const p=(a+o)/2;return 0!==l&&(d=l/(1-Math.abs(o+a-1)),h=i===o?(r-s)/l:r===o?2+(s-i)/l:4+(i-r)/l,h=h/6+(h<0?1:0)),[360*h,100*d,100*p]}function si(t,e,n){const i=(t%360+360)%360,r=Sn(e/100,0,1),s=Sn(n/100,0,1),o=(1-Math.abs(2*s-1))*r,a=o*(1-Math.abs(i/60%2-1)),l=s-o/2;let h,d,p;return[h,d,p]=i>=0&&i<60?[o,a,0]:i>=60&&i<120?[a,o,0]:i>=120&&i<180?[0,o,a]:i>=180&&i<240?[0,a,o]:i>=240&&i<300?[a,0,o]:[o,0,a],[255*(h+l),255*(d+l),255*(p+l)]}function oi(t,e,n){const i=Sn(t/255,0,1),r=Sn(e/255,0,1),s=Sn(n/255,0,1),o=Math.max(i,r,s),a=o-Math.min(i,r,s);let l;return l=0===a?0:o===i?((r-s)/a%6+6)%6*60:o===r?60*((s-i)/a+2):60*((i-r)/a+4),[l,100*(0===o?0:a/o),100*o]}function ai(t,e,n){const i=Vn(t,360),r=Sn(e/100,0,1),s=Sn(n/100,0,1),o=s*r,a=o*(1-Math.abs(i/60%2-1)),l=s-o;let h,d,p;return[h,d,p]=i>=0&&i<60?[o,a,0]:i>=60&&i<120?[a,o,0]:i>=120&&i<180?[0,o,a]:i>=180&&i<240?[0,a,o]:i>=240&&i<300?[a,0,o]:[o,0,a],[255*(h+l),255*(d+l),255*(p+l)]}function li(t,e,n){const i=n+e*(100-Math.abs(2*n-100))/200;return[t,0!==i?e*(100-Math.abs(2*n-100))/i:0,n+e*(100-Math.abs(2*n-100))/200]}function hi(t,e,n){const i=100-Math.abs(n*(200-e)/100-100);return[t,0!==i?e*n/i:0,n*(200-e)/200]}function di(t){return[t[0],t[1],t[2]]}function pi(t,e){return[t[0],t[1],t[2],e]}const ui={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:li,rgb:si},hsv:{hsl:hi,hsv:(t,e,n)=>[t,e,n],rgb:ai},rgb:{hsl:ri,hsv:oi,rgb:(t,e,n)=>[t,e,n]}};function ci(t,e,n){return ui[e][n](...t)}const vi={hsl:t=>{var e;return[Vn(t[0],360),Sn(t[1],0,100),Sn(t[2],0,100),Sn(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},hsv:t=>{var e;return[Vn(t[0],360),Sn(t[1],0,100),Sn(t[2],0,100),Sn(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},rgb:t=>{var e;return[Sn(t[0],0,255),Sn(t[1],0,255),Sn(t[2],0,255),Sn(null!==(e=t[3])&&void 0!==e?e:1,0,1)]}};function mi(t,e){return"object"==typeof t&&!l(t)&&e in t&&"number"==typeof t[e]}class fi{constructor(t,e){this.mode_=e,this.comps_=vi[e](t)}static black(){return new fi([0,0,0],"rgb")}static fromObject(t){const e="a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b];return new fi(e,"rgb")}static toRgbaObject(t){return t.toRgbaObject()}static isRgbColorObject(t){return mi(t,"r")&&mi(t,"g")&&mi(t,"b")}static isRgbaColorObject(t){return this.isRgbColorObject(t)&&mi(t,"a")}static isColorObject(t){return this.isRgbColorObject(t)}static equals(t,e){if(t.mode_!==e.mode_)return!1;const n=t.comps_,i=e.comps_;for(let r=0;r<n.length;r++)if(n[r]!==i[r])return!1;return!0}get mode(){return this.mode_}getComponents(t){return pi(ci(di(this.comps_),this.mode_,t||this.mode_),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const gi=f("colp");class bi{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(gi());const n=t.createElement("div");n.classList.add(gi("hsv"));const i=t.createElement("div");i.classList.add(gi("sv")),this.svPaletteView_=e.svPaletteView,i.appendChild(this.svPaletteView_.element),n.appendChild(i);const r=t.createElement("div");r.classList.add(gi("h")),this.hPaletteView_=e.hPaletteView,r.appendChild(this.hPaletteView_.element),n.appendChild(r),this.element.appendChild(n);const s=t.createElement("div");if(s.classList.add(gi("rgb")),this.textView_=e.textView,s.appendChild(this.textView_.element),this.element.appendChild(s),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const n=t.createElement("div");n.classList.add(gi("a"));const i=t.createElement("div");i.classList.add(gi("ap")),i.appendChild(this.alphaViews_.palette.element),n.appendChild(i);const r=t.createElement("div");r.classList.add(gi("at")),r.appendChild(this.alphaViews_.text.element),n.appendChild(r),this.element.appendChild(n)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map((t=>t.inputElement))];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function _i(t){const e=j;return U(t,{alpha:e.optional.boolean,expanded:e.optional.boolean,picker:e.optional.custom(Fn)})}function wi(t){return t?.1:1}function xi(t,e){const n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}const yi={deg:t=>t,grad:t=>360*t/400,rad:t=>360*t/(2*Math.PI),turn:t=>360*t};function Ci(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),i=e[2];return yi[i](n)}const Pi={"func.rgb":t=>{const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[xi(e[1],255),xi(e[2],255),xi(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new fi(n,"rgb")},"func.rgba":t=>{const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[xi(e[1],255),xi(e[2],255),xi(e[3],255),xi(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new fi(n,"rgb")},"func.hsl":t=>{const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ci(e[1]),xi(e[2],100),xi(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new fi(n,"hsl")},"func.hsla":t=>{const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ci(e[1]),xi(e[2],100),xi(e[3],100),xi(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new fi(n,"hsl")},"hex.rgb":t=>{const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new fi([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)],"rgb");const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new fi([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)],"rgb"):null},"hex.rgba":t=>{const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new fi([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Mn(parseInt(e[4]+e[4],16),0,255,0,1)],"rgb");const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new fi([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Mn(parseInt(n[4],16),0,255,0,1)],"rgb"):null}};function Ei(t){return Object.keys(Pi).reduce(((e,n)=>e||((0,Pi[n])(t)?n:null)),null)}const ki=t=>{const e=Ei(t);return e?Pi[e](t):null};function Mi(t){return"func.hsla"===t||"func.rgba"===t||"hex.rgba"===t}function Ti(t){if("string"==typeof t){const e=ki(t);if(e)return e}return fi.black()}function Si(t){const e=Sn(Math.floor(t),0,255).toString(16);return 1===e.length?`0${e}`:e}function Vi(t,e="#"){return`${e}${di(t.getComponents("rgb")).map(Si).join("")}`}function Ai(t,e="#"){const n=t.getComponents("rgb");return`${e}${[n[0],n[1],n[2],255*n[3]].map(Si).join("")}`}function Li(t){const e=dn(0);return`rgb(${di(t.getComponents("rgb")).map((t=>e(t))).join(", ")})`}function Di(t){const e=dn(2),n=dn(0);return`rgba(${t.getComponents("rgb").map(((t,i)=>(3===i?e:n)(t))).join(", ")})`}function Oi(t){const e=[dn(0),un,un];return`hsl(${di(t.getComponents("hsl")).map(((t,n)=>e[n](t))).join(", ")})`}function Ri(t){const e=[dn(0),un,un,dn(2)];return`hsla(${t.getComponents("hsl").map(((t,n)=>e[n](t))).join(", ")})`}const ji={"func.hsl":Oi,"func.hsla":Ri,"func.rgb":Li,"func.rgba":Di,"hex.rgb":Vi,"hex.rgba":Ai};function Ui(t){return ji[t]}const Bi=f("apl");class zi{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Bi()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(Bi("b")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(Bi("c")),n.appendChild(i),this.colorElem_=i;const r=t.createElement("div");r.classList.add(Bi("m")),this.element.appendChild(r),this.markerElem_=r;const s=t.createElement("div");s.classList.add(Bi("p")),this.markerElem_.appendChild(s),this.previewElem_=s,this.update_()}update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),n=new fi([e[0],e[1],e[2],0],"rgb"),i=new fi([e[0],e[1],e[2],255],"rgb"),r=["to right",Di(n),Di(i)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=Di(t);const s=Mn(e[3],0,1,0,100);this.markerElem_.style.left=`${s}%`}onValueChange_(){this.update_()}}class Ii{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new zi(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new kn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=t.point.x/t.bounds.width,i=this.value.rawValue,[r,s,o]=i.getComponents("hsv");this.value.setRawValue(new fi([r,s,o,n],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=wn(wi(!0),yn(t));if(0===e)return;const n=this.value.rawValue,[i,r,s,o]=n.getComponents("hsv");this.value.setRawValue(new fi([i,r,s,o+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==wn(wi(!0),yn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ni=f("coltxt");function Fi(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return e.appendChild(n.reduce(((e,n)=>{const i=t.createElement("option");return i.textContent=n.text,i.value=n.value,e.appendChild(i),e}),t.createDocumentFragment())),e}class Ki{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ni());const n=t.createElement("div");n.classList.add(Ni("m")),this.modeElem_=Fi(t),this.modeElem_.classList.add(Ni("ms")),n.appendChild(this.modeSelectElement);const i=t.createElement("div");i.classList.add(Ni("mm")),i.appendChild(Z(t,"dropdown")),n.appendChild(i),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(Ni("w")),this.element.appendChild(r),this.textsElem_=r,this.textViews_=e.textViews,this.applyTextViews_(),_(e.colorMode,(t=>{this.modeElem_.value=t}))}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(t){this.textViews_=t,this.applyTextViews_()}applyTextViews_(){tt(this.textsElem_);const t=this.element.ownerDocument;this.textViews_.forEach((e=>{const n=t.createElement("div");n.classList.add(Ni("c")),n.appendChild(e.element),this.textsElem_.appendChild(n)}))}}const Hi=dn(0),Yi={rgb:()=>new ce({min:0,max:255}),hsl:t=>new ce(0===t?{min:0,max:360}:{min:0,max:100}),hsv:t=>new ce(0===t?{min:0,max:360}:{min:0,max:100})};function qi(t,e,n){return new Dn(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",baseStep:wi(!1),parser:e.parser,props:V.fromObject({draggingScale:1,formatter:Hi}),value:S(0,{constraint:Yi[e.colorMode](n)}),viewProps:e.viewProps})}class $i{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.parser_=e.parser,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=S(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new Ki(t,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const e={colorMode:this.colorMode.rawValue,parser:this.parser_,viewProps:this.viewProps},n=[qi(t,e,0),qi(t,e,1),qi(t,e,2)];return n.forEach(((t,e)=>{_n({primary:this.value,secondary:t.value,forward:t=>t.rawValue.getComponents(this.colorMode.rawValue)[e],backward:(t,n)=>{const i=this.colorMode.rawValue,r=t.rawValue.getComponents(i);return r[e]=n.rawValue,new fi(pi(di(r),r[3]),i)}})})),n}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const Xi=f("hpl");class Gi{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Xi()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(Xi("c")),this.element.appendChild(n);const i=t.createElement("div");i.classList.add(Xi("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=Li(new fi([e,100,100],"hsv"));const n=Mn(e,0,360,0,100);this.markerElem_.style.left=`${n}%`}onValueChange_(){this.update_()}}class Qi{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Gi(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new kn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=Mn(Sn(t.point.x,0,t.bounds.width),0,t.bounds.width,0,359),i=this.value.rawValue,[,r,s,o]=i.getComponents("hsv");this.value.setRawValue(new fi([n,r,s,o],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=wn(wi(!1),yn(t));if(0===e)return;const n=this.value.rawValue,[i,r,s,o]=n.getComponents("hsv");this.value.setRawValue(new fi([i+e,r,s,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==wn(wi(!1),yn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Zi=f("svp"),Wi=64;class Ji{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Zi()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("canvas");n.height=Wi,n.width=Wi,n.classList.add(Zi("c")),this.element.appendChild(n),this.canvasElement=n;const i=t.createElement("div");i.classList.add(Zi("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const t=G(this.canvasElement);if(!t)return;const e=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,i=this.canvasElement.height,r=t.getImageData(0,0,n,i),s=r.data;for(let l=0;l<i;l++)for(let t=0;t<n;t++){const r=Mn(t,0,n,0,100),o=Mn(l,0,i,100,0),a=ai(e[0],r,o),h=4*(l*n+t);s[h]=a[0],s[h+1]=a[1],s[h+2]=a[2],s[h+3]=255}t.putImageData(r,0,0);const o=Mn(e[1],0,100,0,100);this.markerElem_.style.left=`${o}%`;const a=Mn(e[2],0,100,100,0);this.markerElem_.style.top=`${a}%`}onValueChange_(){this.update_()}}class tr{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Ji(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new kn(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=Mn(t.point.x,0,t.bounds.width,0,100),i=Mn(t.point.y,0,t.bounds.height,100,0),[r,,,s]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new fi([r,n,i,s],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){Pn(t.key)&&t.preventDefault();const[e,n,i,r]=this.value.rawValue.getComponents("hsv"),s=wi(!1),o=wn(s,yn(t)),a=wn(s,xn(t));0===o&&0===a||this.value.setRawValue(new fi([e,n+o,i+a,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=wi(!1),n=wn(e,yn(t)),i=wn(e,xn(t));0===n&&0===i||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class er{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new Qi(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new tr(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new Ii(t,{value:this.value,viewProps:this.viewProps}),text:new Dn(t,{parser:an,baseStep:.1,props:V.fromObject({draggingScale:.01,formatter:dn(2)}),value:S(0,{constraint:new ce({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&_n({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.rawValue.getComponents()[3],backward:(t,e)=>{const n=t.rawValue.getComponents();return n[3]=e.rawValue,new fi(n,t.rawValue.mode)}}),this.textC_=new $i(t,{parser:an,value:this.value,viewProps:this.viewProps}),this.view=new bi(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}get textController(){return this.textC_}}const nr=f("colsw");class ir{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(nr()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(nr("sw")),this.element.appendChild(n),this.swatchElem_=n;const i=t.createElement("button");i.classList.add(nr("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Ai(t)}onValueChange_(){this.update_()}}class rr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new ir(t,{value:this.value,viewProps:this.viewProps})}}class sr{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=dt.create(e.expanded),this.swatchC_=new rr(t,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new Ce(t,{parser:e.parser,props:V.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new ii(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===e.pickerLayout?new we(t,{viewProps:this.viewProps}):null;const i=new er(t,{supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),_n({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),ct(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=a(t.relatedTarget);n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=nt(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!q(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}function or(t){return fi.isColorObject(t)?fi.fromObject(t):fi.black()}function ar(t){return di(t.getComponents("rgb")).reduce(((t,e)=>t<<8|255&Math.floor(e)),0)}function lr(t){return t.getComponents("rgb").reduce(((t,e,n)=>t<<8|255&Math.floor(3===n?255*e:e)),0)>>>0}function hr(t){return new fi([t>>16&255,t>>8&255,255&t],"rgb")}function dr(t){return new fi([t>>24&255,t>>16&255,t>>8&255,Mn(255&t,0,255,0,1)],"rgb")}function pr(t){return"number"!=typeof t?fi.black():hr(t)}function ur(t){return"number"!=typeof t?fi.black():dr(t)}function cr(t){const e=Ui(t);return(t,n)=>{In(t,e(n))}}function vr(t){const e=t?lr:ar;return(t,n)=>{In(t,e(n))}}function mr(t,e){const n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b),t.writeProperty("a",n.a)}function fr(t,e){const n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b)}function gr(t){return t?mr:fr}function br(t){return"alpha"in t&&!0===t.alpha}function _r(t){return t?t=>Ai(t,"0x"):t=>Vi(t,"0x")}const wr={id:"input-color-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;if(!("view"in e))return null;if("color"!==e.view)return null;const n=_i(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>br(t.params)?ur:pr,equals:fi.equals,writer:t=>vr(br(t.params))},controller:t=>{const e=br(t.params),n="expanded"in t.params?t.params.expanded:void 0,i="picker"in t.params?t.params.picker:void 0;return new sr(t.document,{expanded:null!=n&&n,formatter:_r(e),parser:ki,pickerLayout:null!=i?i:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}};function xr(t){return fi.isRgbaColorObject(t)}const yr={id:"input-color-object",type:"input",accept:(t,e)=>{if(!fi.isColorObject(t))return null;const n=_i(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>or,equals:fi.equals,writer:t=>gr(xr(t.initialValue))},controller:t=>{const e=fi.isRgbaColorObject(t.initialValue),n="expanded"in t.params?t.params.expanded:void 0,i="picker"in t.params?t.params.picker:void 0,r=e?Ai:Vi;return new sr(t.document,{expanded:null!=n&&n,formatter:r,parser:ki,pickerLayout:null!=i?i:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}},Cr={id:"input-color-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;if("view"in e&&"text"===e.view)return null;if(!Ei(t))return null;const n=_i(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>Ti,equals:fi.equals,writer:t=>{const e=Ei(t.initialValue);if(!e)throw p.shouldNeverHappen();return cr(e)}},controller:t=>{const e=Ei(t.initialValue);if(!e)throw p.shouldNeverHappen();const n=Ui(e),i="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0;return new sr(t.document,{expanded:null!=i&&i,formatter:n,parser:ki,pickerLayout:null!=r?r:"popup",supportsAlpha:Mi(e),value:t.value,viewProps:t.viewProps})}};class Pr{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map(((t,e)=>{var n,i;return null!==(i=null===(n=this.components[e])||void 0===n?void 0:n.constrain(t))&&void 0!==i?i:t}));return this.asm_.fromComponents(e)}}const Er=f("pndtxt");class kr{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(Er()),this.textViews.forEach((e=>{const n=t.createElement("div");n.classList.add(Er("a")),n.appendChild(e.element),this.element.appendChild(n)}))}}function Mr(t,e,n){return new Dn(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:S(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class Tr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map(((n,i)=>Mr(t,e,i))),this.acs_.forEach(((t,n)=>{_n({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t.rawValue)[n],backward:(t,i)=>{const r=e.assembly.toComponents(t.rawValue);return r[n]=i.rawValue,e.assembly.fromComponents(r)}})})),this.view=new kr(t,{textViews:this.acs_.map((t=>t.view))})}}function Sr(t){return"step"in t&&!l(t.step)?new ve(t.step):null}function Vr(t){return"max"in t&&!l(t.max)||"min"in t&&!l(t.min)?new ce({max:t.max,min:t.min}):null}function Ar(t){const e=[],n=Sr(t);n&&e.push(n);const i=Vr(t);i&&e.push(i);const r=Yn(t.options);return r&&e.push(r),new de(e)}function Lr(t){const e=t?pe(t,ce):null;return e?[e.minValue,e.maxValue]:[void 0,void 0]}function Dr(t){const[e,n]=Lr(t);return[null!=e?e:0,null!=n?n:100]}const Or={id:"input-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;const n=j,i=U(e,{format:n.optional.function,max:n.optional.number,min:n.optional.number,options:n.optional.custom(Nn),step:n.optional.number});return i?{initialValue:t,params:i}:null},binding:{reader:t=>ln,constraint:t=>Ar(t.params),writer:t=>In},controller:t=>{var e,n;const i=t.value,r=t.constraint;if(r&&pe(r,ue))return new ge(t.document,{props:V.fromObject({options:null!==(e=qn(r))&&void 0!==e?e:[]}),value:i,viewProps:t.viewProps});const s=null!==(n="format"in t.params?t.params.format:void 0)&&void 0!==n?n:dn(Xn(r,i.rawValue));if(r&&pe(r,ce)){const[e,n]=Dr(r);return new zn(t.document,{baseStep:Gn(r),parser:an,sliderProps:V.fromObject({maxValue:n,minValue:e}),textProps:V.fromObject({draggingScale:Qn(r,i.rawValue),formatter:s}),value:i,viewProps:t.viewProps})}return new Dn(t.document,{baseStep:Gn(r),parser:an,props:V.fromObject({draggingScale:Qn(r,i.rawValue),formatter:s}),value:i,viewProps:t.viewProps})}};class Rr{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(l(t))return!1;const e=t.x,n=t.y;return"number"==typeof e&&"number"==typeof n}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}const jr={toComponents:t=>t.getComponents(),fromComponents:t=>new Rr(...t)},Ur=f("p2d");class Br{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ur()),e.viewProps.bindClassModifiers(this.element),_(e.expanded,y(this.element,Ur(void 0,"expanded")));const n=t.createElement("div");n.classList.add(Ur("h")),this.element.appendChild(n);const i=t.createElement("button");i.classList.add(Ur("b")),i.appendChild(Z(t,"p2dpad")),e.viewProps.bindDisabled(i),n.appendChild(i),this.buttonElement=i;const r=t.createElement("div");if(r.classList.add(Ur("t")),n.appendChild(r),this.textElement=r,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(Ur("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const zr=f("p2dp");class Ir{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=e.invertsY,this.maxValue_=e.maxValue,this.element=t.createElement("div"),this.element.classList.add(zr()),"popup"===e.layout&&this.element.classList.add(zr(void 0,"p"));const n=t.createElement("div");n.classList.add(zr("p")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const i=t.createElementNS(K,"svg");i.classList.add(zr("g")),this.padElement.appendChild(i),this.svgElem_=i;const r=t.createElementNS(K,"line");r.classList.add(zr("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const s=t.createElementNS(K,"line");s.classList.add(zr("ax")),s.setAttributeNS(null,"x1","50%"),s.setAttributeNS(null,"y1","0"),s.setAttributeNS(null,"x2","50%"),s.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(s);const o=t.createElementNS(K,"line");o.classList.add(zr("l")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(o),this.lineElem_=o;const a=t.createElement("div");a.classList.add(zr("m")),this.padElement.appendChild(a),this.markerElem_=a,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),n=this.maxValue_,i=Mn(t,-n,+n,0,100),r=Mn(e,-n,+n,0,100),s=this.invertsY_?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${s}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${s}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Nr(t,e,n){return[wn(e[0],yn(t)),wn(e[1],xn(t))*(n?1:-1)]}class Fr{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.baseSteps_=e.baseSteps,this.maxValue_=e.maxValue,this.invertsY_=e.invertsY,this.view=new Ir(t,{invertsY:this.invertsY_,layout:e.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new kn(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=this.maxValue_,i=Mn(t.point.x,0,t.bounds.width,-n,+n),r=Mn(this.invertsY_?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new Rr(i,r),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){Pn(t.key)&&t.preventDefault();const[e,n]=Nr(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(new Rr(this.value.rawValue.x+e,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,n]=Nr(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Kr{constructor(t,e){var n,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=dt.create(e.expanded),this.popC_="popup"===e.pickerLayout?new we(t,{viewProps:this.viewProps}):null;const r=new Fr(t,{baseSteps:[e.axes[0].baseStep,e.axes[1].baseStep],invertsY:e.invertsY,layout:e.pickerLayout,maxValue:e.maxValue,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=r,this.textC_=new Tr(t,{assembly:jr,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new Br(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("blur",this.onPadButtonBlur_),null===(i=this.view.buttonElement)||void 0===i||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),_n({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),ct(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=a(t.relatedTarget);n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=nt(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!q(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}function Hr(t){return Rr.isObject(t)?new Rr(t.x,t.y):new Rr}function Yr(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function qr(t){if(!t)return;const e=[];return l(t.step)||e.push(new ve(t.step)),l(t.max)&&l(t.min)||e.push(new ce({max:t.max,min:t.min})),new de(e)}function $r(t){return new Pr({assembly:jr,components:[qr("x"in t?t.x:void 0),qr("y"in t?t.y:void 0)]})}function Xr(t,e){const n=t&&pe(t,ce);if(n)return Math.max(Math.abs(n.minValue||0),Math.abs(n.maxValue||0));const i=Gn(t);return Math.max(10*Math.abs(i),10*Math.abs(e))}function Gr(t,e){const n=e instanceof Pr?e.components[0]:void 0,i=e instanceof Pr?e.components[1]:void 0,r=Xr(n,t.x),s=Xr(i,t.y);return Math.max(r,s)}function Qr(t,e){return{baseStep:Gn(e),constraint:e,textProps:V.fromObject({draggingScale:Qn(e,t),formatter:dn(Xn(e,t))})}}function Zr(t){if(!("y"in t))return!1;const e=t.y;return!!e&&"inverted"in e&&!!e.inverted}const Wr={id:"input-point2d",type:"input",accept:(t,e)=>{if(!Rr.isObject(t))return null;const n=j,i=U(e,{expanded:n.optional.boolean,picker:n.optional.custom(Fn),x:n.optional.custom(Kn),y:n.optional.object({inverted:n.optional.boolean,max:n.optional.number,min:n.optional.number,step:n.optional.number})});return i?{initialValue:t,params:i}:null},binding:{reader:t=>Hr,constraint:t=>$r(t.params),equals:Rr.equals,writer:t=>Yr},controller:t=>{const e=t.document,n=t.value,i=t.constraint;if(!(i instanceof Pr))throw p.shouldNeverHappen();const r="expanded"in t.params?t.params.expanded:void 0,s="picker"in t.params?t.params.picker:void 0;return new Kr(e,{axes:[Qr(n.rawValue.x,i.components[0]),Qr(n.rawValue.y,i.components[1])],expanded:null!=r&&r,invertsY:Zr(t.params),maxValue:Gr(n.rawValue,i),parser:an,pickerLayout:null!=s?s:"popup",value:n,viewProps:t.viewProps})}};class Jr{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(l(t))return!1;const e=t.x,n=t.y,i=t.z;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const ts={toComponents:t=>t.getComponents(),fromComponents:t=>new Jr(...t)};function es(t){return Jr.isObject(t)?new Jr(t.x,t.y,t.z):new Jr}function ns(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function is(t){if(!t)return;const e=[];return l(t.step)||e.push(new ve(t.step)),l(t.max)&&l(t.min)||e.push(new ce({max:t.max,min:t.min})),new de(e)}function rs(t){return new Pr({assembly:ts,components:[is("x"in t?t.x:void 0),is("y"in t?t.y:void 0),is("z"in t?t.z:void 0)]})}function ss(t,e){return{baseStep:Gn(e),constraint:e,textProps:V.fromObject({draggingScale:Qn(e,t),formatter:dn(Xn(e,t))})}}const os={id:"input-point3d",type:"input",accept:(t,e)=>{if(!Jr.isObject(t))return null;const n=j,i=U(e,{x:n.optional.custom(Kn),y:n.optional.custom(Kn),z:n.optional.custom(Kn)});return i?{initialValue:t,params:i}:null},binding:{reader:t=>es,constraint:t=>rs(t.params),equals:Jr.equals,writer:t=>ns},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof Pr))throw p.shouldNeverHappen();return new Tr(t.document,{assembly:ts,axes:[ss(e.rawValue.x,n.components[0]),ss(e.rawValue.y,n.components[1]),ss(e.rawValue.z,n.components[2])],parser:an,value:e,viewProps:t.viewProps})}};class as{constructor(t=0,e=0,n=0,i=0){this.x=t,this.y=e,this.z=n,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(l(t))return!1;const e=t.x,n=t.y,i=t.z,r=t.w;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i&&"number"==typeof r}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const ls={toComponents:t=>t.getComponents(),fromComponents:t=>new as(...t)};function hs(t){return as.isObject(t)?new as(t.x,t.y,t.z,t.w):new as}function ds(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function ps(t){if(!t)return;const e=[];return l(t.step)||e.push(new ve(t.step)),l(t.max)&&l(t.min)||e.push(new ce({max:t.max,min:t.min})),new de(e)}function us(t){return new Pr({assembly:ls,components:[ps("x"in t?t.x:void 0),ps("y"in t?t.y:void 0),ps("z"in t?t.z:void 0),ps("w"in t?t.w:void 0)]})}function cs(t,e){return{baseStep:Gn(e),constraint:e,textProps:V.fromObject({draggingScale:Qn(e,t),formatter:dn(Xn(e,t))})}}const vs={id:"input-point4d",type:"input",accept:(t,e)=>{if(!as.isObject(t))return null;const n=j,i=U(e,{x:n.optional.custom(Kn),y:n.optional.custom(Kn),z:n.optional.custom(Kn),w:n.optional.custom(Kn)});return i?{initialValue:t,params:i}:null},binding:{reader:t=>hs,constraint:t=>us(t.params),equals:as.equals,writer:t=>ds},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof Pr))throw p.shouldNeverHappen();return new Tr(t.document,{assembly:ls,axes:e.rawValue.getComponents().map(((t,e)=>cs(t,n.components[e]))),parser:an,value:e,viewProps:t.viewProps})}};function ms(t){const e=[],n=Yn(t.options);return n&&e.push(n),new de(e)}const fs={id:"input-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;const n=U(e,{options:j.optional.custom(Nn)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>cn,constraint:t=>ms(t.params),writer:t=>In},controller:t=>{var e;const n=t.document,i=t.value,r=t.constraint;return r&&pe(r,ue)?new ge(n,{props:V.fromObject({options:null!==(e=qn(r))&&void 0!==e?e:[]}),value:i,viewProps:t.viewProps}):new Ce(n,{parser:t=>t,props:V.fromObject({formatter:vn}),value:i,viewProps:t.viewProps})}},gs={monitor:{defaultInterval:200,defaultLineCount:3}},bs=f("mll");class _s{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(bs()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("textarea");n.classList.add(bs("i")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,n.readOnly=!0,e.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,n=[];this.value.rawValue.forEach((t=>{void 0!==t&&n.push(this.formatter_(t))})),t.textContent=n.join("\n"),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class ws{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new _s(t,{formatter:e.formatter,lineCount:e.lineCount,value:this.value,viewProps:this.viewProps})}}const xs=f("sgl");class ys{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(xs()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(xs("i")),n.readOnly=!0,n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}onValueUpdate_(){this.update_()}}class Cs{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new ys(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}const Ps={id:"monitor-bool",type:"monitor",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=U(e,{lineCount:j.optional.number});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Ee},controller:t=>{var e;return 1===t.value.rawValue.length?new Cs(t.document,{formatter:ke,value:t.value,viewProps:t.viewProps}):new ws(t.document,{formatter:ke,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:gs.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}};class Es{constructor(){this.emitter=new v,this.index_=-1}get index(){return this.index_}set index(t){this.index_!==t&&(this.index_=t,this.emitter.emit("change",{index:t,sender:this}))}}const ks=f("grl");class Ms{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(ks()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.minValue_=e.minValue,this.maxValue_=e.maxValue,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=t.createElementNS(K,"svg");n.classList.add(ks("g")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.element.appendChild(n),this.svgElem_=n;const i=t.createElementNS(K,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const r=t.createElement("div");r.classList.add(ks("t"),f("tt")()),this.element.appendChild(r),this.tooltipElem_=r,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.minValue_,i=this.maxValue_,r=[];this.value.rawValue.forEach(((s,o)=>{if(void 0===s)return;const a=Mn(o,0,e,0,t.width),l=Mn(s,n,i,t.height,0);r.push([a,l].join(","))})),this.lineElem_.setAttributeNS(null,"points",r.join(" "));const s=this.tooltipElem_,o=this.value.rawValue[this.cursor_.index];if(void 0===o)return void s.classList.remove(ks("t","a"));const a=Mn(this.cursor_.index,0,e,0,t.width),l=Mn(o,n,i,t.height,0);s.style.left=`${a}px`,s.style.top=`${l}px`,s.textContent=`${this.formatter_(o)}`,s.classList.contains(ks("t","a"))||(s.classList.add(ks("t","a"),ks("t","in")),H(s),s.classList.remove(ks("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Ts{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.cursor_=new Es,this.view=new Ms(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,maxValue:e.maxValue,minValue:e.minValue,value:this.value,viewProps:this.viewProps}),q(t)){const t=new kn(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}onGraphMouseLeave_(){this.cursor_.index=-1}onGraphMouseMove_(t){const e=this.view.element.getBoundingClientRect();this.cursor_.index=Math.floor(Mn(t.offsetX,0,e.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.index=Math.floor(Mn(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.index=-1}onGraphPointerUp_(){this.cursor_.index=-1}}function Ss(t){return"format"in t&&!l(t.format)?t.format:dn(2)}function Vs(t){var e;return 1===t.value.rawValue.length?new Cs(t.document,{formatter:Ss(t.params),value:t.value,viewProps:t.viewProps}):new ws(t.document,{formatter:Ss(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:gs.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}function As(t){var e,n,i;return new Ts(t.document,{formatter:Ss(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:gs.monitor.defaultLineCount,maxValue:null!==(n="max"in t.params?t.params.max:null)&&void 0!==n?n:100,minValue:null!==(i="min"in t.params?t.params.min:null)&&void 0!==i?i:0,value:t.value,viewProps:t.viewProps})}function Ls(t){return"view"in t&&"graph"===t.view}const Ds={id:"monitor-number",type:"monitor",accept:(t,e)=>{if("number"!=typeof t)return null;const n=j,i=U(e,{format:n.optional.function,lineCount:n.optional.number,max:n.optional.number,min:n.optional.number,view:n.optional.string});return i?{initialValue:t,params:i}:null},binding:{defaultBufferSize:t=>Ls(t)?64:1,reader:t=>ln},controller:t=>Ls(t.params)?As(t):Vs(t)},Os={id:"monitor-string",type:"monitor",accept:(t,e)=>{if("string"!=typeof t)return null;const n=j,i=U(e,{lineCount:n.optional.number,multiline:n.optional.boolean});return i?{initialValue:t,params:i}:null},binding:{reader:t=>cn},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||"multiline"in t.params&&t.params.multiline?new ws(t.document,{formatter:vn,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:gs.monitor.defaultLineCount,value:n,viewProps:t.viewProps}):new Cs(t.document,{formatter:vn,value:n,viewProps:t.viewProps})}};class Rs{constructor(t){this.onValueChange_=this.onValueChange_.bind(this),this.reader=t.reader,this.writer=t.writer,this.emitter=new v,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}read(){const t=this.target.read();void 0!==t&&(this.value.rawValue=this.reader(t))}write_(t){this.writer(this.target,t)}onValueChange_(t){this.write_(t.rawValue),this.emitter.emit("change",{options:t.options,rawValue:t.rawValue,sender:this})}}function js(t,e){const n=t.accept(e.target.read(),e.params);if(l(n))return null;const i=j,r={target:e.target,initialValue:n.initialValue,params:n.params},s=t.binding.reader(r),o=t.binding.constraint?t.binding.constraint(r):void 0,a=S(s(n.initialValue),{constraint:o,equals:t.binding.equals}),h=new Rs({reader:s,target:e.target,value:a,writer:t.binding.writer(r)}),d=i.optional.boolean(e.params.disabled).value,p=i.optional.boolean(e.params.hidden).value,u=t.controller({constraint:o,document:e.document,initialValue:n.initialValue,params:n.params,value:h.value,viewProps:Qt.create({disabled:d,hidden:p})}),c=i.optional.string(e.params.label).value;return new xt(e.document,{binding:h,blade:ht(),props:V.fromObject({label:c||e.target.key}),valueController:u})}class Us{constructor(t){this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.emitter=new v,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const t=this.target.read();if(void 0===t)return;const e=this.value.rawValue,n=this.reader_(t);this.value.rawValue=bn(e,n),this.emitter.emit("update",{rawValue:n,sender:this})}onTick_(t){this.read()}}function Bs(t,e){return 0===e?new le:new he(t,null!=e?e:gs.monitor.defaultInterval)}function zs(t,e){var n,i,r;const s=j,o=t.accept(e.target.read(),e.params);if(l(o))return null;const a={target:e.target,initialValue:o.initialValue,params:o.params},h=t.binding.reader(a),d=null!==(i=null!==(n=s.optional.number(e.params.bufferSize).value)&&void 0!==n?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(o.params))&&void 0!==i?i:1,p=s.optional.number(e.params.interval).value,u=new Us({reader:h,target:e.target,ticker:Bs(e.document,p),value:fn(d)}),c=s.optional.boolean(e.params.disabled).value,v=s.optional.boolean(e.params.hidden).value,m=t.controller({document:e.document,params:o.params,value:u.value,viewProps:Qt.create({disabled:c,hidden:v})}),f=null!==(r=s.optional.string(e.params.label).value)&&void 0!==r?r:e.target.key;return new Ct(e.document,{binding:u,blade:ht(),props:V.fromObject({label:f}),valueController:m})}class Is{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t){"blade"===t.type?this.pluginsMap_.blades.unshift(t):"input"===t.type?this.pluginsMap_.inputs.unshift(t):"monitor"===t.type&&this.pluginsMap_.monitors.unshift(t)}createInput(t,e,n){if(l(e.read()))throw new p({context:{key:e.key},type:"nomatchingcontroller"});const i=this.pluginsMap_.inputs.reduce(((i,r)=>i||js(r,{document:t,target:e,params:n})),null);if(i)return i;throw new p({context:{key:e.key},type:"nomatchingcontroller"})}createMonitor(t,e,n){const i=this.pluginsMap_.monitors.reduce(((i,r)=>i||zs(r,{document:t,params:n,target:e})),null);if(i)return i;throw new p({context:{key:e.key},type:"nomatchingcontroller"})}createBlade(t,e){const n=this.pluginsMap_.blades.reduce(((n,i)=>n||ae(i,{document:t,params:e})),null);if(!n)throw new p({type:"nomatchingview",context:{params:e}});return n}createBladeApi(t){if(t instanceof xt)return new wt(t);if(t instanceof Ct)return new yt(t);if(t instanceof Ut)return new Mt(t,this);const e=this.pluginsMap_.blades.reduce(((e,n)=>e||n.api({controller:t,pool:this})),null);if(!e)throw p.shouldNeverHappen();return e}}function Ns(){const t=new Is;return[Wr,os,vs,fs,Or,Cr,yr,wr,ei,Ps,Os,Ds,at,Nt,$t,oe].forEach((e=>{t.register(e)})),t}class Fs extends n{constructor(t){super(t),this.emitter_=new v,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new r(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get options(){return this.controller_.valueController.props.get("options")}set options(t){this.controller_.valueController.props.set("options",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class Ks extends n{constructor(t){super(t),this.emitter_=new v,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new r(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(t){this.controller_.valueController.sliderController.props.set("maxValue",t)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(t){this.controller_.valueController.sliderController.props.set("minValue",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class Hs extends n{constructor(t){super(t),this.emitter_=new v,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new r(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(t){this.controller_.valueController.props.set("formatter",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}const Ys={id:"list",type:"blade",accept(t){const e=j,n=U(t,{options:e.required.custom(Nn),value:e.required.raw,view:e.required.constant("list"),label:e.optional.string});return n?{params:n}:null},controller(t){const e=new ge(t.document,{props:V.fromObject({options:Hn(t.params.options)}),value:S(t.params.value),viewProps:t.viewProps});return new Ft(t.document,{blade:t.blade,props:V.fromObject({label:t.params.label}),valueController:e})},api:t=>t.controller instanceof Ft&&t.controller.valueController instanceof ge?new Fs(t.controller):null};function qs(t){return t.reduce(((t,e)=>Object.assign(t,{[e.presetKey]:e.read()})),{})}function $s(t,e){t.forEach((t=>{const n=e[t.presetKey];void 0!==n&&t.write(n)}))}class Xs extends Tt{constructor(t,e){super(t,e)}get element(){return this.controller_.view.element}importPreset(t){$s(this.controller_.rackController.rack.find(xt).map((t=>t.binding.target)),t),this.refresh()}exportPreset(){return qs(this.controller_.rackController.rack.find(xt).map((t=>t.binding.target)))}refresh(){this.controller_.rackController.rack.find(xt).forEach((t=>{t.binding.read()})),this.controller_.rackController.rack.find(Ct).forEach((t=>{t.binding.read()}))}}class Gs extends It{constructor(t,e){super(t,{expanded:e.expanded,blade:e.blade,props:e.props,root:!0,viewProps:e.viewProps})}}const Qs={id:"slider",type:"blade",accept(t){const e=j,n=U(t,{max:e.required.number,min:e.required.number,view:e.required.constant("slider"),format:e.optional.function,label:e.optional.string,value:e.optional.number});return n?{params:n}:null},controller(t){var e,n;const i=null!==(e=t.params.value)&&void 0!==e?e:0,r=new zn(t.document,{baseStep:1,parser:an,sliderProps:V.fromObject({maxValue:t.params.max,minValue:t.params.min}),textProps:V.fromObject({draggingScale:Qn(void 0,i),formatter:null!==(n=t.params.format)&&void 0!==n?n:hn}),value:S(i),viewProps:t.viewProps});return new Ft(t.document,{blade:t.blade,props:V.fromObject({label:t.params.label}),valueController:r})},api:t=>t.controller instanceof Ft&&t.controller.valueController instanceof zn?new Ks(t.controller):null},Zs={id:"text",type:"blade",accept(t){const e=j,n=U(t,{parse:e.required.function,value:e.required.raw,view:e.required.constant("text"),format:e.optional.function,label:e.optional.string});return n?{params:n}:null},controller(t){var e;const n=new Ce(t.document,{parser:t.params.parse,props:V.fromObject({formatter:null!==(e=t.params.format)&&void 0!==e?e:t=>String(t)}),value:S(t.params.value),viewProps:t.viewProps});return new Ft(t.document,{blade:t.blade,props:V.fromObject({label:t.params.label}),valueController:n})},api:t=>t.controller instanceof Ft&&t.controller.valueController instanceof Ce?new Hs(t.controller):null};function Ws(t){const e=t.createElement("div");return e.classList.add(f("dfw")()),t.body&&t.body.appendChild(e),e}function Js(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const i=t.createElement("style");i.dataset.tpStyle=e,i.textContent=n,t.head.appendChild(i)}class to extends Xs{constructor(t){var e;const n=t||{},i=null!==(e=n.document)&&void 0!==e?e:X(),r=Ns();super(new Gs(i,{expanded:n.expanded,blade:ht(),props:V.fromObject({title:n.title}),viewProps:Qt.create()}),r),this.pool_=r,this.containerElem_=n.container||Ws(i),this.containerElem_.appendChild(this.element),this.doc_=i,this.usesDefaultWrapper_=!n.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw p.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw p.alreadyDisposed();if(this.usesDefaultWrapper_){const e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach((t=>{this.pool_.register(t),this.embedPluginStyle_(t)}))}embedPluginStyle_(t){t.css&&Js(this.document,`plugin-${t.id}`,t.css)}setUpDefaultPlugins_(){Js(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor transparent;scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:transparent}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:transparent solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #28292e);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #28292e);--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i,.tp-fldv_c>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach((t=>{this.embedPluginStyle_(t)})),this.registerPlugin({plugins:[Qs,Ys,oe,Zs]})}}const eo=new e("3.0.8");t.BladeApi=n,t.ButtonApi=c,t.FolderApi=Tt,t.InputBindingApi=wt,t.ListApi=Fs,t.MonitorBindingApi=yt,t.Pane=to,t.SeparatorApi=Kt,t.SliderApi=Ks,t.TabApi=ne,t.TabPageApi=ee,t.TextApi=Hs,t.TpChangeEvent=r,t.VERSION=eo,Object.defineProperty(t,"__esModule",{value:!0})}(Dr.exports);const Or={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"};class Rr{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){}dispose(){}}const jr=new e(-1,1,1,-1,0,1),Ur=new n;Ur.setAttribute("position",new i([-1,3,0,-1,-1,0,3,-1,0],3)),Ur.setAttribute("uv",new i([0,2,0,0,2,0],2));class Br{constructor(t){this._mesh=new r(Ur,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,jr)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class zr extends Rr{constructor(t,e){super(),this.textureID=void 0!==e?e:"tDiffuse",t instanceof s?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=o.clone(t.uniforms),this.material=new s({name:void 0!==t.name?t.name:"unspecified",defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new Br(this.material)}render(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class Ir extends Rr{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,n){const i=t.getContext(),r=t.state;let s,o;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0),this.inverse?(s=0,o=1):(s=1,o=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),r.buffers.stencil.setFunc(i.ALWAYS,s,4294967295),r.buffers.stencil.setClear(o),r.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.color.setMask(!0),r.buffers.depth.setMask(!0),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(i.EQUAL,1,4294967295),r.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),r.buffers.stencil.setLocked(!0)}}class Nr extends Rr{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class Fr{constructor(t,e){if(this.renderer=t,this._pixelRatio=t.getPixelRatio(),void 0===e){const n=t.getSize(new a);this._width=n.width,this._height=n.height,(e=new l(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:h})).texture.name="EffectComposer.rt1"}else this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new zr(Or),this.copyPass.material.blending=d,this.clock=new p}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let n=!1;for(let i=0,r=this.passes.length;i<r;i++){const e=this.passes[i];if(!1!==e.enabled){if(e.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),e.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),e.needsSwap){if(n){const e=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(e.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),n.setFunc(e.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Ir&&(e instanceof Ir?n=!0:e instanceof Nr&&(n=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(void 0===t){const e=this.renderer.getSize(new a);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(let r=0;r<this.passes.length;r++)this.passes[r].setSize(n,i)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Kr extends Rr{constructor(t,e,n,i,r){super(),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==r?r:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new u}render(t,e,n){const i=t.autoClear;let r,s;t.autoClear=!1,void 0!==this.overrideMaterial&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),r=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,r),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=s),t.autoClear=i}}const Hr={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new u(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class Yr extends Rr{constructor(t,e,n,i){super(),this.strength=void 0!==e?e:1,this.radius=n,this.threshold=i,this.resolution=void 0!==t?new a(t.x,t.y):new a(256,256),this.clearColor=new u(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let r=Math.round(this.resolution.x/2),d=Math.round(this.resolution.y/2);this.renderTargetBright=new l(r,d,{type:h}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let s=0;s<this.nMips;s++){const t=new l(r,d,{type:h});t.texture.name="UnrealBloomPass.h"+s,t.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(t);const e=new l(r,d,{type:h});e.texture.name="UnrealBloomPass.v"+s,e.texture.generateMipmaps=!1,this.renderTargetsVertical.push(e),r=Math.round(r/2),d=Math.round(d/2)}const p=Hr;this.highPassUniforms=o.clone(p.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new s({uniforms:this.highPassUniforms,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader}),this.separableBlurMaterials=[];const f=[3,5,7,9,11];r=Math.round(this.resolution.x/2),d=Math.round(this.resolution.y/2);for(let s=0;s<this.nMips;s++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(f[s])),this.separableBlurMaterials[s].uniforms.invSize.value=new a(1/r,1/d),r=Math.round(r/2),d=Math.round(d/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=e,this.compositeMaterial.uniforms.bloomRadius.value=.1;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new c(1,1,1),new c(1,1,1),new c(1,1,1),new c(1,1,1),new c(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const g=Or;this.copyUniforms=o.clone(g.uniforms),this.blendMaterial=new s({uniforms:this.copyUniforms,vertexShader:g.vertexShader,fragmentShader:g.fragmentShader,blending:v,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new u,this.oldClearAlpha=1,this.basic=new m,this.fsQuad=new Br(null)}dispose(){for(let t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(let t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose();for(let t=0;t<this.separableBlurMaterials.length;t++)this.separableBlurMaterials[t].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(t,e){let n=Math.round(t/2),i=Math.round(e/2);this.renderTargetBright.setSize(n,i);for(let r=0;r<this.nMips;r++)this.renderTargetsHorizontal[r].setSize(n,i),this.renderTargetsVertical[r].setSize(n,i),this.separableBlurMaterials[r].uniforms.invSize.value=new a(1/n,1/i),n=Math.round(n/2),i=Math.round(i/2)}render(t,e,n,i,r){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();const s=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),r&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,t.setRenderTarget(null),t.clear(),this.fsQuad.render(t)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t);let o=this.renderTargetBright;for(let a=0;a<this.nMips;a++)this.fsQuad.material=this.separableBlurMaterials[a],this.separableBlurMaterials[a].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[a].uniforms.direction.value=Yr.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[a]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[a].uniforms.colorTexture.value=this.renderTargetsHorizontal[a].texture,this.separableBlurMaterials[a].uniforms.direction.value=Yr.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[a]),t.clear(),this.fsQuad.render(t),o=this.renderTargetsVertical[a];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,r&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(n),this.fsQuad.render(t)),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=s}getSeperableBlurMaterial(t){const e=[];for(let n=0;n<t;n++)e.push(.39894*Math.exp(-.5*n*n/(t*t))/t);return new s({defines:{KERNEL_RADIUS:t},uniforms:{colorTexture:{value:null},invSize:{value:new a(.5,.5)},direction:{value:new a(.5,.5)},gaussianCoefficients:{value:e}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 invSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float gaussianCoefficients[KERNEL_RADIUS];\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tfloat weightSum = gaussianCoefficients[0];\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianCoefficients[i];\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}getCompositeMaterial(t){return new s({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}Yr.BlurDirectionX=new a(1,0),Yr.BlurDirectionY=new a(0,1);const qr={type:"change"},$r={type:"start"},Xr={type:"end"},Gr=new f,Qr=new g,Zr=Math.cos(70*C.DEG2RAD);class Wr extends b{constructor(t,e){super(),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new c,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:_.ROTATE,MIDDLE:_.DOLLY,RIGHT:_.PAN},this.touches={ONE:w.ROTATE,TWO:w.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",W),this._domElementKeyEvents=t},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",W),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(qr),n.update(),r=i.NONE},this.update=function(){const e=new c,a=(new x).setFromUnitVectors(t.up,new c(0,1,0)),p=a.clone().invert(),u=new c,v=new x,m=new c,f=2*Math.PI;return function(){const g=n.object.position;e.copy(g).sub(n.target),e.applyQuaternion(a),o.setFromVector3(e),n.autoRotate&&r===i.NONE&&A(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(o.theta+=l.theta*n.dampingFactor,o.phi+=l.phi*n.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let b=n.minAzimuthAngle,_=n.maxAzimuthAngle;isFinite(b)&&isFinite(_)&&(b<-Math.PI?b+=f:b>Math.PI&&(b-=f),_<-Math.PI?_+=f:_>Math.PI&&(_-=f),o.theta=b<=_?Math.max(b,Math.min(_,o.theta)):o.theta>(b+_)/2?Math.max(b,o.theta):Math.min(_,o.theta)),o.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,o.phi)),o.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),n.zoomToCursor&&M||n.object.isOrthographicCamera?o.radius=z(o.radius):o.radius=z(o.radius*h),e.setFromSpherical(o),e.applyQuaternion(p),g.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(l.set(0,0,0),d.set(0,0,0));let w=!1;if(n.zoomToCursor&&M){let i=null;if(n.object.isPerspectiveCamera){const t=e.length();i=z(t*h);const r=t-i;n.object.position.addScaledVector(E,r),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const t=new c(k.x,k.y,0);t.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix(),w=!0;const r=new c(k.x,k.y,0);r.unproject(n.object),n.object.position.sub(r).add(t),n.object.updateMatrixWorld(),i=e.length()}else n.zoomToCursor=!1;null!==i&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(i).add(n.object.position):(Gr.origin.copy(n.object.position),Gr.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Gr.direction))<Zr?t.lookAt(n.target):(Qr.setFromNormalAndCoplanarPoint(n.object.up,n.target),Gr.intersectPlane(Qr,n.target))))}else n.object.isOrthographicCamera&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix(),w=!0);return h=1,M=!1,!!(w||u.distanceToSquared(n.object.position)>s||8*(1-v.dot(n.object.quaternion))>s||m.distanceToSquared(n.target)>0)&&(n.dispatchEvent(qr),u.copy(n.object.position),v.copy(n.object.quaternion),m.copy(n.target),w=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",J),n.domElement.removeEventListener("pointerdown",X),n.domElement.removeEventListener("pointercancel",Q),n.domElement.removeEventListener("wheel",Z),n.domElement.removeEventListener("pointermove",G),n.domElement.removeEventListener("pointerup",Q),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",W),n._domElementKeyEvents=null)};const n=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=i.NONE;const s=1e-6,o=new y,l=new y;let h=1;const d=new c,p=new a,u=new a,v=new a,m=new a,f=new a,g=new a,b=new a,C=new a,P=new a,E=new c,k=new a;let M=!1;const T=[],S={};function V(){return Math.pow(.95,n.zoomSpeed)}function A(t){l.theta-=t}function L(t){l.phi-=t}const D=function(){const t=new c;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),d.add(t)}}(),O=function(){const t=new c;return function(e,i){!0===n.screenSpacePanning?t.setFromMatrixColumn(i,1):(t.setFromMatrixColumn(i,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),d.add(t)}}(),R=function(){const t=new c;return function(e,i){const r=n.domElement;if(n.object.isPerspectiveCamera){const s=n.object.position;t.copy(s).sub(n.target);let o=t.length();o*=Math.tan(n.object.fov/2*Math.PI/180),D(2*e*o/r.clientHeight,n.object.matrix),O(2*i*o/r.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(D(e*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),O(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):n.enablePan=!1}}();function j(t){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?h/=t:n.enableZoom=!1}function U(t){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?h*=t:n.enableZoom=!1}function B(e){if(!n.zoomToCursor)return;M=!0;const i=n.domElement.getBoundingClientRect(),r=e.clientX-i.left,s=e.clientY-i.top,o=i.width,a=i.height;k.x=r/o*2-1,k.y=-s/a*2+1,E.set(k.x,k.y,1).unproject(t).sub(t.position).normalize()}function z(t){return Math.max(n.minDistance,Math.min(n.maxDistance,t))}function I(t){p.set(t.clientX,t.clientY)}function N(t){m.set(t.clientX,t.clientY)}function F(){if(1===T.length)p.set(T[0].pageX,T[0].pageY);else{const t=.5*(T[0].pageX+T[1].pageX),e=.5*(T[0].pageY+T[1].pageY);p.set(t,e)}}function K(){if(1===T.length)m.set(T[0].pageX,T[0].pageY);else{const t=.5*(T[0].pageX+T[1].pageX),e=.5*(T[0].pageY+T[1].pageY);m.set(t,e)}}function H(){const t=T[0].pageX-T[1].pageX,e=T[0].pageY-T[1].pageY,n=Math.sqrt(t*t+e*e);b.set(0,n)}function Y(t){if(1==T.length)u.set(t.pageX,t.pageY);else{const e=et(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);u.set(n,i)}v.subVectors(u,p).multiplyScalar(n.rotateSpeed);const e=n.domElement;A(2*Math.PI*v.x/e.clientHeight),L(2*Math.PI*v.y/e.clientHeight),p.copy(u)}function q(t){if(1===T.length)f.set(t.pageX,t.pageY);else{const e=et(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);f.set(n,i)}g.subVectors(f,m).multiplyScalar(n.panSpeed),R(g.x,g.y),m.copy(f)}function $(t){const e=et(t),i=t.pageX-e.x,r=t.pageY-e.y,s=Math.sqrt(i*i+r*r);C.set(0,s),P.set(0,Math.pow(C.y/b.y,n.zoomSpeed)),j(P.y),b.copy(C)}function X(t){!1!==n.enabled&&(0===T.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",G),n.domElement.addEventListener("pointerup",Q)),function(t){T.push(t)}(t),"touch"===t.pointerType?function(t){switch(tt(t),T.length){case 1:switch(n.touches.ONE){case w.ROTATE:if(!1===n.enableRotate)return;F(),r=i.TOUCH_ROTATE;break;case w.PAN:if(!1===n.enablePan)return;K(),r=i.TOUCH_PAN;break;default:r=i.NONE}break;case 2:switch(n.touches.TWO){case w.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&H(),n.enablePan&&K(),r=i.TOUCH_DOLLY_PAN;break;case w.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&H(),n.enableRotate&&F(),r=i.TOUCH_DOLLY_ROTATE;break;default:r=i.NONE}break;default:r=i.NONE}r!==i.NONE&&n.dispatchEvent($r)}(t):function(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case _.DOLLY:if(!1===n.enableZoom)return;!function(t){B(t),b.set(t.clientX,t.clientY)}(t),r=i.DOLLY;break;case _.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;N(t),r=i.PAN}else{if(!1===n.enableRotate)return;I(t),r=i.ROTATE}break;case _.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;I(t),r=i.ROTATE}else{if(!1===n.enablePan)return;N(t),r=i.PAN}break;default:r=i.NONE}r!==i.NONE&&n.dispatchEvent($r)}(t))}function G(t){!1!==n.enabled&&("touch"===t.pointerType?function(t){switch(tt(t),r){case i.TOUCH_ROTATE:if(!1===n.enableRotate)return;Y(t),n.update();break;case i.TOUCH_PAN:if(!1===n.enablePan)return;q(t),n.update();break;case i.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(t){n.enableZoom&&$(t),n.enablePan&&q(t)}(t),n.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(t){n.enableZoom&&$(t),n.enableRotate&&Y(t)}(t),n.update();break;default:r=i.NONE}}(t):function(t){switch(r){case i.ROTATE:if(!1===n.enableRotate)return;!function(t){u.set(t.clientX,t.clientY),v.subVectors(u,p).multiplyScalar(n.rotateSpeed);const e=n.domElement;A(2*Math.PI*v.x/e.clientHeight),L(2*Math.PI*v.y/e.clientHeight),p.copy(u),n.update()}(t);break;case i.DOLLY:if(!1===n.enableZoom)return;!function(t){C.set(t.clientX,t.clientY),P.subVectors(C,b),P.y>0?j(V()):P.y<0&&U(V()),b.copy(C),n.update()}(t);break;case i.PAN:if(!1===n.enablePan)return;!function(t){f.set(t.clientX,t.clientY),g.subVectors(f,m).multiplyScalar(n.panSpeed),R(g.x,g.y),m.copy(f),n.update()}(t)}}(t))}function Q(t){!function(t){delete S[t.pointerId];for(let e=0;e<T.length;e++)if(T[e].pointerId==t.pointerId)return void T.splice(e,1)}(t),0===T.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",G),n.domElement.removeEventListener("pointerup",Q)),n.dispatchEvent(Xr),r=i.NONE}function Z(t){!1!==n.enabled&&!1!==n.enableZoom&&r===i.NONE&&(t.preventDefault(),n.dispatchEvent($r),function(t){B(t),t.deltaY<0?U(V()):t.deltaY>0&&j(V()),n.update()}(t),n.dispatchEvent(Xr))}function W(t){!1!==n.enabled&&!1!==n.enablePan&&function(t){let e=!1;switch(t.code){case n.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?L(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):R(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?L(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):R(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?A(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):R(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?A(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):R(-n.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),n.update())}(t)}function J(t){!1!==n.enabled&&t.preventDefault()}function tt(t){let e=S[t.pointerId];void 0===e&&(e=new a,S[t.pointerId]=e),e.set(t.pageX,t.pageY)}function et(t){const e=t.pointerId===T[0].pointerId?T[1]:T[0];return S[e.pointerId]}n.domElement.addEventListener("contextmenu",J),n.domElement.addEventListener("pointerdown",X),n.domElement.addEventListener("pointercancel",Q),n.domElement.addEventListener("wheel",Z,{passive:!1}),this.update()}}var Jr={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]},ts=function(t,e,n){return t*(1-n)+e*n},es=function(t){var e,n,i,r,s,o,a,l,h,d;t||(t={});l=(t.nshades||72)-1,a=t.format||"hex",(o=t.colormap)||(o="jet");if("string"==typeof o){if(o=o.toLowerCase(),!Jr[o])throw Error(o+" not a supported colorscale");s=Jr[o]}else{if(!Array.isArray(o))throw Error("unsupported colormap option",o);s=o.slice()}if(s.length>l+1)throw new Error(o+" map requires nshades to be at least size "+s.length);h=Array.isArray(t.alpha)?2!==t.alpha.length?[1,1]:t.alpha.slice():"number"==typeof t.alpha?[t.alpha,t.alpha]:[1,1];e=s.map((function(t){return Math.round(t.index*l)})),h[0]=Math.min(Math.max(h[0],0),1),h[1]=Math.min(Math.max(h[1],0),1);var p=s.map((function(t,e){var n=s[e].index,i=s[e].rgb.slice();return 4===i.length&&i[3]>=0&&i[3]<=1||(i[3]=h[0]+(h[1]-h[0])*n),i})),u=[];for(d=0;d<e.length-1;++d){r=e[d+1]-e[d],n=p[d],i=p[d+1];for(var c=0;c<r;c++){var v=c/r;u.push([Math.round(ts(n[0],i[0],v)),Math.round(ts(n[1],i[1],v)),Math.round(ts(n[2],i[2],v)),ts(n[3],i[3],v)])}}u.push(s[s.length-1].rgb.concat(h[1])),"hex"===a?u=u.map(is):"rgbaString"===a?u=u.map(rs):"float"===a&&(u=u.map(ns));return u};function ns(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function is(t){for(var e,n="#",i=0;i<3;++i)n+=("00"+(e=(e=t[i]).toString(16))).substr(e.length);return n}function rs(t){return"rgba("+t.join(",")+")"}const ss=(t,e)=>es({colormap:t,nshades:e,format:"float",alpha:1}),os=(t,e,n)=>t*(1-n)+e*n,as=(t,e=0,n=1)=>Math.min(n,Math.max(e,t));/(iPad|iPhone|iPod)/g.test(navigator.userAgent);const ls={audio:{channelCount:{ideal:2,min:1},echoCancellation:!0,autoGainControl:!0,noiseSuppression:!0}};const hs=Math.min(1.2,window.devicePixelRatio);const ds=Math.PI/2;const ps=new class{meydaPromise({constrains:t=ls,bufferSize:e=512}){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(t).then((t=>this.successStream({stream:t,bufferSize:e}))).catch((t=>this.errorStream(t))):Promise.reject(new Error("getUserMedia is not supported in this browser. Please use a modern browser with Web Audio API support."))}successStream({stream:t,bufferSize:e}){this.audioContext=new AudioContext;const n=t.getAudioTracks()[0];return n&&(this.streamAudioSettings=n.getSettings()),this.source=this.audioContext.createMediaStreamSource(t),this.meyda=P.exports.createMeydaAnalyzer({audioContext:this.audioContext,source:this.source,bufferSize:e}),this.meyda.start(),t}errorStream(t){"NotAllowedError"===t.name||"NotFoundError"===t.name||t.name}features(t=["amplitudeSpectrum","spectralCentroid","spectralRolloff","perceptualSharpness","loudness","rms","chroma","mfcc"]){return this.meyda&&this.audioContext?this.meyda.get(t):null}signal(){return this.meyda?this.meyda._m.signal:null}},us=document.querySelector("#cover"),cs=document.querySelector("#canvas"),vs=new Lr;let ms,fs,gs,bs,_s,ws,xs,ys,Cs,Ps,Es;document.querySelector("#stats").appendChild(vs.dom);const ks={amount:4,xscale:50},Ms={loudness:0,perceptualSharpness:0,perceptualSpread:0,spectralFlatness:0},Ts=new Dr.exports.Pane({title:"controls",expanded:!0});Ts.addInput(ks,"amount",{min:1,max:6}),Ts.addInput(ks,"xscale",{min:20,max:100}),Ts.addMonitor(Ms,"loudness",{view:"graph",min:0,max:1}),Ts.addMonitor(Ms,"perceptualSpread",{view:"graph",min:0,max:1}),Ts.addMonitor(Ms,"perceptualSharpness",{view:"graph",min:0,max:1}),Ts.addMonitor(Ms,"spectralFlatness",{view:"graph",min:0,max:1});class Ss{init(){const t=new O;bs=new D(75,1.3333333333333333,5,1e4),bs.position.set(0,-5,10),bs.lookAt(0,0,0),gs=new R({canvas:cs,antialias:!0,alpha:!0,powerPreference:"high-performance"}),gs.setPixelRatio(hs),xs=function(t,e){const n=new Wr(t,e);return n.enableDamping=!0,n.enablePan=!1,n.maxDistance=25,n.minDistance=7,n.dampingFactor=.05,n.minAzimuthAngle=-Math.PI,n.maxAzimuthAngle=Math.PI,n.minPolarAngle=1,n.maxPolarAngle=ds,n}(bs,cs),xs.update();const e=new j(16777215,.75);e.position.set(0,1,1),t.add(e);const i=new Kr(t,bs);let s=cs.clientWidth*hs,o=cs.clientHeight*hs,l=new a(s,o);ws=new Yr(l,0,0,0),ws.threshold=0,ws.strength=1.75,ws.radius=1.5,_s=new Fr(gs),_s.addPass(i),_s.addPass(ws),ms=((t,e)=>{let n=[];for(let i=0;i<t;i++)n.push(Array(e).fill(0));return n})(50,512),Ps=new U,Es=new u,ys=new B(new z(1),new I({color:16777215}),512),ys.instanceMatrix.setUsage(N),ys.position.set(-8,0,0),ys.scale.set(1,1,1);let h=ss("picnic",ms.length);fs=ss("picnic",512).map((t=>(new u).fromArray(t))),fs.forEach(((t,e)=>ys.setColorAt(e,t))),t.add(ys),Cs=new F;for(let a=0;a<ms.length;a++)if(ms[a]){const t=new n;t.setAttribute("position",new K(new Float32Array(3*ms[a].length),3)),t.setDrawRange(0,ms[a].length);const e=new H({uniforms:{uColor:{value:h[ms.length-a-1]}},vertexShader:"\n    precision highp float;\n    precision highp int;\n  \n    uniform mat4 viewMatrix;\n    uniform mat4 projectionMatrix;\n    uniform mat4 modelMatrix;\n   \n    attribute vec3 position;\n  \n    uniform vec4 uColor;\n  \n    varying vec4 vColor;\n  \n    void main(){\n      \n      gl_Position = projectionMatrix * viewMatrix * // THREE.Camera\n        modelMatrix * // THREE.Mesh\n        vec4( position, 1.0 ); // from THREE.BufferGeometry\n  \n      vColor = uColor;\n    }\n  ",fragmentShader:"\n    precision highp float;\n  \n    varying vec4 vColor;\n  \n    void main(){\n      gl_FragColor =vColor;\n    }\n  ",transparent:!0,side:Y}),i=new r(t,e);i.frustumCulled=!1,Cs.add(i)}t.add(Cs)}intro(){Sr.timeline().to("#cover",{duration:1,autoAlpha:0,ease:"power2.out"}).to("#cover",{duration:1,delay:1,autoAlpha:0,ease:"power2.out"})}render([{timestamp:t}]){if(function({renderer:t,composer:e}){const n=t.domElement,i=n.clientWidth*hs|0,r=n.clientHeight*hs|0,s=n.width!==i||n.height!==r;return s&&(t.setSize(i,r,!1),e.setSize(i,r)),s}({renderer:gs,composer:_s})){const{clientWidth:t,clientHeight:e}=gs.domElement;bs.aspect=t/e,bs.updateProjectionMatrix()}const e=ps.features(["perceptualSharpness","perceptualSpread","spectralFlatness","amplitudeSpectrum","loudness"]);if(!e)return;const{amplitudeSpectrum:n}=e;ms.pop(),ms.unshift(n),Object.assign(Ms,(t=>{const{perceptualSpread:e,perceptualSharpness:n,spectralFlatness:i,loudness:r}=t;return{loudness:(s=3,o=50,a=r.total,as((a-s)/(o-s))),perceptualSharpness:n,perceptualSpread:e,spectralFlatness:i};var s,o,a})(e));const{loudness:i,perceptualSharpness:r,perceptualSpread:s}=Ms;ws.strength=os(1,1.25,i),ws.radius=os(1,3,r);for(let a=0;a<ms.length;a++){const t=Cs.children[a].geometry.getAttribute("position");for(let e=0;e<3*t.count;e++){const n=3*e;t.array[n+0]=ks.xscale+ks.xscale*Math.log10(e/ms[a].length),t.array[n+1]=-15+Ms.perceptualSharpness+ms[a][e]*(ks.amount*i),t.array[n+2]=15-a*(5*s)}t.needsUpdate=!0}const o=ps.signal();if(o&&ys){for(let e=0;e<512;e++)Ps.position.set(15*e/512,30*o[e],0),Ps.rotation.set(.001*(t+i),0,i),Ps.scale.set(.5*i,.5*r,.5*s),Ps.updateMatrix(),Es.set(fs[e]),ys.setColorAt(e,Es),ys.setMatrixAt(e,Ps.matrix);ys.instanceMatrix.needsUpdate=!0,ys.instanceColor.needsUpdate=!0}xs.update(),_s.render(),vs.update()}run$(){return Sr.timeline().to("#cover",{duration:2,autoAlpha:1,ease:"expo.inOut"}),q(X([(n=us,E(n,"click").pipe(A(250),L())),G(ps.meydaPromise({fftSize:512}))]).pipe(Q({count:2,delay:1e3}),$((()=>{this.init(),this.intro()}))),(e=32,t=E(document,"keydown").pipe(k((t=>t.keyCode===e)),M(!1),T((t=>!t))),S().pipe(V(t),k((t=>!t[1])))).pipe($(this.render))).pipe(Z((t=>W))).subscribe();var t,e,n}}document.addEventListener("DOMContentLoaded",(()=>{(new Ss).run$()}));
