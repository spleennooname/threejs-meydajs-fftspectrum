import{c as t,O as e,M as i,B as n,F as r,S as s,U as o,V as a,W as l,H as h,N as d,C as p,a as u,b as c,A as v,d as m,R as _,P as f,e as g,f as b,T as w,Q as x,g as y,h as C,m as P,i as E,j as k,s as M,k as S,l as T,w as D,n as V,o as A,p as L,q as R,r as O,D as j,t as U,I as B,u as z,v as I,x as F,G as K,y as N,z as H,E as Y,J as q,K as $,L as X,X as Z,Y as G,Z as Q,_ as W}from"./vendor.f9ef3d0f.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();function J(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tt(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}
/*!
 * GSAP 3.10.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var et,it,nt,rt,st,ot,at,lt,ht,dt,pt,ut,ct,vt,mt,_t,ft,gt,bt,wt,xt,yt,Ct,Pt,Et,kt,Mt,St,Tt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Dt={duration:.5,overwrite:!1,delay:0},Vt=2*Math.PI,At=Vt/4,Lt=0,Rt=Math.sqrt,Ot=Math.cos,jt=Math.sin,Ut=function(t){return"string"==typeof t},Bt=function(t){return"function"==typeof t},zt=function(t){return"number"==typeof t},It=function(t){return void 0===t},Ft=function(t){return"object"==typeof t},Kt=function(t){return!1!==t},Nt=function(){return"undefined"!=typeof window},Ht=function(t){return Bt(t)||Ut(t)},Yt="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},qt=Array.isArray,$t=/(?:-?\.?\d|\.)+/gi,Xt=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Zt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Gt=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Qt=/[+-]=-?[.\d]+/,Wt=/[^,'"\[\]\s]+/gi,Jt=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,te={},ee={},ie=function(t){return(ee=Me(t,te))&&_n},ne=function(t,e){return!e&&void 0},re=function(t,e){return t&&(te[t]=e)&&ee&&(ee[t]=e)||te},se=function(){return 0},oe={},ae=[],le={},he={},de={},pe=30,ue=[],ce="",ve=function(t){var e,i,n=t[0];if(Ft(n)||Bt(n)||(t=[t]),!(e=(n._gsap||{}).harness)){for(i=ue.length;i--&&!ue[i].targetTest(n););e=ue[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new Bi(t[i],e)))||t.splice(i,1);return t},me=function(t){return t._gsap||ve(ri(t))[0]._gsap},_e=function(t,e,i){return(i=t[e])&&Bt(i)?t[e]():It(i)&&t.getAttribute&&t.getAttribute(e)||i},fe=function(t,e){return(t=t.split(",")).forEach(e)||t},ge=function(t){return Math.round(1e5*t)/1e5||0},be=function(t){return Math.round(1e7*t)/1e7||0},we=function(t,e){var i=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),"+"===i?t+n:"-"===i?t-n:"*"===i?t*n:t/n},xe=function(t,e){for(var i=e.length,n=0;t.indexOf(e[n])<0&&++n<i;);return n<i},ye=function(){var t,e,i=ae.length,n=ae.slice(0);for(le={},ae.length=0,t=0;t<i;t++)(e=n[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Ce=function(t,e,i,n){ae.length&&ye(),t.render(e,i,n),ae.length&&ye()},Pe=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(Wt).length<2?e:Ut(t)?t.trim():t},Ee=function(t){return t},ke=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},Me=function(t,e){for(var i in e)t[i]=e[i];return t},Se=function t(e,i){for(var n in i)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(e[n]=Ft(i[n])?t(e[n]||(e[n]={}),i[n]):i[n]);return e},Te=function(t,e){var i,n={};for(i in t)i in e||(n[i]=t[i]);return n},De=function(t){var e,i=t.parent||it,n=t.keyframes?(e=qt(t.keyframes),function(t,i){for(var n in i)n in t||"duration"===n&&e||"ease"===n||(t[n]=i[n])}):ke;if(Kt(t.inherit))for(;i;)n(t,i.vars.defaults),i=i.parent||i._dp;return t},Ve=function(t,e,i,n,r){void 0===i&&(i="_first"),void 0===n&&(n="_last");var s,o=t[n];if(r)for(s=e[r];o&&o[r]>s;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[n]=e,e._prev=o,e.parent=e._dp=t,e},Ae=function(t,e,i,n){void 0===i&&(i="_first"),void 0===n&&(n="_last");var r=e._prev,s=e._next;r?r._next=s:t[i]===e&&(t[i]=s),s?s._prev=r:t[n]===e&&(t[n]=r),e._next=e._prev=e.parent=null},Le=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Re=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Oe=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},je=function t(e){return!e||e._ts&&t(e.parent)},Ue=function(t){return t._repeat?Be(t._tTime,t=t.duration()+t._rDelay)*t:0},Be=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},ze=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ie=function(t){return t._end=be(t._start+(t._tDur/Math.abs(t._ts||t._rts||1e-8)||0))},Fe=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=be(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ie(t),i._dirty||Re(i,t)),t},Ke=function(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=ze(t.rawTime(),e),(!e._dur||ti(0,e.totalDuration(),i)-e._tTime>1e-8)&&e.render(i,!0)),Re(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-1e-8}},Ne=function(t,e,i,n){return e.parent&&Le(e),e._start=be((zt(i)?i:i||t!==it?Qe(t,i,e):t._time)+e._delay),e._end=be(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Ve(t,e,"_first","_last",t._sort?"_start":0),$e(e)||(t._recent=e),n||Ke(t,e),t},He=function(t,e){return te.ScrollTrigger?te.ScrollTrigger.create(e,t):void 0},Ye=function(t,e,i,n){return qi(t,e),t._initted?!i&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&at!==Ei.frame?(ae.push(t),t._lazy=[e,n],1):void 0:1},qe=function t(e){var i=e.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||t(i))},$e=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},Xe=function(t,e,i,n){var r=t._repeat,s=be(e)||0,o=t._tTime/t._tDur;return o&&!n&&(t._time*=s/t._dur),t._dur=s,t._tDur=r?r<0?1e10:be(s*(r+1)+t._rDelay*r):s,o>0&&!n?Fe(t,t._tTime=t._tDur*o):t.parent&&Ie(t),i||Re(t.parent,t),t},Ze=function(t){return t instanceof Ii?Re(t):Xe(t,t._dur)},Ge={_start:0,endTime:se,totalDuration:se},Qe=function t(e,i,n){var r,s,o,a=e.labels,l=e._recent||Ge,h=e.duration()>=1e8?l.endTime(!1):e._dur;return Ut(i)&&(isNaN(i)||i in a)?(s=i.charAt(0),o="%"===i.substr(-1),r=i.indexOf("="),"<"===s||">"===s?(r>=0&&(i=i.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(i.substr(1))||0)*(o?(r<0?l:n).totalDuration()/100:1)):r<0?(i in a||(a[i]=h),a[i]):(s=parseFloat(i.charAt(r-1)+i.substr(r+1)),o&&n&&(s=s/100*(qt(n)?n[0]:n).totalDuration()),r>1?t(e,i.substr(0,r-1),n)+s:h+s)):null==i?h:+i},We=function(t,e,i){var n,r,s=zt(e[1]),o=(s?2:1)+(t<2?0:1),a=e[o];if(s&&(a.duration=e[1]),a.parent=i,t){for(n=a,r=i;r&&!("immediateRender"in n);)n=r.vars.defaults||{},r=Kt(r.vars.inherit)&&r.parent;a.immediateRender=Kt(n.immediateRender),t<2?a.runBackwards=1:a.startAt=e[o-1]}return new Qi(e[0],a,e[o+1])},Je=function(t,e){return t||0===t?e(t):e},ti=function(t,e,i){return i<t?t:i>e?e:i},ei=function(t,e){return Ut(t)&&(e=Jt.exec(t))?e[1]:""},ii=[].slice,ni=function(t,e){return t&&Ft(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Ft(t[0]))&&!t.nodeType&&t!==nt},ri=function(t,e,i){return!Ut(t)||i||!rt&&ki()?qt(t)?function(t,e,i){return void 0===i&&(i=[]),t.forEach((function(t){var n;return Ut(t)&&!e||ni(t,1)?(n=i).push.apply(n,ri(t)):i.push(t)}))||i}(t,i):ni(t)?ii.call(t,0):t?[t]:[]:ii.call((e||st).querySelectorAll(t),0)},si=function(t){return t.sort((function(){return.5-Math.random()}))},oi=function(t){if(Bt(t))return t;var e=Ft(t)?t:{each:t},i=Li(e.ease),n=e.from||0,r=parseFloat(e.base)||0,s={},o=n>0&&n<1,a=isNaN(n)||o,l=e.axis,h=n,d=n;return Ut(n)?h=d={center:.5,edges:.5,end:1}[n]||0:!o&&a&&(h=n[0],d=n[1]),function(t,o,p){var u,c,v,m,_,f,g,b,w,x=(p||e).length,y=s[x];if(!y){if(!(w="auto"===e.grid?0:(e.grid||[1,1e8])[1])){for(g=-1e8;g<(g=p[w++].getBoundingClientRect().left)&&w<x;);w--}for(y=s[x]=[],u=a?Math.min(w,x)*h-.5:n%w,c=1e8===w?0:a?x*d/w-.5:n/w|0,g=0,b=1e8,f=0;f<x;f++)v=f%w-u,m=c-(f/w|0),y[f]=_=l?Math.abs("y"===l?m:v):Rt(v*v+m*m),_>g&&(g=_),_<b&&(b=_);"random"===n&&si(y),y.max=g-b,y.min=b,y.v=x=(parseFloat(e.amount)||parseFloat(e.each)*(w>x?x-1:l?"y"===l?x/w:w:Math.max(w,x/w))||0)*("edges"===n?-1:1),y.b=x<0?r-x:r,y.u=ei(e.amount||e.each)||0,i=i&&x<0?Vi(i):i}return x=(y[t]-y.min)/y.max||0,be(y.b+(i?i(x):x)*y.v)+y.u}},ai=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var n=Math.round(parseFloat(i)/t)*t*e;return(n-n%1)/e+(zt(i)?0:ei(i))}},li=function(t,e){var i,n,r=qt(t);return!r&&Ft(t)&&(i=r=t.radius||1e8,t.values?(t=ri(t.values),(n=!zt(t[0]))&&(i*=i)):t=ai(t.increment)),Je(e,r?Bt(t)?function(e){return n=t(e),Math.abs(n-e)<=i?n:e}:function(e){for(var r,s,o=parseFloat(n?e.x:e),a=parseFloat(n?e.y:0),l=1e8,h=0,d=t.length;d--;)(r=n?(r=t[d].x-o)*r+(s=t[d].y-a)*s:Math.abs(t[d]-o))<l&&(l=r,h=d);return h=!i||l<=i?t[h]:e,n||h===e||zt(e)?h:h+ei(e)}:ai(t))},hi=function(t,e,i,n){return Je(qt(t)?!e:!0===i?!!(i=0):!n,(function(){return qt(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+.99*i))/i)*i*n)/n}))},di=function(t,e,i){return Je(i,(function(i){return t[~~e(i)]}))},pi=function(t){for(var e,i,n,r,s=0,o="";~(e=t.indexOf("random(",s));)n=t.indexOf(")",e),r="["===t.charAt(e+7),i=t.substr(e+7,n-e-7).match(r?Wt:$t),o+=t.substr(s,e-s)+hi(r?i:+i[0],r?0:+i[1],+i[2]||1e-5),s=n+1;return o+t.substr(s,t.length-s)},ui=function(t,e,i,n,r){var s=e-t,o=n-i;return Je(r,(function(e){return i+((e-t)/s*o||0)}))},ci=function(t,e,i){var n,r,s,o=t.labels,a=1e8;for(n in o)(r=o[n]-e)<0==!!i&&r&&a>(r=Math.abs(r))&&(s=n,a=r);return s},vi=function(t,e,i){var n,r,s=t.vars,o=s[e];if(o)return n=s[e+"Params"],r=s.callbackScope||t,i&&ae.length&&ye(),n?o.apply(r,n):o.call(r)},mi=function(t){return Le(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&vi(t,"onInterrupt"),t},_i=function(t){var e=(t=!t.name&&t.default||t).name,i=Bt(t),n=e&&!i&&t.init?function(){this._props=[]}:t,r={init:se,render:an,add:Hi,kill:hn,modifier:ln,rawVars:0},s={targetTest:0,get:0,getSetter:nn,aliases:{},register:0};if(ki(),t!==n){if(he[e])return;ke(n,ke(Te(t,r),s)),Me(n.prototype,Me(r,Te(t,s))),he[n.prop=e]=n,t.targetTest&&(ue.push(n),oe[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}re(e,n),t.register&&t.register(_n,n,un)},fi={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},gi=function(t,e,i){return 255*(6*(t+=t<0?1:t>1?-1:0)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)+.5|0},bi=function(t,e,i){var n,r,s,o,a,l,h,d,p,u,c=t?zt(t)?[t>>16,t>>8&255,255&t]:0:fi.black;if(!c){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),fi[t])c=fi[t];else if("#"===t.charAt(0)){if(t.length<6&&(n=t.charAt(1),r=t.charAt(2),s=t.charAt(3),t="#"+n+n+r+r+s+s+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(c=parseInt(t.substr(1,6),16))>>16,c>>8&255,255&c,parseInt(t.substr(7),16)/255];c=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]}else if("hsl"===t.substr(0,3))if(c=u=t.match($t),e){if(~t.indexOf("="))return c=t.match(Xt),i&&c.length<4&&(c[3]=1),c}else o=+c[0]%360/360,a=+c[1]/100,n=2*(l=+c[2]/100)-(r=l<=.5?l*(a+1):l+a-l*a),c.length>3&&(c[3]*=1),c[0]=gi(o+1/3,n,r),c[1]=gi(o,n,r),c[2]=gi(o-1/3,n,r);else c=t.match($t)||fi.transparent;c=c.map(Number)}return e&&!u&&(n=c[0]/255,r=c[1]/255,s=c[2]/255,l=((h=Math.max(n,r,s))+(d=Math.min(n,r,s)))/2,h===d?o=a=0:(p=h-d,a=l>.5?p/(2-h-d):p/(h+d),o=h===n?(r-s)/p+(r<s?6:0):h===r?(s-n)/p+2:(n-r)/p+4,o*=60),c[0]=~~(o+.5),c[1]=~~(100*a+.5),c[2]=~~(100*l+.5)),i&&c.length<4&&(c[3]=1),c},wi=function(t){var e=[],i=[],n=-1;return t.split(yi).forEach((function(t){var r=t.match(Zt)||[];e.push.apply(e,r),i.push(n+=r.length+1)})),e.c=i,e},xi=function(t,e,i){var n,r,s,o,a="",l=(t+a).match(yi),h=e?"hsla(":"rgba(",d=0;if(!l)return t;if(l=l.map((function(t){return(t=bi(t,e,1))&&h+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),i&&(s=wi(t),(n=i.c).join(a)!==s.c.join(a)))for(o=(r=t.replace(yi,"1").split(Zt)).length-1;d<o;d++)a+=r[d]+(~n.indexOf(d)?l.shift()||h+"0,0,0,0)":(s.length?s:l.length?l:i).shift());if(!r)for(o=(r=t.split(yi)).length-1;d<o;d++)a+=r[d]+l[d];return a+r[o]},yi=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in fi)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Ci=/hsl[a]?\(/,Pi=function(t){var e,i=t.join(" ");if(yi.lastIndex=0,yi.test(i))return e=Ci.test(i),t[1]=xi(t[1],e),t[0]=xi(t[0],e,wi(t[1])),!0},Ei=(_t=Date.now,ft=500,gt=33,bt=_t(),wt=bt,yt=xt=1e3/240,Pt=function t(e){var i,n,r,s,o=_t()-wt,a=!0===e;if(o>ft&&(bt+=o-gt),((i=(r=(wt+=o)-bt)-yt)>0||a)&&(s=++ct.frame,vt=r-1e3*ct.time,ct.time=r/=1e3,yt+=i+(i>=xt?4:xt-i),n=1),a||(dt=pt(t)),n)for(mt=0;mt<Ct.length;mt++)Ct[mt](r,vt,s,e)},ct={time:0,frame:0,tick:function(){Pt(!0)},deltaRatio:function(t){return vt/(1e3/(t||60))},wake:function(){ot&&(!rt&&Nt()&&(nt=rt=window,st=nt.document||{},te.gsap=_n,(nt.gsapVersions||(nt.gsapVersions=[])).push(_n.version),ie(ee||nt.GreenSockGlobals||!nt.gsap&&nt||{}),ut=nt.requestAnimationFrame),dt&&ct.sleep(),pt=ut||function(t){return setTimeout(t,yt-1e3*ct.time+1|0)},ht=1,Pt(2))},sleep:function(){(ut?nt.cancelAnimationFrame:clearTimeout)(dt),ht=0,pt=se},lagSmoothing:function(t,e){ft=t||1/1e-8,gt=Math.min(e,ft,0)},fps:function(t){xt=1e3/(t||240),yt=1e3*ct.time+xt},add:function(t,e,i){var n=e?function(e,i,r,s){t(e,i,r,s),ct.remove(n)}:t;return ct.remove(t),Ct[i?"unshift":"push"](n),ki(),n},remove:function(t,e){~(e=Ct.indexOf(t))&&Ct.splice(e,1)&&mt>=e&&mt--},_listeners:Ct=[]}),ki=function(){return!ht&&Ei.wake()},Mi={},Si=/^[\d.\-M][\d.\-,\s]/,Ti=/["']/g,Di=function(t){for(var e,i,n,r={},s=t.substr(1,t.length-3).split(":"),o=s[0],a=1,l=s.length;a<l;a++)i=s[a],e=a!==l-1?i.lastIndexOf(","):i.length,n=i.substr(0,e),r[o]=isNaN(n)?n.replace(Ti,"").trim():+n,o=i.substr(e+1).trim();return r},Vi=function(t){return function(e){return 1-t(1-e)}},Ai=function t(e,i){for(var n,r=e._first;r;)r instanceof Ii?t(r,i):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===i||(r.timeline?t(r.timeline,i):(n=r._ease,r._ease=r._yEase,r._yEase=n,r._yoyo=i)),r=r._next},Li=function(t,e){return t&&(Bt(t)?t:Mi[t]||function(t){var e,i,n,r,s=(t+"").split("("),o=Mi[s[0]];return o&&s.length>1&&o.config?o.config.apply(null,~t.indexOf("{")?[Di(s[1])]:(e=t,i=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",i),e.substring(i,~r&&r<n?e.indexOf(")",n+1):n)).split(",").map(Pe)):Mi._CE&&Si.test(t)?Mi._CE("",t):o}(t))||e},Ri=function(t,e,i,n){void 0===i&&(i=function(t){return 1-e(1-t)}),void 0===n&&(n=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,s={easeIn:e,easeOut:i,easeInOut:n};return fe(t,(function(t){for(var e in Mi[t]=te[t]=s,Mi[r=t.toLowerCase()]=i,s)Mi[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Mi[t+"."+e]=s[e]})),s},Oi=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},ji=function t(e,i,n){var r=i>=1?i:1,s=(n||(e?.3:.45))/(i<1?i:1),o=s/Vt*(Math.asin(1/r)||0),a=function(t){return 1===t?1:r*Math.pow(2,-10*t)*jt((t-o)*s)+1},l="out"===e?a:"in"===e?function(t){return 1-a(1-t)}:Oi(a);return s=Vt/s,l.config=function(i,n){return t(e,i,n)},l},Ui=function t(e,i){void 0===i&&(i=1.70158);var n=function(t){return t?--t*t*((i+1)*t+i)+1:0},r="out"===e?n:"in"===e?function(t){return 1-n(1-t)}:Oi(n);return r.config=function(i){return t(e,i)},r};fe("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var i=e<5?e+1:e;Ri(t+",Power"+(i-1),e?function(t){return Math.pow(t,i)}:function(t){return t},(function(t){return 1-Math.pow(1-t,i)}),(function(t){return t<.5?Math.pow(2*t,i)/2:1-Math.pow(2*(1-t),i)/2}))})),Mi.Linear.easeNone=Mi.none=Mi.Linear.easeIn,Ri("Elastic",ji("in"),ji("out"),ji()),Et=7.5625,Mt=1/(kt=2.75),Ri("Bounce",(function(t){return 1-St(1-t)}),St=function(t){return t<Mt?Et*t*t:t<.7272727272727273?Et*Math.pow(t-1.5/kt,2)+.75:t<.9090909090909092?Et*(t-=2.25/kt)*t+.9375:Et*Math.pow(t-2.625/kt,2)+.984375}),Ri("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),Ri("Circ",(function(t){return-(Rt(1-t*t)-1)})),Ri("Sine",(function(t){return 1===t?1:1-Ot(t*At)})),Ri("Back",Ui("in"),Ui("out"),Ui()),Mi.SteppedEase=Mi.steps=te.SteppedEase={config:function(t,e){void 0===t&&(t=1);var i=1/t,n=t+(e?0:1),r=e?1:0;return function(t){return((n*ti(0,.99999999,t)|0)+r)*i}}},Dt.ease=Mi["quad.out"],fe("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return ce+=t+","+t+"Params,"}));var Bi=function(t,e){this.id=Lt++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:_e,this.set=e?e.getSetter:nn},zi=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Xe(this,+t.duration,1,1),this.data=t.data,ht||Ei.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Xe(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(ki(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Fe(this,t),!i._dp||i.parent||Ke(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Ne(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&1e-8===Math.abs(this._zTime)||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),Ce(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Ue(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Ue(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*i,e):this._repeat?Be(this._tTime,i)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?ze(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,this.totalTime(ti(-this._delay,this._tDur,e),!0),Ie(this),Oe(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ki(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&1e-8!==Math.abs(this._zTime)&&(this._tTime-=1e-8)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Ne(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(Kt(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ze(e.rawTime(t),this):this._tTime:this._tTime},e.globalTime=function(t){for(var e=this,i=arguments.length?t:e.rawTime();e;)i=e._start+i/(e._ts||1),e=e._dp;return i},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,Ze(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,Ze(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Qe(this,t),Kt(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,Kt(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,i=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<this.endTime(!0)-1e-8))},e.eventCallback=function(t,e,i){var n=this.vars;return arguments.length>1?(e?(n[t]=e,i&&(n[t+"Params"]=i),"onUpdate"===t&&(this._onUpdate=e)):delete n[t],this):n[t]},e.then=function(t){var e=this;return new Promise((function(i){var n=Bt(t)?t:Ee,r=function(){var t=e.then;e.then=null,Bt(n)&&(n=n(e))&&(n.then||n===e)&&(e.then=t),i(n),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?r():e._prom=r}))},e.kill=function(){mi(this)},t}();ke(zi.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Ii=function(t){function e(e,i){var n;return void 0===e&&(e={}),(n=t.call(this,e)||this).labels={},n.smoothChildTiming=!!e.smoothChildTiming,n.autoRemoveChildren=!!e.autoRemoveChildren,n._sort=Kt(e.sortChildren),it&&Ne(e.parent||it,J(n),i),e.reversed&&n.reverse(),e.paused&&n.paused(!0),e.scrollTrigger&&He(J(n),e.scrollTrigger),n}tt(e,t);var i=e.prototype;return i.to=function(t,e,i){return We(0,arguments,this),this},i.from=function(t,e,i){return We(1,arguments,this),this},i.fromTo=function(t,e,i,n){return We(2,arguments,this),this},i.set=function(t,e,i){return e.duration=0,e.parent=this,De(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new Qi(t,e,Qe(this,i),1),this},i.call=function(t,e,i){return Ne(this,Qi.delayedCall(0,t,e),i)},i.staggerTo=function(t,e,i,n,r,s,o){return i.duration=e,i.stagger=i.stagger||n,i.onComplete=s,i.onCompleteParams=o,i.parent=this,new Qi(t,i,Qe(this,r)),this},i.staggerFrom=function(t,e,i,n,r,s,o){return i.runBackwards=1,De(i).immediateRender=Kt(i.immediateRender),this.staggerTo(t,e,i,n,r,s,o)},i.staggerFromTo=function(t,e,i,n,r,s,o,a){return n.startAt=i,De(n).immediateRender=Kt(n.immediateRender),this.staggerTo(t,e,n,r,s,o,a)},i.render=function(t,e,i){var n,r,s,o,a,l,h,d,p,u,c,v,m=this._time,_=this._dirty?this.totalDuration():this._tDur,f=this._dur,g=t<=0?0:be(t),b=this._zTime<0!=t<0&&(this._initted||!f);if(this!==it&&g>_&&t>=0&&(g=_),g!==this._tTime||i||b){if(m!==this._time&&f&&(g+=this._time-m,t+=this._time-m),n=g,p=this._start,l=!(d=this._ts),b&&(f||(m=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(c=this._yoyo,a=f+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,i);if(n=be(g%a),g===_?(o=this._repeat,n=f):((o=~~(g/a))&&o===g/a&&(n=f,o--),n>f&&(n=f)),u=Be(this._tTime,a),!m&&this._tTime&&u!==o&&(u=o),c&&1&o&&(n=f-n,v=1),o!==u&&!this._lock){var w=c&&1&u,x=w===(c&&1&o);if(o<u&&(w=!w),m=w?0:f,this._lock=1,this.render(m||(v?0:be(o*a)),e,!f)._lock=0,this._tTime=g,!e&&this.parent&&vi(this,"onRepeat"),this.vars.repeatRefresh&&!v&&(this.invalidate()._lock=1),m&&m!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(f=this._dur,_=this._tDur,x&&(this._lock=2,m=w?f:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!v&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;Ai(this,v)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(h=function(t,e,i){var n;if(i>e)for(n=t._first;n&&n._start<=i;){if("isPause"===n.data&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if("isPause"===n.data&&n._start<e)return n;n=n._prev}}(this,be(m),be(n)),h&&(g-=n-(n=h._start))),this._tTime=g,this._time=n,this._act=!d,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,m=0),!m&&n&&!e&&(vi(this,"onStart"),this._tTime!==g))return this;if(n>=m&&t>=0)for(r=this._first;r;){if(s=r._next,(r._act||n>=r._start)&&r._ts&&h!==r){if(r.parent!==this)return this.render(t,e,i);if(r.render(r._ts>0?(n-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(n-r._start)*r._ts,e,i),n!==this._time||!this._ts&&!l){h=0,s&&(g+=this._zTime=-1e-8);break}}r=s}else{r=this._last;for(var y=t<0?t:n;r;){if(s=r._prev,(r._act||y<=r._end)&&r._ts&&h!==r){if(r.parent!==this)return this.render(t,e,i);if(r.render(r._ts>0?(y-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(y-r._start)*r._ts,e,i),n!==this._time||!this._ts&&!l){h=0,s&&(g+=this._zTime=y?-1e-8:1e-8);break}}r=s}}if(h&&!e&&(this.pause(),h.render(n>=m?0:-1e-8)._zTime=n>=m?1:-1,this._ts))return this._start=p,Ie(this),this.render(t,e,i);this._onUpdate&&!e&&vi(this,"onUpdate",!0),(g===_&&this._tTime>=this.totalDuration()||!g&&m)&&(p!==this._start&&Math.abs(d)===Math.abs(this._ts)||this._lock||((t||!f)&&(g===_&&this._ts>0||!g&&this._ts<0)&&Le(this,1),e||t<0&&!m||!g&&!m&&_||(vi(this,g===_&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(g<_&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(t,e){var i=this;if(zt(e)||(e=Qe(this,e,t)),!(t instanceof zi)){if(qt(t))return t.forEach((function(t){return i.add(t,e)})),this;if(Ut(t))return this.addLabel(t,e);if(!Bt(t))return this;t=Qi.delayedCall(0,t)}return this!==t?Ne(this,t,e):this},i.getChildren=function(t,e,i,n){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=-1e8);for(var r=[],s=this._first;s;)s._start>=n&&(s instanceof Qi?e&&r.push(s):(i&&r.push(s),t&&r.push.apply(r,s.getChildren(!0,e,i)))),s=s._next;return r},i.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},i.remove=function(t){return Ut(t)?this.removeLabel(t):Bt(t)?this.killTweensOf(t):(Ae(this,t),t===this._recent&&(this._recent=this._last),Re(this))},i.totalTime=function(e,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=be(Ei.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,i),this._forcing=0,this):this._tTime},i.addLabel=function(t,e){return this.labels[t]=Qe(this,e),this},i.removeLabel=function(t){return delete this.labels[t],this},i.addPause=function(t,e,i){var n=Qi.delayedCall(0,e||se,i);return n.data="isPause",this._hasPause=1,Ne(this,n,Qe(this,t))},i.removePause=function(t){var e=this._first;for(t=Qe(this,t);e;)e._start===t&&"isPause"===e.data&&Le(e),e=e._next},i.killTweensOf=function(t,e,i){for(var n=this.getTweensOf(t,i),r=n.length;r--;)Fi!==n[r]&&n[r].kill(t,e);return this},i.getTweensOf=function(t,e){for(var i,n=[],r=ri(t),s=this._first,o=zt(e);s;)s instanceof Qi?xe(s._targets,r)&&(o?(!Fi||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&n.push(s):(i=s.getTweensOf(r,e)).length&&n.push.apply(n,i),s=s._next;return n},i.tweenTo=function(t,e){e=e||{};var i,n=this,r=Qe(n,t),s=e,o=s.startAt,a=s.onStart,l=s.onStartParams,h=s.immediateRender,d=Qi.to(n,ke({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(o&&"time"in o?o.time:n._time))/n.timeScale())||1e-8,onStart:function(){if(n.pause(),!i){var t=e.duration||Math.abs((r-(o&&"time"in o?o.time:n._time))/n.timeScale());d._dur!==t&&Xe(d,t,0,1).render(d._time,!0,!0),i=1}a&&a.apply(d,l||[])}},e));return h?d.render(0):d},i.tweenFromTo=function(t,e,i){return this.tweenTo(e,ke({startAt:{time:Qe(this,t)}},i))},i.recent=function(){return this._recent},i.nextLabel=function(t){return void 0===t&&(t=this._time),ci(this,Qe(this,t))},i.previousLabel=function(t){return void 0===t&&(t=this._time),ci(this,Qe(this,t),1)},i.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+1e-8)},i.shiftChildren=function(t,e,i){void 0===i&&(i=0);for(var n,r=this._first,s=this.labels;r;)r._start>=i&&(r._start+=t,r._end+=t),r=r._next;if(e)for(n in s)s[n]>=i&&(s[n]+=t);return Re(this)},i.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},i.clear=function(t){void 0===t&&(t=!0);for(var e,i=this._first;i;)e=i._next,this.remove(i),i=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Re(this)},i.totalDuration=function(t){var e,i,n,r=0,s=this,o=s._last,a=1e8;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(n=s.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),(i=o._start)>a&&s._sort&&o._ts&&!s._lock?(s._lock=1,Ne(s,o,i-o._delay,1)._lock=0):a=i,i<0&&o._ts&&(r-=i,(!n&&!s._dp||n&&n.smoothChildTiming)&&(s._start+=i/s._ts,s._time-=i,s._tTime-=i),s.shiftChildren(-i,!1,-1/0),a=0),o._end>r&&o._ts&&(r=o._end),o=e;Xe(s,s===it&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(t){if(it._ts&&(Ce(it,ze(t,it)),at=Ei.frame),Ei.frame>=pe){pe+=Tt.autoSleep||120;var e=it._first;if((!e||!e._ts)&&Tt.autoSleep&&Ei._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Ei.sleep()}}},e}(zi);ke(Ii.prototype,{_lock:0,_hasPause:0,_forcing:0});var Fi,Ki,Ni=function(t,e,i,n,r,s,o){var a,l,h,d,p,u,c,v,m=new un(this._pt,t,e,0,1,on,null,r),_=0,f=0;for(m.b=i,m.e=n,i+="",(c=~(n+="").indexOf("random("))&&(n=pi(n)),s&&(s(v=[i,n],t,e),i=v[0],n=v[1]),l=i.match(Gt)||[];a=Gt.exec(n);)d=a[0],p=n.substring(_,a.index),h?h=(h+1)%5:"rgba("===p.substr(-5)&&(h=1),d!==l[f++]&&(u=parseFloat(l[f-1])||0,m._pt={_next:m._pt,p:p||1===f?p:",",s:u,c:"="===d.charAt(1)?we(u,d)-u:parseFloat(d)-u,m:h&&h<4?Math.round:0},_=Gt.lastIndex);return m.c=_<n.length?n.substring(_,n.length):"",m.fp=o,(Qt.test(n)||c)&&(m.e=0),this._pt=m,m},Hi=function(t,e,i,n,r,s,o,a,l){Bt(n)&&(n=n(r||0,t,s));var h,d=t[e],p="get"!==i?i:Bt(d)?l?t[e.indexOf("set")||!Bt(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():d,u=Bt(d)?l?tn:Ji:Wi;if(Ut(n)&&(~n.indexOf("random(")&&(n=pi(n)),"="===n.charAt(1)&&((h=we(p,n)+(ei(p)||0))||0===h)&&(n=h)),p!==n||Ki)return isNaN(p*n)||""===n?Ni.call(this,t,e,p,n,u,a||Tt.stringFilter,l):(h=new un(this._pt,t,e,+p||0,n-(p||0),"boolean"==typeof d?sn:rn,0,u),l&&(h.fp=l),o&&h.modifier(o,this,t),this._pt=h)},Yi=function(t,e,i,n,r,s){var o,a,l,h;if(he[t]&&!1!==(o=new he[t]).init(r,o.rawVars?e[t]:function(t,e,i,n,r){if(Bt(t)&&(t=Xi(t,r,e,i,n)),!Ft(t)||t.style&&t.nodeType||qt(t)||Yt(t))return Ut(t)?Xi(t,r,e,i,n):t;var s,o={};for(s in t)o[s]=Xi(t[s],r,e,i,n);return o}(e[t],n,r,s,i),i,n,s)&&(i._pt=a=new un(i._pt,r,t,0,1,o.render,o,0,o.priority),i!==lt))for(l=i._ptLookup[i._targets.indexOf(r)],h=o._props.length;h--;)l[o._props[h]]=a;return o},qi=function t(e,i){var n,r,s,o,a,l,h,d,p,u,c,v,m,_=e.vars,f=_.ease,g=_.startAt,b=_.immediateRender,w=_.lazy,x=_.onUpdate,y=_.onUpdateParams,C=_.callbackScope,P=_.runBackwards,E=_.yoyoEase,k=_.keyframes,M=_.autoRevert,S=e._dur,T=e._startAt,D=e._targets,V=e.parent,A=V&&"nested"===V.data?V.parent._targets:D,L="auto"===e._overwrite&&!et,R=e.timeline;if(R&&(!k||!f)&&(f="none"),e._ease=Li(f,Dt.ease),e._yEase=E?Vi(Li(!0===E?f:E,Dt.ease)):0,E&&e._yoyo&&!e._repeat&&(E=e._yEase,e._yEase=e._ease,e._ease=E),e._from=!R&&!!_.runBackwards,!R||k&&!_.stagger){if(v=(d=D[0]?me(D[0]).harness:0)&&_[d.prop],n=Te(_,oe),T&&(Le(T.render(-1,!0)),T._lazy=0),g)if(Le(e._startAt=Qi.set(D,ke({data:"isStart",overwrite:!1,parent:V,immediateRender:!0,lazy:Kt(w),startAt:null,delay:0,onUpdate:x,onUpdateParams:y,callbackScope:C,stagger:0},g))),i<0&&!b&&!M&&e._startAt.render(-1,!0),b){if(i>0&&!M&&(e._startAt=0),S&&i<=0)return void(i&&(e._zTime=i))}else!1===M&&(e._startAt=0);else if(P&&S)if(T)!M&&(e._startAt=0);else if(i&&(b=!1),s=ke({overwrite:!1,data:"isFromStart",lazy:b&&Kt(w),immediateRender:b,stagger:0,parent:V},n),v&&(s[d.prop]=v),Le(e._startAt=Qi.set(D,s)),i<0&&e._startAt.render(-1,!0),e._zTime=i,b){if(!i)return}else t(e._startAt,1e-8);for(e._pt=e._ptCache=0,w=S&&Kt(w)||w&&!S,r=0;r<D.length;r++){if(h=(a=D[r])._gsap||ve(D)[r]._gsap,e._ptLookup[r]=u={},le[h.id]&&ae.length&&ye(),c=A===D?r:A.indexOf(a),d&&!1!==(p=new d).init(a,v||n,e,c,A)&&(e._pt=o=new un(e._pt,a,p.name,0,1,p.render,p,0,p.priority),p._props.forEach((function(t){u[t]=o})),p.priority&&(l=1)),!d||v)for(s in n)he[s]&&(p=Yi(s,n,e,c,a,A))?p.priority&&(l=1):u[s]=o=Hi.call(e,a,s,"get",n[s],c,A,0,_.stringFilter);e._op&&e._op[r]&&e.kill(a,e._op[r]),L&&e._pt&&(Fi=e,it.killTweensOf(a,u,e.globalTime(i)),m=!e.parent,Fi=0),e._pt&&w&&(le[h.id]=1)}l&&pn(e),e._onInit&&e._onInit(e)}e._onUpdate=x,e._initted=(!e._op||e._pt)&&!m,k&&i<=0&&R.render(1e8,!0,!0)},$i=function(t,e,i,n){var r,s,o=e.ease||n||"power1.inOut";if(qt(e))s=i[t]||(i[t]=[]),e.forEach((function(t,i){return s.push({t:i/(e.length-1)*100,v:t,e:o})}));else for(r in e)s=i[r]||(i[r]=[]),"ease"===r||s.push({t:parseFloat(t),v:e[r],e:o})},Xi=function(t,e,i,n,r){return Bt(t)?t.call(e,i,n,r):Ut(t)&&~t.indexOf("random(")?pi(t):t},Zi=ce+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Gi={};fe(Zi+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return Gi[t]=1}));var Qi=function(t){function e(e,i,n,r){var s;"number"==typeof i&&(n.duration=i,i=n,n=null);var o,a,l,h,d,p,u,c,v=(s=t.call(this,r?i:De(i))||this).vars,m=v.duration,_=v.delay,f=v.immediateRender,g=v.stagger,b=v.overwrite,w=v.keyframes,x=v.defaults,y=v.scrollTrigger,C=v.yoyoEase,P=i.parent||it,E=(qt(e)||Yt(e)?zt(e[0]):"length"in i)?[e]:ri(e);if(s._targets=E.length?ve(E):ne(0,!Tt.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=b,w||g||Ht(m)||Ht(_)){if(i=s.vars,(o=s.timeline=new Ii({data:"nested",defaults:x||{}})).kill(),o.parent=o._dp=J(s),o._start=0,g||Ht(m)||Ht(_)){if(h=E.length,u=g&&oi(g),Ft(g))for(d in g)~Zi.indexOf(d)&&(c||(c={}),c[d]=g[d]);for(a=0;a<h;a++)(l=Te(i,Gi)).stagger=0,C&&(l.yoyoEase=C),c&&Me(l,c),p=E[a],l.duration=+Xi(m,J(s),a,p,E),l.delay=(+Xi(_,J(s),a,p,E)||0)-s._delay,!g&&1===h&&l.delay&&(s._delay=_=l.delay,s._start+=_,l.delay=0),o.to(p,l,u?u(a,p,E):0),o._ease=Mi.none;o.duration()?m=_=0:s.timeline=0}else if(w){De(ke(o.vars.defaults,{ease:"none"})),o._ease=Li(w.ease||i.ease||"none");var k,M,S,T=0;if(qt(w))w.forEach((function(t){return o.to(E,t,">")}));else{for(d in l={},w)"ease"===d||"easeEach"===d||$i(d,w[d],l,w.easeEach);for(d in l)for(k=l[d].sort((function(t,e){return t.t-e.t})),T=0,a=0;a<k.length;a++)(S={ease:(M=k[a]).e,duration:(M.t-(a?k[a-1].t:0))/100*m})[d]=M.v,o.to(E,S,T),T+=S.duration;o.duration()<m&&o.to({},{duration:m-o.duration()})}}m||s.duration(m=o.duration())}else s.timeline=0;return!0!==b||et||(Fi=J(s),it.killTweensOf(E),Fi=0),Ne(P,J(s),n),i.reversed&&s.reverse(),i.paused&&s.paused(!0),(f||!m&&!w&&s._start===be(P._time)&&Kt(f)&&je(J(s))&&"nested"!==P.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-_))),y&&He(J(s),y),s}tt(e,t);var i=e.prototype;return i.render=function(t,e,i){var n,r,s,o,a,l,h,d,p,u=this._time,c=this._tDur,v=this._dur,m=t>c-1e-8&&t>=0?c:t<1e-8?0:t;if(v){if(m!==this._tTime||!t||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=t<0){if(n=m,d=this.timeline,this._repeat){if(o=v+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*o+t,e,i);if(n=be(m%o),m===c?(s=this._repeat,n=v):((s=~~(m/o))&&s===m/o&&(n=v,s--),n>v&&(n=v)),(l=this._yoyo&&1&s)&&(p=this._yEase,n=v-n),a=Be(this._tTime,o),n===u&&!i&&this._initted)return this._tTime=m,this;s!==a&&(d&&this._yEase&&Ai(d,l),!this.vars.repeatRefresh||l||this._lock||(this._lock=i=1,this.render(be(o*s),!0).invalidate()._lock=0))}if(!this._initted){if(Ye(this,t<0?t:n,i,e))return this._tTime=0,this;if(u!==this._time)return this;if(v!==this._dur)return this.render(t,e,i)}if(this._tTime=m,this._time=n,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=h=(p||this._ease)(n/v),this._from&&(this.ratio=h=1-h),n&&!u&&!e&&(vi(this,"onStart"),this._tTime!==m))return this;for(r=this._pt;r;)r.r(h,r.d),r=r._next;d&&d.render(t<0?t:!n&&l?-1e-8:d._dur*d._ease(n/this._dur),e,i)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,i),vi(this,"onUpdate")),this._repeat&&s!==a&&this.vars.onRepeat&&!e&&this.parent&&vi(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),(t||!v)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&Le(this,1),e||t<0&&!u||!m&&!u||(vi(this,m===c?"onComplete":"onReverseComplete",!0),this._prom&&!(m<c&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,i,n){var r,s,o,a=t.ratio,l=e<0||!e&&(!t._start&&qe(t)&&(t._initted||!$e(t))||(t._ts<0||t._dp._ts<0)&&!$e(t))?0:1,h=t._rDelay,d=0;if(h&&t._repeat&&(d=ti(0,t._tDur,e),s=Be(d,h),t._yoyo&&1&s&&(l=1-l),s!==Be(t._tTime,h)&&(a=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==a||n||1e-8===t._zTime||!e&&t._zTime){if(!t._initted&&Ye(t,e,n,i))return;for(o=t._zTime,t._zTime=e||(i?1e-8:0),i||(i=e&&!o),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=d,r=t._pt;r;)r.r(l,r.d),r=r._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!i&&vi(t,"onUpdate"),d&&t._repeat&&!i&&t.parent&&vi(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&Le(t,1),i||(vi(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,i);return this},i.targets=function(){return this._targets},i.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},i.resetTo=function(t,e,i,n){ht||Ei.wake(),this._ts||this.play();var r=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||qi(this,r),function(t,e,i,n,r,s,o){var a,l,h,d=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!d)for(d=t._ptCache[e]=[],l=t._ptLookup,h=t._targets.length;h--;){if((a=l[h][e])&&a.d&&a.d._pt)for(a=a.d._pt;a&&a.p!==e;)a=a._next;if(!a)return Ki=1,t.vars[e]="+=0",qi(t,o),Ki=0,1;d.push(a)}for(h=d.length;h--;)(a=d[h]).s=!n&&0!==n||r?a.s+(n||0)+s*a.c:n,a.c=i-a.s,a.e&&(a.e=ge(i)+ei(a.e)),a.b&&(a.b=a.s+ei(a.b))}(this,t,e,i,n,this._ease(r/this._dur),r)?this.resetTo(t,e,i,n):(Fe(this,0),this.parent||Ve(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?mi(this):this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Fi&&!0!==Fi.vars.overwrite)._first||mi(this),this.parent&&i!==this.timeline.totalDuration()&&Xe(this,this._dur*this.timeline._tDur/i,0,1),this}var n,r,s,o,a,l,h,d=this._targets,p=t?ri(t):d,u=this._ptLookup,c=this._pt;if((!e||"all"===e)&&function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0}(d,p))return"all"===e&&(this._pt=0),mi(this);for(n=this._op=this._op||[],"all"!==e&&(Ut(e)&&(a={},fe(e,(function(t){return a[t]=1})),e=a),e=function(t,e){var i,n,r,s,o=t[0]?me(t[0]).harness:0,a=o&&o.aliases;if(!a)return e;for(n in i=Me({},e),a)if(n in i)for(r=(s=a[n].split(",")).length;r--;)i[s[r]]=i[n];return i}(d,e)),h=d.length;h--;)if(~p.indexOf(d[h]))for(a in r=u[h],"all"===e?(n[h]=e,o=r,s={}):(s=n[h]=n[h]||{},o=e),o)(l=r&&r[a])&&("kill"in l.d&&!0!==l.d.kill(a)||Ae(this,l,"_pt"),delete r[a]),"all"!==s&&(s[a]=1);return this._initted&&!this._pt&&c&&mi(this),this},e.to=function(t,i){return new e(t,i,arguments[2])},e.from=function(t,e){return We(1,arguments)},e.delayedCall=function(t,i,n,r){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:i,onReverseComplete:i,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:r})},e.fromTo=function(t,e,i){return We(2,arguments)},e.set=function(t,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(t,i)},e.killTweensOf=function(t,e,i){return it.killTweensOf(t,e,i)},e}(zi);ke(Qi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),fe("staggerTo,staggerFrom,staggerFromTo",(function(t){Qi[t]=function(){var e=new Ii,i=ii.call(arguments,0);return i.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,i)}}));var Wi=function(t,e,i){return t[e]=i},Ji=function(t,e,i){return t[e](i)},tn=function(t,e,i,n){return t[e](n.fp,i)},en=function(t,e,i){return t.setAttribute(e,i)},nn=function(t,e){return Bt(t[e])?Ji:It(t[e])&&t.setAttribute?en:Wi},rn=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},sn=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},on=function(t,e){var i=e._pt,n="";if(!t&&e.b)n=e.b;else if(1===t&&e.e)n=e.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round(1e4*(i.s+i.c*t))/1e4)+n,i=i._next;n+=e.c}e.set(e.t,e.p,n,e)},an=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},ln=function(t,e,i,n){for(var r,s=this._pt;s;)r=s._next,s.p===n&&s.modifier(t,e,i),s=r},hn=function(t){for(var e,i,n=this._pt;n;)i=n._next,n.p===t&&!n.op||n.op===t?Ae(this,n,"_pt"):n.dep||(e=1),n=i;return!e},dn=function(t,e,i,n){n.mSet(t,e,n.m.call(n.tween,i,n.mt),n)},pn=function(t){for(var e,i,n,r,s=t._pt;s;){for(e=s._next,i=n;i&&i.pr>s.pr;)i=i._next;(s._prev=i?i._prev:r)?s._prev._next=s:n=s,(s._next=i)?i._prev=s:r=s,s=e}t._pt=n},un=function(){function t(t,e,i,n,r,s,o,a,l){this.t=e,this.s=n,this.c=r,this.p=i,this.r=s||rn,this.d=o||this,this.set=a||Wi,this.pr=l||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,i){this.mSet=this.mSet||this.set,this.set=dn,this.m=t,this.mt=i,this.tween=e},t}();fe(ce+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return oe[t]=1})),te.TweenMax=te.TweenLite=Qi,te.TimelineLite=te.TimelineMax=Ii,it=new Ii({sortChildren:!1,defaults:Dt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Tt.stringFilter=Pi;var cn={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((function(t){return _i(t)}))},timeline:function(t){return new Ii(t)},getTweensOf:function(t,e){return it.getTweensOf(t,e)},getProperty:function(t,e,i,n){Ut(t)&&(t=ri(t)[0]);var r=me(t||{}).get,s=i?Ee:Pe;return"native"===i&&(i=""),t?e?s((he[e]&&he[e].get||r)(t,e,i,n)):function(e,i,n){return s((he[e]&&he[e].get||r)(t,e,i,n))}:t},quickSetter:function(t,e,i){if((t=ri(t)).length>1){var n=t.map((function(t){return _n.quickSetter(t,e,i)})),r=n.length;return function(t){for(var e=r;e--;)n[e](t)}}t=t[0]||{};var s=he[e],o=me(t),a=o.harness&&(o.harness.aliases||{})[e]||e,l=s?function(e){var n=new s;lt._pt=0,n.init(t,i?e+i:e,lt,0,[t]),n.render(1,n),lt._pt&&an(1,lt)}:o.set(t,a);return s?l:function(e){return l(t,a,i?e+i:e,o,1)}},quickTo:function(t,e,i){var n,r=_n.to(t,Me(((n={})[e]="+=0.1",n.paused=!0,n),i||{})),s=function(t,i,n){return r.resetTo(e,t,i,n)};return s.tween=r,s},isTweening:function(t){return it.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Li(t.ease,Dt.ease)),Se(Dt,t||{})},config:function(t){return Se(Tt,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,n=t.plugins,r=t.defaults,s=t.extendTimeline;(n||"").split(",").forEach((function(t){return t&&!he[t]&&!te[t]&&ne()})),de[e]=function(t,e,n){return i(ri(t),ke(e||{},r),n)},s&&(Ii.prototype[e]=function(t,i,n){return this.add(de[e](t,Ft(i)?i:(n=i)&&{},this),n)})},registerEase:function(t,e){Mi[t]=Li(e)},parseEase:function(t,e){return arguments.length?Li(t,e):Mi},getById:function(t){return it.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var i,n,r=new Ii(t);for(r.smoothChildTiming=Kt(t.smoothChildTiming),it.remove(r),r._dp=0,r._time=r._tTime=it._time,i=it._first;i;)n=i._next,!e&&!i._dur&&i instanceof Qi&&i.vars.onComplete===i._targets[0]||Ne(r,i,i._start-i._delay),i=n;return Ne(it,r,0),r},utils:{wrap:function t(e,i,n){var r=i-e;return qt(e)?di(e,t(0,e.length),i):Je(n,(function(t){return(r+(t-e)%r)%r+e}))},wrapYoyo:function t(e,i,n){var r=i-e,s=2*r;return qt(e)?di(e,t(0,e.length-1),i):Je(n,(function(t){return e+((t=(s+(t-e)%s)%s||0)>r?s-t:t)}))},distribute:oi,random:hi,snap:li,normalize:function(t,e,i){return ui(t,e,0,1,i)},getUnit:ei,clamp:function(t,e,i){return Je(i,(function(i){return ti(t,e,i)}))},splitColor:bi,toArray:ri,selector:function(t){return t=ri(t)[0]||ne()||{},function(e){var i=t.current||t.nativeElement||t;return ri(e,i.querySelectorAll?i:i===t?ne()||st.createElement("div"):t)}},mapRange:ui,pipe:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(i){return t(parseFloat(i))+(e||ei(i))}},interpolate:function t(e,i,n,r){var s=isNaN(e+i)?0:function(t){return(1-t)*e+t*i};if(!s){var o,a,l,h,d,p=Ut(e),u={};if(!0===n&&(r=1)&&(n=null),p)e={p:e},i={p:i};else if(qt(e)&&!qt(i)){for(l=[],h=e.length,d=h-2,a=1;a<h;a++)l.push(t(e[a-1],e[a]));h--,s=function(t){t*=h;var e=Math.min(d,~~t);return l[e](t-e)},n=i}else r||(e=Me(qt(e)?[]:{},e));if(!l){for(o in i)Hi.call(u,e,o,"get",i[o]);s=function(t){return an(t,u)||(p?e.p:e)}}}return Je(n,s)},shuffle:si},install:ie,effects:de,ticker:Ei,updateRoot:Ii.updateRoot,plugins:he,globalTimeline:it,core:{PropTween:un,globals:re,Tween:Qi,Timeline:Ii,Animation:zi,getCache:me,_removeLinkedListItem:Ae,suppressOverwrites:function(t){return et=t}}};fe("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return cn[t]=Qi[t]})),Ei.add(Ii.updateRoot),lt=cn.to({},{duration:0});var vn=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},mn=function(t,e){return{name:t,rawVars:1,init:function(t,i,n){n._onInit=function(t){var n,r;if(Ut(i)&&(n={},fe(i,(function(t){return n[t]=1})),i=n),e){for(r in n={},i)n[r]=e(i[r]);i=n}!function(t,e){var i,n,r,s=t._targets;for(i in e)for(n=s.length;n--;)(r=t._ptLookup[n][i])&&(r=r.d)&&(r._pt&&(r=vn(r,i)),r&&r.modifier&&r.modifier(e[i],t,s[n],i))}(t,i)}}}},_n=cn.registerPlugin({name:"attr",init:function(t,e,i,n,r){var s,o;for(s in e)(o=this.add(t,"setAttribute",(t.getAttribute(s)||0)+"",e[s],n,r,0,0,s))&&(o.op=s),this._props.push(s)}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i])}},mn("roundProps",ai),mn("modifiers"),mn("snap",li))||cn;Qi.version=Ii.version=_n.version="3.10.4",ot=1,Nt()&&ki(),Mi.Power0,Mi.Power1,Mi.Power2,Mi.Power3,Mi.Power4,Mi.Linear,Mi.Quad,Mi.Cubic,Mi.Quart,Mi.Quint,Mi.Strong,Mi.Elastic,Mi.Back,Mi.SteppedEase,Mi.Bounce,Mi.Sine,Mi.Expo,Mi.Circ;
/*!
 * CSSPlugin 3.10.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var fn,gn,bn,wn,xn,yn,Cn,Pn={},En=180/Math.PI,kn=Math.PI/180,Mn=Math.atan2,Sn=/([A-Z])/g,Tn=/(left|right|width|margin|padding|x)/i,Dn=/[\s,\(]\S/,Vn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},An=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Ln=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Rn=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},On=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},jn=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Un=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Bn=function(t,e,i){return t.style[e]=i},zn=function(t,e,i){return t.style.setProperty(e,i)},In=function(t,e,i){return t._gsap[e]=i},Fn=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},Kn=function(t,e,i,n,r){var s=t._gsap;s.scaleX=s.scaleY=i,s.renderTransform(r,s)},Nn=function(t,e,i,n,r){var s=t._gsap;s[e]=i,s.renderTransform(r,s)},Hn="transform",Yn=Hn+"Origin",qn=function(t,e){var i=gn.createElementNS?gn.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):gn.createElement(t);return i.style?i:gn.createElement(t)},$n=function t(e,i,n){var r=getComputedStyle(e);return r[i]||r.getPropertyValue(i.replace(Sn,"-$1").toLowerCase())||r.getPropertyValue(i)||!n&&t(e,Zn(i)||i,1)||""},Xn="O,Moz,ms,Ms,Webkit".split(","),Zn=function(t,e,i){var n=(e||xn).style,r=5;if(t in n&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(Xn[r]+t in n););return r<0?null:(3===r?"ms":r>=0?Xn[r]:"")+t},Gn=function(){"undefined"!=typeof window&&window.document&&(fn=window,gn=fn.document,bn=gn.documentElement,xn=qn("div")||{style:{}},qn("div"),Hn=Zn(Hn),Yn=Hn+"Origin",xn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Cn=!!Zn("perspective"),wn=1)},Qn=function t(e){var i,n=qn("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,s=this.nextSibling,o=this.style.cssText;if(bn.appendChild(n),n.appendChild(this),this.style.display="block",e)try{i=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(a){}else this._gsapBBox&&(i=this._gsapBBox());return r&&(s?r.insertBefore(this,s):r.appendChild(this)),bn.removeChild(n),this.style.cssText=o,i},Wn=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},Jn=function(t){var e;try{e=t.getBBox()}catch(i){e=Qn.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Qn||(e=Qn.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+Wn(t,["x","cx","x1"])||0,y:+Wn(t,["y","cy","y1"])||0,width:0,height:0}},tr=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Jn(t))},er=function(t,e){if(e){var i=t.style;e in Pn&&e!==Yn&&(e=Hn),i.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),i.removeProperty(e.replace(Sn,"-$1").toLowerCase())):i.removeAttribute(e)}},ir=function(t,e,i,n,r,s){var o=new un(t._pt,e,i,0,1,s?Un:jn);return t._pt=o,o.b=n,o.e=r,t._props.push(i),o},nr={deg:1,rad:1,turn:1},rr=function t(e,i,n,r){var s,o,a,l,h=parseFloat(n)||0,d=(n+"").trim().substr((h+"").length)||"px",p=xn.style,u=Tn.test(i),c="svg"===e.tagName.toLowerCase(),v=(c?"client":"offset")+(u?"Width":"Height"),m=100,_="px"===r,f="%"===r;return r===d||!h||nr[r]||nr[d]?h:("px"!==d&&!_&&(h=t(e,i,n,"px")),l=e.getCTM&&tr(e),!f&&"%"!==d||!Pn[i]&&!~i.indexOf("adius")?(p[u?"width":"height"]=m+(_?d:r),o=~i.indexOf("adius")||"em"===r&&e.appendChild&&!c?e:e.parentNode,l&&(o=(e.ownerSVGElement||{}).parentNode),o&&o!==gn&&o.appendChild||(o=gn.body),(a=o._gsap)&&f&&a.width&&u&&a.time===Ei.time?ge(h/a.width*m):((f||"%"===d)&&(p.position=$n(e,"position")),o===e&&(p.position="static"),o.appendChild(xn),s=xn[v],o.removeChild(xn),p.position="absolute",u&&f&&((a=me(o)).time=Ei.time,a.width=o[v]),ge(_?s*h/m:s&&h?m/s*h:0))):(s=l?e.getBBox()[u?"width":"height"]:e[v],ge(f?h/s*m:h/100*s)))},sr=function(t,e,i,n){var r;return wn||Gn(),e in Vn&&"transform"!==e&&~(e=Vn[e]).indexOf(",")&&(e=e.split(",")[0]),Pn[e]&&"transform"!==e?(r=_r(t,n),r="transformOrigin"!==e?r[e]:r.svg?r.origin:fr($n(t,Yn))+" "+r.zOrigin+"px"):(!(r=t.style[e])||"auto"===r||n||~(r+"").indexOf("calc("))&&(r=hr[e]&&hr[e](t,e,i)||$n(t,e)||_e(t,e)||("opacity"===e?1:0)),i&&!~(r+"").trim().indexOf(" ")?rr(t,e,r,i)+i:r},or=function(t,e,i,n){if(!i||"none"===i){var r=Zn(e,t,1),s=r&&$n(t,r,1);s&&s!==i?(e=r,i=s):"borderColor"===e&&(i=$n(t,"borderTopColor"))}var o,a,l,h,d,p,u,c,v,m,_,f=new un(this._pt,t.style,e,0,1,on),g=0,b=0;if(f.b=i,f.e=n,i+="","auto"===(n+="")&&(t.style[e]=n,n=$n(t,e)||n,t.style[e]=i),Pi(o=[i,n]),n=o[1],l=(i=o[0]).match(Zt)||[],(n.match(Zt)||[]).length){for(;a=Zt.exec(n);)u=a[0],v=n.substring(g,a.index),d?d=(d+1)%5:"rgba("!==v.substr(-5)&&"hsla("!==v.substr(-5)||(d=1),u!==(p=l[b++]||"")&&(h=parseFloat(p)||0,_=p.substr((h+"").length),"="===u.charAt(1)&&(u=we(h,u)+_),c=parseFloat(u),m=u.substr((c+"").length),g=Zt.lastIndex-m.length,m||(m=m||Tt.units[e]||_,g===n.length&&(n+=m,f.e+=m)),_!==m&&(h=rr(t,e,p,m)||0),f._pt={_next:f._pt,p:v||1===b?v:",",s:h,c:c-h,m:d&&d<4||"zIndex"===e?Math.round:0});f.c=g<n.length?n.substring(g,n.length):""}else f.r="display"===e&&"none"===n?Un:jn;return Qt.test(n)&&(f.e=0),this._pt=f,f},ar={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},lr=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i,n,r,s=e.t,o=s.style,a=e.u,l=s._gsap;if("all"===a||!0===a)o.cssText="",n=1;else for(r=(a=a.split(",")).length;--r>-1;)i=a[r],Pn[i]&&(n=1,i="transformOrigin"===i?Yn:Hn),er(s,i);n&&(er(s,Hn),l&&(l.svg&&s.removeAttribute("transform"),_r(s,1),l.uncache=1))}},hr={clearProps:function(t,e,i,n,r){if("isFromStart"!==r.data){var s=t._pt=new un(t._pt,e,i,0,0,lr);return s.u=n,s.pr=-10,s.tween=r,t._props.push(i),1}}},dr=[1,0,0,1,0,0],pr={},ur=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},cr=function(t){var e=$n(t,Hn);return ur(e)?dr:e.substr(7).match(Xt).map(ge)},vr=function(t,e){var i,n,r,s,o=t._gsap||me(t),a=t.style,l=cr(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?dr:l:(l!==dr||t.offsetParent||t===bn||o.svg||(r=a.display,a.display="block",(i=t.parentNode)&&t.offsetParent||(s=1,n=t.nextSibling,bn.appendChild(t)),l=cr(t),r?a.display=r:er(t,"display"),s&&(n?i.insertBefore(t,n):i?i.appendChild(t):bn.removeChild(t))),e&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},mr=function(t,e,i,n,r,s){var o,a,l,h=t._gsap,d=r||vr(t,!0),p=h.xOrigin||0,u=h.yOrigin||0,c=h.xOffset||0,v=h.yOffset||0,m=d[0],_=d[1],f=d[2],g=d[3],b=d[4],w=d[5],x=e.split(" "),y=parseFloat(x[0])||0,C=parseFloat(x[1])||0;i?d!==dr&&(a=m*g-_*f)&&(l=y*(-_/a)+C*(m/a)-(m*w-_*b)/a,y=y*(g/a)+C*(-f/a)+(f*w-g*b)/a,C=l):(y=(o=Jn(t)).x+(~x[0].indexOf("%")?y/100*o.width:y),C=o.y+(~(x[1]||x[0]).indexOf("%")?C/100*o.height:C)),n||!1!==n&&h.smooth?(b=y-p,w=C-u,h.xOffset=c+(b*m+w*f)-b,h.yOffset=v+(b*_+w*g)-w):h.xOffset=h.yOffset=0,h.xOrigin=y,h.yOrigin=C,h.smooth=!!n,h.origin=e,h.originIsAbsolute=!!i,t.style[Yn]="0px 0px",s&&(ir(s,h,"xOrigin",p,y),ir(s,h,"yOrigin",u,C),ir(s,h,"xOffset",c,h.xOffset),ir(s,h,"yOffset",v,h.yOffset)),t.setAttribute("data-svg-origin",y+" "+C)},_r=function(t,e){var i=t._gsap||new Bi(t);if("x"in i&&!e&&!i.uncache)return i;var n,r,s,o,a,l,h,d,p,u,c,v,m,_,f,g,b,w,x,y,C,P,E,k,M,S,T,D,V,A,L,R,O=t.style,j=i.scaleX<0,U="px",B="deg",z=$n(t,Yn)||"0";return n=r=s=l=h=d=p=u=c=0,o=a=1,i.svg=!(!t.getCTM||!tr(t)),_=vr(t,i.svg),i.svg&&(k=(!i.uncache||"0px 0px"===z)&&!e&&t.getAttribute("data-svg-origin"),mr(t,k||z,!!k||i.originIsAbsolute,!1!==i.smooth,_)),v=i.xOrigin||0,m=i.yOrigin||0,_!==dr&&(w=_[0],x=_[1],y=_[2],C=_[3],n=P=_[4],r=E=_[5],6===_.length?(o=Math.sqrt(w*w+x*x),a=Math.sqrt(C*C+y*y),l=w||x?Mn(x,w)*En:0,(p=y||C?Mn(y,C)*En+l:0)&&(a*=Math.abs(Math.cos(p*kn))),i.svg&&(n-=v-(v*w+m*y),r-=m-(v*x+m*C))):(R=_[6],A=_[7],T=_[8],D=_[9],V=_[10],L=_[11],n=_[12],r=_[13],s=_[14],h=(f=Mn(R,V))*En,f&&(k=P*(g=Math.cos(-f))+T*(b=Math.sin(-f)),M=E*g+D*b,S=R*g+V*b,T=P*-b+T*g,D=E*-b+D*g,V=R*-b+V*g,L=A*-b+L*g,P=k,E=M,R=S),d=(f=Mn(-y,V))*En,f&&(g=Math.cos(-f),L=C*(b=Math.sin(-f))+L*g,w=k=w*g-T*b,x=M=x*g-D*b,y=S=y*g-V*b),l=(f=Mn(x,w))*En,f&&(k=w*(g=Math.cos(f))+x*(b=Math.sin(f)),M=P*g+E*b,x=x*g-w*b,E=E*g-P*b,w=k,P=M),h&&Math.abs(h)+Math.abs(l)>359.9&&(h=l=0,d=180-d),o=ge(Math.sqrt(w*w+x*x+y*y)),a=ge(Math.sqrt(E*E+R*R)),f=Mn(P,E),p=Math.abs(f)>2e-4?f*En:0,c=L?1/(L<0?-L:L):0),i.svg&&(k=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!ur($n(t,Hn)),k&&t.setAttribute("transform",k))),Math.abs(p)>90&&Math.abs(p)<270&&(j?(o*=-1,p+=l<=0?180:-180,l+=l<=0?180:-180):(a*=-1,p+=p<=0?180:-180)),e=e||i.uncache,i.x=n-((i.xPercent=n&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-n)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+U,i.y=r-((i.yPercent=r&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+U,i.z=s+U,i.scaleX=ge(o),i.scaleY=ge(a),i.rotation=ge(l)+B,i.rotationX=ge(h)+B,i.rotationY=ge(d)+B,i.skewX=p+B,i.skewY=u+B,i.transformPerspective=c+U,(i.zOrigin=parseFloat(z.split(" ")[2])||0)&&(O[Yn]=fr(z)),i.xOffset=i.yOffset=0,i.force3D=Tt.force3D,i.renderTransform=i.svg?xr:Cn?wr:br,i.uncache=0,i},fr=function(t){return(t=t.split(" "))[0]+" "+t[1]},gr=function(t,e,i){var n=ei(e);return ge(parseFloat(e)+parseFloat(rr(t,"x",i+"px",n)))+n},br=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,wr(t,e)},wr=function(t,e){var i=e||this,n=i.xPercent,r=i.yPercent,s=i.x,o=i.y,a=i.z,l=i.rotation,h=i.rotationY,d=i.rotationX,p=i.skewX,u=i.skewY,c=i.scaleX,v=i.scaleY,m=i.transformPerspective,_=i.force3D,f=i.target,g=i.zOrigin,b="",w="auto"===_&&t&&1!==t||!0===_;if(g&&("0deg"!==d||"0deg"!==h)){var x,y=parseFloat(h)*kn,C=Math.sin(y),P=Math.cos(y);y=parseFloat(d)*kn,x=Math.cos(y),s=gr(f,s,C*x*-g),o=gr(f,o,-Math.sin(y)*-g),a=gr(f,a,P*x*-g+g)}"0px"!==m&&(b+="perspective("+m+") "),(n||r)&&(b+="translate("+n+"%, "+r+"%) "),(w||"0px"!==s||"0px"!==o||"0px"!==a)&&(b+="0px"!==a||w?"translate3d("+s+", "+o+", "+a+") ":"translate("+s+", "+o+") "),"0deg"!==l&&(b+="rotate("+l+") "),"0deg"!==h&&(b+="rotateY("+h+") "),"0deg"!==d&&(b+="rotateX("+d+") "),"0deg"===p&&"0deg"===u||(b+="skew("+p+", "+u+") "),1===c&&1===v||(b+="scale("+c+", "+v+") "),f.style[Hn]=b||"translate(0, 0)"},xr=function(t,e){var i,n,r,s,o,a=e||this,l=a.xPercent,h=a.yPercent,d=a.x,p=a.y,u=a.rotation,c=a.skewX,v=a.skewY,m=a.scaleX,_=a.scaleY,f=a.target,g=a.xOrigin,b=a.yOrigin,w=a.xOffset,x=a.yOffset,y=a.forceCSS,C=parseFloat(d),P=parseFloat(p);u=parseFloat(u),c=parseFloat(c),(v=parseFloat(v))&&(c+=v=parseFloat(v),u+=v),u||c?(u*=kn,c*=kn,i=Math.cos(u)*m,n=Math.sin(u)*m,r=Math.sin(u-c)*-_,s=Math.cos(u-c)*_,c&&(v*=kn,o=Math.tan(c-v),r*=o=Math.sqrt(1+o*o),s*=o,v&&(o=Math.tan(v),i*=o=Math.sqrt(1+o*o),n*=o)),i=ge(i),n=ge(n),r=ge(r),s=ge(s)):(i=m,s=_,n=r=0),(C&&!~(d+"").indexOf("px")||P&&!~(p+"").indexOf("px"))&&(C=rr(f,"x",d,"px"),P=rr(f,"y",p,"px")),(g||b||w||x)&&(C=ge(C+g-(g*i+b*r)+w),P=ge(P+b-(g*n+b*s)+x)),(l||h)&&(o=f.getBBox(),C=ge(C+l/100*o.width),P=ge(P+h/100*o.height)),o="matrix("+i+","+n+","+r+","+s+","+C+","+P+")",f.setAttribute("transform",o),y&&(f.style[Hn]=o)},yr=function(t,e,i,n,r){var s,o,a=360,l=Ut(r),h=parseFloat(r)*(l&&~r.indexOf("rad")?En:1)-n,d=n+h+"deg";return l&&("short"===(s=r.split("_")[1])&&(h%=a)!==h%180&&(h+=h<0?a:-360),"cw"===s&&h<0?h=(h+36e9)%a-~~(h/a)*a:"ccw"===s&&h>0&&(h=(h-36e9)%a-~~(h/a)*a)),t._pt=o=new un(t._pt,e,i,n,h,Ln),o.e=d,o.u="deg",t._props.push(i),o},Cr=function(t,e){for(var i in e)t[i]=e[i];return t},Pr=function(t,e,i){var n,r,s,o,a,l,h,d=Cr({},i._gsap),p=i.style;for(r in d.svg?(s=i.getAttribute("transform"),i.setAttribute("transform",""),p[Hn]=e,n=_r(i,1),er(i,Hn),i.setAttribute("transform",s)):(s=getComputedStyle(i)[Hn],p[Hn]=e,n=_r(i,1),p[Hn]=s),Pn)(s=d[r])!==(o=n[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(a=ei(s)!==(h=ei(o))?rr(i,r,s,h):parseFloat(s),l=parseFloat(o),t._pt=new un(t._pt,n,r,a,l-a,An),t._pt.u=h||0,t._props.push(r));Cr(n,d)};fe("padding,margin,Width,Radius",(function(t,e){var i="Top",n="Right",r="Bottom",s="Left",o=(e<3?[i,n,r,s]:[i+s,i+n,r+n,r+s]).map((function(i){return e<2?t+i:"border"+i+t}));hr[e>1?"border"+t:t]=function(t,e,i,n,r){var s,a;if(arguments.length<4)return s=o.map((function(e){return sr(t,e,i)})),5===(a=s.join(" ")).split(s[0]).length?s[0]:a;s=(n+"").split(" "),a={},o.forEach((function(t,e){return a[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,a,r)}}));var Er,kr,Mr,Sr={name:"css",register:Gn,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,n,r){var s,o,a,l,h,d,p,u,c,v,m,_,f,g,b,w,x,y,C,P=this._props,E=t.style,k=i.vars.startAt;for(p in wn||Gn(),e)if("autoRound"!==p&&(o=e[p],!he[p]||!Yi(p,e,i,n,t,r)))if(h=typeof o,d=hr[p],"function"===h&&(h=typeof(o=o.call(i,n,t,r))),"string"===h&&~o.indexOf("random(")&&(o=pi(o)),d)d(this,t,p,o,i)&&(b=1);else if("--"===p.substr(0,2))s=(getComputedStyle(t).getPropertyValue(p)+"").trim(),o+="",yi.lastIndex=0,yi.test(s)||(u=ei(s),c=ei(o)),c?u!==c&&(s=rr(t,p,s,c)+c):u&&(o+=u),this.add(E,"setProperty",s,o,n,r,0,0,p),P.push(p);else if("undefined"!==h){if(k&&p in k?(s="function"==typeof k[p]?k[p].call(i,n,t,r):k[p],Ut(s)&&~s.indexOf("random(")&&(s=pi(s)),ei(s+"")||(s+=Tt.units[p]||ei(sr(t,p))||""),"="===(s+"").charAt(1)&&(s=sr(t,p))):s=sr(t,p),l=parseFloat(s),(v="string"===h&&"="===o.charAt(1)&&o.substr(0,2))&&(o=o.substr(2)),a=parseFloat(o),p in Vn&&("autoAlpha"===p&&(1===l&&"hidden"===sr(t,"visibility")&&a&&(l=0),ir(this,E,"visibility",l?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==p&&"transform"!==p&&~(p=Vn[p]).indexOf(",")&&(p=p.split(",")[0])),m=p in Pn)if(_||((f=t._gsap).renderTransform&&!e.parseTransform||_r(t,e.parseTransform),g=!1!==e.smoothOrigin&&f.smooth,(_=this._pt=new un(this._pt,E,Hn,0,1,f.renderTransform,f,0,-1)).dep=1),"scale"===p)this._pt=new un(this._pt,f,"scaleY",f.scaleY,(v?we(f.scaleY,v+a):a)-f.scaleY||0),P.push("scaleY",p),p+="X";else{if("transformOrigin"===p){x=void 0,y=void 0,C=void 0,x=(w=o).split(" "),y=x[0],C=x[1]||"50%","top"!==y&&"bottom"!==y&&"left"!==C&&"right"!==C||(w=y,y=C,C=w),x[0]=ar[y]||y,x[1]=ar[C]||C,o=x.join(" "),f.svg?mr(t,o,0,g,0,this):((c=parseFloat(o.split(" ")[2])||0)!==f.zOrigin&&ir(this,f,"zOrigin",f.zOrigin,c),ir(this,E,p,fr(s),fr(o)));continue}if("svgOrigin"===p){mr(t,o,1,g,0,this);continue}if(p in pr){yr(this,f,p,l,v?we(l,v+o):o);continue}if("smoothOrigin"===p){ir(this,f,"smooth",f.smooth,o);continue}if("force3D"===p){f[p]=o;continue}if("transform"===p){Pr(this,o,t);continue}}else p in E||(p=Zn(p)||p);if(m||(a||0===a)&&(l||0===l)&&!Dn.test(o)&&p in E)a||(a=0),(u=(s+"").substr((l+"").length))!==(c=ei(o)||(p in Tt.units?Tt.units[p]:u))&&(l=rr(t,p,s,c)),this._pt=new un(this._pt,m?f:E,p,l,(v?we(l,v+a):a)-l,m||"px"!==c&&"zIndex"!==p||!1===e.autoRound?An:On),this._pt.u=c||0,u!==c&&"%"!==c&&(this._pt.b=s,this._pt.r=Rn);else if(p in E)or.call(this,t,p,s,v?v+o:o);else{if(!(p in t))continue;this.add(t,p,s||t[p],v?v+o:o,n,r)}P.push(p)}b&&pn(this)},get:sr,aliases:Vn,getSetter:function(t,e,i){var n=Vn[e];return n&&n.indexOf(",")<0&&(e=n),e in Pn&&e!==Yn&&(t._gsap.x||sr(t,"x"))?i&&yn===i?"scale"===e?Fn:In:(yn=i||{})&&("scale"===e?Kn:Nn):t.style&&!It(t.style[e])?Bn:~e.indexOf("-")?zn:nn(t,e)},core:{_removeProperty:er,_getMatrix:vr}};_n.utils.checkPrefix=Zn,Mr=fe((Er="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(kr="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){Pn[t]=1})),fe(kr,(function(t){Tt.units[t]="deg",pr[t]=1})),Vn[Mr[13]]=Er+","+kr,fe("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");Vn[e[1]]=Mr[e[0]]})),fe("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){Tt.units[t]="px"})),_n.registerPlugin(Sr);var Tr=_n.registerPlugin(Sr)||_n;Tr.core.Tween;var Dr,Vr={exports:{}},Ar=Vr.exports=(Dr=function(){function t(t){return n.appendChild(t.dom),t}function e(t){for(var e=0;e<n.children.length;e++)n.children[e].style.display=e===t?"block":"none";i=t}var i=0,n=document.createElement("div");n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",(function(t){t.preventDefault(),e(++i%n.children.length)}),!1);var r=(performance||Date).now(),s=r,o=0,a=t(new Dr.Panel("FPS","#0ff","#002")),l=t(new Dr.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=t(new Dr.Panel("MB","#f08","#201"));return e(0),{REVISION:16,dom:n,addPanel:t,showPanel:e,begin:function(){r=(performance||Date).now()},end:function(){o++;var t=(performance||Date).now();if(l.update(t-r,200),t>s+1e3&&(a.update(1e3*o/(t-s),100),s=t,o=0,h)){var e=performance.memory;h.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){r=this.end()},domElement:n,setMode:e}},Dr.Panel=function(t,e,i){var n=1/0,r=0,s=Math.round,o=s(window.devicePixelRatio||1),a=80*o,l=48*o,h=3*o,d=2*o,p=3*o,u=15*o,c=74*o,v=30*o,m=document.createElement("canvas");m.width=a,m.height=l,m.style.cssText="width:80px;height:48px";var _=m.getContext("2d");return _.font="bold "+9*o+"px Helvetica,Arial,sans-serif",_.textBaseline="top",_.fillStyle=i,_.fillRect(0,0,a,l),_.fillStyle=e,_.fillText(t,h,d),_.fillRect(p,u,c,v),_.fillStyle=i,_.globalAlpha=.9,_.fillRect(p,u,c,v),{dom:m,update:function(l,f){n=Math.min(n,l),r=Math.max(r,l),_.fillStyle=i,_.globalAlpha=1,_.fillRect(0,0,a,u),_.fillStyle=e,_.fillText(s(l)+" "+t+" ("+s(n)+"-"+s(r)+")",h,d),_.drawImage(m,p+o,u,c-o,v,p,u,c-o,v),_.fillRect(p+c-o,u,o,v),_.fillStyle=i,_.globalAlpha=.9,_.fillRect(p+c-o,u,o,s((1-l/f)*v))}}},Dr),Lr={exports:{}};!function(t){class e{constructor(t){const[e,i]=t.split("-"),n=e.split(".");this.major=parseInt(n[0],10),this.minor=parseInt(n[1],10),this.patch=parseInt(n[2],10),this.prerelease=null!=i?i:null}toString(){const t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}class i{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class n{constructor(t){this.target=t}}class r extends n{constructor(t,e,i,n){super(t),this.value=e,this.presetKey=i,this.last=null==n||n}}class s extends n{constructor(t,e,i){super(t),this.value=e,this.presetKey=i}}class o extends n{constructor(t,e){super(t),this.expanded=e}}function a(t){return t}function l(t){return null==t}function h(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}const d={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class p{constructor(t){var e;this.message=null!==(e=d[t.type](a(t.context)))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}static alreadyDisposed(){return new p({type:"alreadydisposed"})}static notBindable(){return new p({type:"notbindable"})}static propertyNotFound(t){return new p({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new p({type:"shouldneverhappen"})}}class u{constructor(t,e,i){this.obj_=t,this.key_=e,this.presetKey_=null!=i?i:e}static isBindable(t){return null!==t&&"object"==typeof t}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(t){this.obj_[this.key_]=t}writeProperty(t,e){const i=this.read();if(!u.isBindable(i))throw p.notBindable();if(!(t in i))throw p.propertyNotFound(t);i[t]=e}}class c extends i{get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get title(){var t;return null!==(t=this.controller_.valueController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.valueController.props.set("title",t)}on(t,e){const i=e.bind(this);return this.controller_.valueController.emitter.on(t,(()=>{i(new n(this))})),this}}class v{constructor(){this.observers_={}}on(t,e){let i=this.observers_[t];return i||(i=this.observers_[t]=[]),i.push({handler:e}),this}off(t,e){const i=this.observers_[t];return i&&(this.observers_[t]=i.filter((t=>t.handler!==e))),this}emit(t,e){const i=this.observers_[t];i&&i.forEach((t=>{t.handler(e)}))}}const m="tp";function _(t){return(e,i)=>[m,"-",t,"v",e?`_${e}`:"",i?`-${i}`:""].join("")}function f(t,e){return i=>e(t(i))}function g(t){return t.rawValue}function b(t,e){t.emitter.on("change",f(g,e)),e(t.rawValue)}function w(t,e,i){b(t.value(e),i)}function x(t,e,i){i?t.classList.add(e):t.classList.remove(e)}function y(t,e){return i=>{x(t,e,i)}}function C(t,e){b(t,(t=>{e.textContent=null!=t?t:""}))}const P=_("btn");class E{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(P()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("button");i.classList.add(P("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const n=t.createElement("div");n.classList.add(P("t")),C(e.props.value("title"),n),this.buttonElement.appendChild(n)}}class k{constructor(t,e){this.emitter=new v,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new E(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class M{constructor(t,e){var i;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(i=null==e?void 0:e.equals)&&void 0!==i?i:(t,e)=>t===e,this.emitter=new v,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const i=null!=e?e:{forceEmit:!1,last:!0},n=this.constraint_?this.constraint_.constrain(t):t;(!this.equals_(this.rawValue_,n)||i.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=n,this.emitter.emit("change",{options:i,rawValue:n,sender:this}))}}class S{constructor(t){this.emitter=new v,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const i=null!=e?e:{forceEmit:!1,last:!0};(this.value_!==t||i.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:i,rawValue:this.value_,sender:this}))}}function T(t,e){const i=null==e?void 0:e.constraint,n=null==e?void 0:e.equals;return i||n?new M(t,e):new S(t)}class D{constructor(t){this.emitter=new v,this.valMap_=t;for(const e in this.valMap_)this.valMap_[e].emitter.on("change",(()=>{this.emitter.emit("change",{key:e,sender:this})}))}static createCore(t){return Object.keys(t).reduce(((e,i)=>Object.assign(e,{[i]:T(t[i])})),{})}static fromObject(t){const e=this.createCore(t);return new D(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function V(t,e){return a(Object.keys(e).reduce(((i,n)=>{if(void 0===i)return;const r=(0,e[n])(t[n]);return r.succeeded?Object.assign(Object.assign({},i),{[n]:r.value}):void 0}),{}))}function A(t,e){return t.reduce(((t,i)=>{if(void 0===t)return;const n=e(i);return n.succeeded&&void 0!==n.value?[...t,n.value]:void 0}),[])}function L(t){return null!==t&&"object"==typeof t}function R(t){return e=>i=>{if(!e&&void 0===i)return{succeeded:!1,value:void 0};if(e&&void 0===i)return{succeeded:!0,value:void 0};const n=t(i);return void 0!==n?{succeeded:!0,value:n}:{succeeded:!1,value:void 0}}}function O(t){return{custom:e=>R(e)(t),boolean:R((t=>"boolean"==typeof t?t:void 0))(t),number:R((t=>"number"==typeof t?t:void 0))(t),string:R((t=>"string"==typeof t?t:void 0))(t),function:R((t=>"function"==typeof t?t:void 0))(t),constant:e=>R((t=>t===e?e:void 0))(t),raw:R((t=>t))(t),object:e=>R((t=>{if(L(t))return V(t,e)}))(t),array:e=>R((t=>{if(Array.isArray(t))return A(t,e)}))(t)}}const j={optional:O(!0),required:O(!1)};function U(t,e){const i=j.required.object(e)(t);return i.succeeded?i.value:void 0}function B(t){return t&&t.parentElement&&t.parentElement.removeChild(t),null}function z(){return["veryfirst","first","last","verylast"]}const I=_(""),F={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class K{constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",(()=>{z().forEach((t=>{e.classList.remove(I(void 0,F[t]))})),this.blade.get("positions").forEach((t=>{e.classList.add(I(void 0,F[t]))}))})),this.viewProps.handleDispose((()=>{B(e)}))}get parent(){return this.parent_}}const N="http://www.w3.org/2000/svg";function H(t){t.offsetHeight}function Y(t,e){const i=t.style.transition;t.style.transition="none",e(),t.style.transition=i}function q(t){return void 0!==t.ontouchstart}function $(){return new Function("return this")()}function X(){return a($()).document}function Z(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d"):null}const G={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Q(t,e){const i=t.createElementNS(N,"svg");return i.innerHTML=G[e],i}function W(t,e,i){t.insertBefore(e,t.children[i])}function J(t){t.parentElement&&t.parentElement.removeChild(t)}function tt(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function et(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function it(t){return t.relatedTarget?a(t.relatedTarget):"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}const nt=_("lbl");function rt(t,e){const i=t.createDocumentFragment();return e.split("\n").map((e=>t.createTextNode(e))).forEach(((e,n)=>{n>0&&i.appendChild(t.createElement("br")),i.appendChild(e)})),i}class st{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(nt()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(nt("l")),w(e.props,"label",(e=>{l(e)?this.element.classList.add(nt(void 0,"nol")):(this.element.classList.remove(nt(void 0,"nol")),et(i),i.appendChild(rt(t,e)))})),this.element.appendChild(i),this.labelElement=i;const n=t.createElement("div");n.classList.add(nt("v")),this.element.appendChild(n),this.valueElement=n}}class ot extends K{constructor(t,e){const i=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{view:new st(t,{props:e.props,viewProps:i}),viewProps:i})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const at={id:"button",type:"blade",accept(t){const e=j,i=U(t,{title:e.required.string,view:e.required.constant("button"),label:e.optional.string});return i?{params:i}:null},controller:t=>new ot(t.document,{blade:t.blade,props:D.fromObject({label:t.params.label}),valueController:new k(t.document,{props:D.fromObject({title:t.params.title}),viewProps:t.viewProps})}),api:t=>t.controller instanceof ot&&t.controller.valueController instanceof k?new c(t.controller):null};class lt extends K{constructor(t){super(t),this.value=t.value}}function ht(){return new D({positions:T([],{equals:h})})}class dt extends D{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=D.createCore(e);return new dt(i)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!l(t)?`${t}px`:"auto"}bindExpandedClass(t,e){const i=()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)};w(this,"expanded",i),w(this,"temporaryExpanded",i)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function pt(t,e){let i=0;return Y(e,(()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),H(e),i=e.clientHeight,t.set("temporaryExpanded",null),H(e)})),i}function ut(t,e){e.style.height=t.styleHeight}function ct(t,e){t.value("expanded").emitter.on("beforechange",(()=>{t.set("completed",!1),l(t.get("expandedHeight"))&&t.set("expandedHeight",pt(t,e)),t.set("shouldFixHeight",!0),H(e)})),t.emitter.on("change",(()=>{ut(t,e)})),ut(t,e),e.addEventListener("transitionend",(e=>{"height"===e.propertyName&&t.cleanUpTransition()}))}class vt extends i{constructor(t,e){super(t),this.rackApi_=e}}function mt(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function _t(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function ft(t,e){const i=e||{};return t.addBlade(Object.assign(Object.assign({},i),{view:"separator"}))}function gt(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}class bt{constructor(t){this.emitter=new v,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw p.shouldNeverHappen();const i=void 0!==e?e:this.items_.length;this.items_.splice(i,0,t),this.cache_.add(t);const n=this.extract_(t);n&&(n.emitter.on("add",this.onSubListAdd_),n.emitter.on("remove",this.onSubListRemove_),n.allItems().forEach((t=>{this.cache_.add(t)}))),this.emitter.emit("add",{index:i,item:t,root:this,target:this})}remove(t){const e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);const i=this.extract_(t);i&&(i.emitter.off("add",this.onSubListAdd_),i.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}class wt extends i{constructor(t){super(t),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new v,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingChange_(t){const e=t.sender.target.read();this.emitter_.emit("change",{event:new r(this,a(e),this.controller_.binding.target.presetKey,t.options.last)})}}class xt extends ot{constructor(t,e){super(t,e),this.binding=e.binding}}class yt extends i{constructor(t){super(t),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new v,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(t){const e=t.sender.target.read();this.emitter_.emit("update",{event:new s(this,a(e),this.controller_.binding.target.presetKey)})}}class Ct extends ot{constructor(t,e){super(t,e),this.binding=e.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose((()=>{this.binding.dispose()}))}}function Pt(t){return t instanceof Mt?t.apiSet_:t instanceof vt?t.rackApi_.apiSet_:null}function Et(t,e){const i=t.find((t=>t.controller_===e));if(!i)throw p.shouldNeverHappen();return i}function kt(t,e,i){if(!u.isBindable(t))throw p.notBindable();return new u(t,e,i)}class Mt extends i{constructor(t,e){super(t),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new v,this.apiSet_=new bt(Pt),this.pool_=e;const i=this.controller_.rack;i.emitter.on("add",this.onRackAdd_),i.emitter.on("remove",this.onRackRemove_),i.emitter.on("inputchange",this.onRackInputChange_),i.emitter.on("monitorupdate",this.onRackMonitorUpdate_),i.children.forEach((t=>{this.setUpApi_(t)}))}get children(){return this.controller_.rack.children.map((t=>Et(this.apiSet_,t)))}addInput(t,e,i){const n=i||{},r=this.controller_.view.element.ownerDocument,s=this.pool_.createInput(r,kt(t,e,n.presetKey),n),o=new wt(s);return this.add(o,n.index)}addMonitor(t,e,i){const n=i||{},r=this.controller_.view.element.ownerDocument,s=this.pool_.createMonitor(r,kt(t,e),n),o=new yt(s);return a(this.add(o,n.index))}addFolder(t){return _t(this,t)}addButton(t){return mt(this,t)}addSeparator(t){return ft(this,t)}addTab(t){return gt(this,t)}add(t,e){this.controller_.rack.add(t.controller_,e);const i=this.apiSet_.find((e=>e.controller_===t.controller_));return i&&this.apiSet_.remove(i),this.apiSet_.add(t),t}remove(t){this.controller_.rack.remove(t.controller_)}addBlade(t){const e=this.controller_.view.element.ownerDocument,i=this.pool_.createBlade(e,t),n=this.pool_.createBladeApi(i);return this.add(n,t.index)}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}setUpApi_(t){this.apiSet_.find((e=>e.controller_===t))||this.apiSet_.add(this.pool_.createBladeApi(t))}onRackAdd_(t){this.setUpApi_(t.bladeController)}onRackRemove_(t){if(t.isRoot){const e=Et(this.apiSet_,t.bladeController);this.apiSet_.remove(e)}}onRackInputChange_(t){const e=t.bladeController;if(e instanceof xt){const i=Et(this.apiSet_,e),n=e.binding;this.emitter_.emit("change",{event:new r(i,a(n.target.read()),n.target.presetKey,t.options.last)})}else if(e instanceof lt){const i=Et(this.apiSet_,e);this.emitter_.emit("change",{event:new r(i,e.value.rawValue,void 0,t.options.last)})}}onRackMonitorUpdate_(t){if(!(t.bladeController instanceof Ct))throw p.shouldNeverHappen();const e=Et(this.apiSet_,t.bladeController),i=t.bladeController.binding;this.emitter_.emit("update",{event:new s(e,a(i.target.read()),i.target.presetKey)})}}class St extends vt{constructor(t,e){super(t,new Mt(t.rackController,e)),this.emitter_=new v,this.controller_.foldable.value("expanded").emitter.on("change",(t=>{this.emitter_.emit("fold",{event:new o(this,t.sender.rawValue)})})),this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})}))}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(t){this.controller_.foldable.set("expanded",t)}get title(){return this.controller_.props.get("title")}set title(t){this.controller_.props.set("title",t)}get children(){return this.rackApi_.children}addInput(t,e,i){return this.rackApi_.addInput(t,e,i)}addMonitor(t,e,i){return this.rackApi_.addMonitor(t,e,i)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}}class Tt extends K{constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}}class Dt{constructor(t,e){const i=_(e.viewName);this.element=t.createElement("div"),this.element.classList.add(i()),e.viewProps.bindClassModifiers(this.element)}}function Vt(t,e){for(let i=0;i<t.length;i++){const n=t[i];if(n instanceof xt&&n.binding===e)return n}return null}function At(t,e){for(let i=0;i<t.length;i++){const n=t[i];if(n instanceof Ct&&n.binding===e)return n}return null}function Lt(t,e){for(let i=0;i<t.length;i++){const n=t[i];if(n instanceof lt&&n.value===e)return n}return null}function Rt(t){return t instanceof Ut?t.rack:t instanceof Tt?t.rackController.rack:null}function Ot(t){const e=Rt(t);return e?e.bcSet_:null}class jt{constructor(t){var e;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new v,this.blade_=null!=t?t:null,null===(e=this.blade_)||void 0===e||e.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new bt(Ot),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,e){t.parent&&t.parent.remove(t),t.parent_=this,this.bcSet_.add(t,e)}remove(t){t.parent_=null,this.bcSet_.remove(t)}find(t){return a(this.bcSet_.allItems().filter((e=>e instanceof t)))}onSetAdd_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,isRoot:e,sender:this}),!e)return;const i=t.item;if(i.viewProps.emitter.on("change",this.onChildViewPropsChange_),i.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),i.viewProps.handleDispose(this.onChildDispose_),i instanceof xt)i.binding.emitter.on("change",this.onChildInputChange_);else if(i instanceof Ct)i.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(i instanceof lt)i.value.emitter.on("change",this.onChildValueChange_);else{const t=Rt(i);if(t){const e=t.emitter;e.on("layout",this.onDescendantLayout_),e.on("inputchange",this.onDescendantInputChange_),e.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,isRoot:e,sender:this}),!e)return;const i=t.item;if(i instanceof xt)i.binding.emitter.off("change",this.onChildInputChange_);else if(i instanceof Ct)i.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(i instanceof lt)i.value.emitter.off("change",this.onChildValueChange_);else{const t=Rt(i);if(t){const e=t.emitter;e.off("layout",this.onDescendantLayout_),e.off("inputchange",this.onDescendantInputChange_),e.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const t=this.bcSet_.items.filter((t=>!t.viewProps.get("hidden"))),e=t[0],i=t[t.length-1];this.bcSet_.items.forEach((t=>{const n=[];t===e&&(n.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||n.push("veryfirst")),t===i&&(n.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||n.push("verylast")),t.blade.set("positions",n)}))}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter((t=>t.viewProps.get("disposed"))).forEach((t=>{this.bcSet_.remove(t)}))}onChildInputChange_(t){const e=Vt(this.find(xt),t.sender);if(!e)throw p.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onChildMonitorUpdate_(t){const e=At(this.find(Ct),t.sender);if(!e)throw p.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:e,sender:this})}onChildValueChange_(t){const e=Lt(this.find(lt),t.sender);if(!e)throw p.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onDescendantLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(t){this.emitter.emit("inputchange",{bladeController:t.bladeController,options:t.options,sender:this})}onDescendantMonitorUpdate_(t){this.emitter.emit("monitorupdate",{bladeController:t.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Ut extends K{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new Dt(t,{viewName:"brk",viewProps:e.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const i=new jt(e.root?void 0:e.blade);i.emitter.on("add",this.onRackAdd_),i.emitter.on("remove",this.onRackRemove_),this.rack=i,this.viewProps.handleDispose((()=>{for(let t=this.rack.children.length-1;t>=0;t--)this.rack.children[t].viewProps.set("disposed",!0)}))}onRackAdd_(t){t.isRoot&&W(this.view.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.isRoot&&J(t.bladeController.view.element)}}const Bt=_("cnt");class zt{constructor(t,e){this.className_=_(e.viewName||"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),Bt()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),w(this.foldable_,"completed",y(this.element,this.className_(void 0,"cpl")));const i=t.createElement("button");i.classList.add(this.className_("b")),w(e.props,"title",(t=>{l(t)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))})),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const n=t.createElement("div");n.classList.add(this.className_("t")),C(e.props.value("title"),n),this.buttonElement.appendChild(n),this.titleElement=n;const r=t.createElement("div");r.classList.add(this.className_("m")),this.buttonElement.appendChild(r);const s=e.containerElement;s.classList.add(this.className_("c")),this.element.appendChild(s),this.containerElement=s}}class It extends Tt{constructor(t,e){var i;const n=dt.create(null===(i=e.expanded)||void 0===i||i),r=new Ut(t,{blade:e.blade,root:e.root,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:r,view:new zt(t,{containerElement:r.view.element,foldable:n,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=n,ct(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",(()=>{this.foldable.cleanUpTransition()})),this.rackController.rack.emitter.on("remove",(()=>{this.foldable.cleanUpTransition()})),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Ft={id:"folder",type:"blade",accept(t){const e=j,i=U(t,{title:e.required.string,view:e.required.constant("folder"),expanded:e.optional.boolean});return i?{params:i}:null},controller:t=>new It(t.document,{blade:t.blade,expanded:t.params.expanded,props:D.fromObject({title:t.params.title}),viewProps:t.viewProps}),api:t=>t.controller instanceof It?new St(t.controller,t.pool):null};class Kt extends lt{constructor(t,e){const i=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{value:e.valueController.value,view:new st(t,{props:e.props,viewProps:i}),viewProps:i})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Nt extends i{}const Ht=_("spr");class Yt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ht()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("hr");i.classList.add(Ht("r")),this.element.appendChild(i)}}class qt extends K{constructor(t,e){super(Object.assign(Object.assign({},e),{view:new Yt(t,{viewProps:e.viewProps})}))}}const $t={id:"separator",type:"blade",accept(t){const e=U(t,{view:j.required.constant("separator")});return e?{params:e}:null},controller:t=>new qt(t.document,{blade:t.blade,viewProps:t.viewProps}),api:t=>t.controller instanceof qt?new Nt(t.controller):null},Xt=_("");function Zt(t,e){return y(t,Xt(void 0,e))}class Gt extends D{constructor(t){super(t)}static create(t){var e,i;const n=null!=t?t:{},r={disabled:null!==(e=n.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(i=n.hidden)&&void 0!==i&&i},s=D.createCore(r);return new Gt(s)}bindClassModifiers(t){w(this,"disabled",Zt(t,"disabled")),w(this,"hidden",Zt(t,"hidden"))}bindDisabled(t){w(this,"disabled",(e=>{t.disabled=e}))}bindTabIndex(t){w(this,"disabled",(e=>{t.tabIndex=e?-1:0}))}handleDispose(t){this.value("disposed").emitter.on("change",(e=>{e&&t()}))}}const Qt=_("tbi");class Wt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Qt()),e.viewProps.bindClassModifiers(this.element),w(e.props,"selected",(t=>{t?this.element.classList.add(Qt(void 0,"sel")):this.element.classList.remove(Qt(void 0,"sel"))}));const i=t.createElement("button");i.classList.add(Qt("b")),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const n=t.createElement("div");n.classList.add(Qt("t")),C(e.props.value("title"),n),this.buttonElement.appendChild(n),this.titleElement=n}}class Jt{constructor(t,e){this.emitter=new v,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new Wt(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class te{constructor(t,e){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Jt(t,{props:e.itemProps,viewProps:Gt.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new Ut(t,{blade:ht(),viewProps:Gt.create()}),this.props=e.props,w(this.props,"selected",(t=>{this.itemController.props.set("selected",t),this.contentController.viewProps.set("hidden",!t)}))}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class ee{constructor(t,e){this.controller_=t,this.rackApi_=e}get title(){var t;return null!==(t=this.controller_.itemController.props.get("title"))&&void 0!==t?t:""}set title(t){this.controller_.itemController.props.set("title",t)}get selected(){return this.controller_.props.get("selected")}set selected(t){this.controller_.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addInput(t,e,i){return this.rackApi_.addInput(t,e,i)}addMonitor(t,e,i){return this.rackApi_.addMonitor(t,e,i)}addBlade(t){return this.rackApi_.addBlade(t)}}class ie extends vt{constructor(t,e){super(t,new Mt(t.rackController,e)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.emitter_=new v,this.pageApiMap_=new Map,this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})})),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach((t=>{this.setUpPageApi_(t)}))}get pages(){return this.controller_.pageSet.items.map((t=>{const e=this.pageApiMap_.get(t);if(!e)throw p.shouldNeverHappen();return e}))}addPage(t){const e=this.controller_.view.element.ownerDocument,i=new te(e,{itemProps:D.fromObject({selected:!1,title:t.title}),props:D.fromObject({selected:!1})});this.controller_.add(i,t.index);const n=this.pageApiMap_.get(i);if(!n)throw p.shouldNeverHappen();return n}removePage(t){this.controller_.remove(t)}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}setUpPageApi_(t){const e=this.rackApi_.apiSet_.find((e=>e.controller_===t.contentController));if(!e)throw p.shouldNeverHappen();const i=new ee(t,e);this.pageApiMap_.set(t,i)}onPageAdd_(t){this.setUpPageApi_(t.item)}onPageRemove_(t){if(!this.pageApiMap_.get(t.item))throw p.shouldNeverHappen();this.pageApiMap_.delete(t.item)}}const ne=_("tab");class re{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ne(),Bt()),e.viewProps.bindClassModifiers(this.element),b(e.empty,y(this.element,ne(void 0,"nop")));const i=t.createElement("div");i.classList.add(ne("i")),this.element.appendChild(i),this.itemsElement=i;const n=e.contentsElement;n.classList.add(ne("c")),this.element.appendChild(n),this.contentsElement=n}}class se extends Tt{constructor(t,e){const i=new Ut(t,{blade:e.blade,viewProps:e.viewProps}),n=T(!0);super({blade:e.blade,rackController:i,view:new re(t,{contentsElement:i.view.element,empty:n,viewProps:e.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onPageSelectedChange_=this.onPageSelectedChange_.bind(this),this.pageSet_=new bt((()=>null)),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.empty_=n,this.applyPages_()}get pageSet(){return this.pageSet_}add(t,e){this.pageSet_.add(t,null!=e?e:this.pageSet_.items.length)}remove(t){this.pageSet_.remove(this.pageSet_.items[t])}applyPages_(){this.keepSelection_(),this.empty_.rawValue=0===this.pageSet_.items.length}onPageAdd_(t){const e=t.item;W(this.view.itemsElement,e.itemController.view.element,t.index),this.rackController.rack.add(e.contentController,t.index),e.props.value("selected").emitter.on("change",this.onPageSelectedChange_),this.applyPages_()}onPageRemove_(t){const e=t.item;J(e.itemController.view.element),this.rackController.rack.remove(e.contentController),e.props.value("selected").emitter.off("change",this.onPageSelectedChange_),this.applyPages_()}keepSelection_(){if(0===this.pageSet_.items.length)return;const t=this.pageSet_.items.findIndex((t=>t.props.get("selected")));t<0?this.pageSet_.items.forEach(((t,e)=>{t.props.set("selected",0===e)})):this.pageSet_.items.forEach(((e,i)=>{e.props.set("selected",i===t)}))}onPageSelectedChange_(t){if(t.rawValue){const e=this.pageSet_.items.findIndex((e=>e.props.value("selected")===t.sender));this.pageSet_.items.forEach(((t,i)=>{t.props.set("selected",i===e)}))}else this.keepSelection_()}}const oe={id:"tab",type:"blade",accept(t){const e=j,i=U(t,{pages:e.required.array(e.required.object({title:e.required.string})),view:e.required.constant("tab")});return i&&0!==i.pages.length?{params:i}:null},controller(t){const e=new se(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach((i=>{const n=new te(t.document,{itemProps:D.fromObject({selected:!1,title:i.title}),props:D.fromObject({selected:!1})});e.add(n)})),e},api:t=>t.controller instanceof se?new ie(t.controller,t.pool):null};function ae(t,e){const i=t.accept(e.params);if(!i)return null;const n=j.optional.boolean(e.params.disabled).value,r=j.optional.boolean(e.params.hidden).value;return t.controller({blade:ht(),document:e.document,params:a(Object.assign(Object.assign({},i.params),{disabled:n,hidden:r})),viewProps:Gt.create({disabled:n,hidden:r})})}class le{constructor(){this.disabled=!1,this.emitter=new v}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class he{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new v,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class de{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce(((t,e)=>e.constrain(t)),t)}}function pe(t,e){if(t instanceof e)return t;if(t instanceof de){const i=t.constraints.reduce(((t,i)=>t||(i instanceof e?i:null)),null);if(i)return i}return null}class ue{constructor(t){this.options=t}constrain(t){const e=this.options;return 0===e.length||e.filter((e=>e.value===t)).length>0?t:e[0].value}}class ce{constructor(t){this.maxValue=t.max,this.minValue=t.min}constrain(t){let e=t;return l(this.minValue)||(e=Math.max(e,this.minValue)),l(this.maxValue)||(e=Math.min(e,this.maxValue)),e}}class ve{constructor(t){this.step=t}constrain(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step}}const me=_("lst");class _e{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(me()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("select");i.classList.add(me("s")),w(this.props_,"options",(e=>{tt(i),e.forEach(((e,n)=>{const r=t.createElement("option");r.dataset.index=String(n),r.textContent=e.text,r.value=String(e.value),i.appendChild(r)}))})),e.viewProps.bindDisabled(i),this.element.appendChild(i),this.selectElement=i;const n=t.createElement("div");n.classList.add(me("m")),n.appendChild(Q(t,"dropdown")),this.element.appendChild(n),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class fe{constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new _e(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const e=a(t.currentTarget).selectedOptions.item(0);if(!e)return;const i=Number(e.dataset.index);this.value.rawValue=this.props.get("options")[i].value}}const ge=_("pop");class be{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ge()),e.viewProps.bindClassModifiers(this.element),b(e.shows,y(this.element,ge(void 0,"v")))}}class we{constructor(t,e){this.shows=T(!1),this.viewProps=e.viewProps,this.view=new be(t,{shows:this.shows,viewProps:this.viewProps})}}const xe=_("txt");class ye{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(xe()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const i=t.createElement("input");i.classList.add(xe("i")),i.type="text",e.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class Ce{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new ye(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=a(t.currentTarget).value,i=this.parser_(e);l(i)||(this.value.rawValue=i),this.view.refresh()}}function Pe(t){return String(t)}function Ee(t){return"false"!==t&&!!t}function ke(t){return Pe(t)}class Me{constructor(t){this.text=t}evaluate(){return Number(this.text)}toString(){return this.text}}const Se={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class Te{constructor(t,e,i){this.left=e,this.operator=t,this.right=i}evaluate(){const t=Se[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const De={"+":t=>t,"-":t=>-t,"~":t=>~t};class Ve{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=De[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Ae(t){return(e,i)=>{for(let n=0;n<t.length;n++){const r=t[n](e,i);if(""!==r)return r}return""}}function Le(t,e){var i;const n=t.substr(e).match(/^\s+/);return null!==(i=n&&n[0])&&void 0!==i?i:""}function Re(t,e){const i=t.substr(e,1);return i.match(/^[1-9]$/)?i:""}function Oe(t,e){var i;const n=t.substr(e).match(/^[0-9]+/);return null!==(i=n&&n[0])&&void 0!==i?i:""}function je(t,e){const i=Oe(t,e);if(""!==i)return i;const n=t.substr(e,1);if("-"!==n&&"+"!==n)return"";const r=Oe(t,e+=1);return""===r?"":n+r}function Ue(t,e){const i=t.substr(e,1);if(e+=1,"e"!==i.toLowerCase())return"";const n=je(t,e);return""===n?"":i+n}function Be(t,e){const i=t.substr(e,1);if("0"===i)return i;const n=Re(t,e);return e+=n.length,""===n?"":n+Oe(t,e)}function ze(t,e){const i=Be(t,e);if(e+=i.length,""===i)return"";const n=t.substr(e,1);if(e+=n.length,"."!==n)return"";const r=Oe(t,e);return i+n+r+Ue(t,e+=r.length)}function Ie(t,e){const i=t.substr(e,1);if(e+=i.length,"."!==i)return"";const n=Oe(t,e);return e+=n.length,""===n?"":i+n+Ue(t,e)}function Fe(t,e){const i=Be(t,e);return e+=i.length,""===i?"":i+Ue(t,e)}const Ke=Ae([ze,Ie,Fe]);function Ne(t,e){var i;const n=t.substr(e).match(/^[01]+/);return null!==(i=n&&n[0])&&void 0!==i?i:""}function He(t,e){const i=t.substr(e,2);if(e+=i.length,"0b"!==i.toLowerCase())return"";const n=Ne(t,e);return""===n?"":i+n}function Ye(t,e){var i;const n=t.substr(e).match(/^[0-7]+/);return null!==(i=n&&n[0])&&void 0!==i?i:""}function qe(t,e){const i=t.substr(e,2);if(e+=i.length,"0o"!==i.toLowerCase())return"";const n=Ye(t,e);return""===n?"":i+n}function $e(t,e){var i;const n=t.substr(e).match(/^[0-9a-f]+/i);return null!==(i=n&&n[0])&&void 0!==i?i:""}function Xe(t,e){const i=t.substr(e,2);if(e+=i.length,"0x"!==i.toLowerCase())return"";const n=$e(t,e);return""===n?"":i+n}const Ze=Ae([He,qe,Xe]),Ge=Ae([Ze,Ke]);function Qe(t,e){const i=Ge(t,e);return e+=i.length,""===i?null:{evaluable:new Me(i),cursor:e}}function We(t,e){const i=t.substr(e,1);if(e+=i.length,"("!==i)return null;const n=ri(t,e);if(!n)return null;e=n.cursor,e+=Le(t,e).length;const r=t.substr(e,1);return e+=r.length,")"!==r?null:{evaluable:n.evaluable,cursor:e}}function Je(t,e){return Qe(t,e)||We(t,e)}function ti(t,e){const i=Je(t,e);if(i)return i;const n=t.substr(e,1);if(e+=n.length,"+"!==n&&"-"!==n&&"~"!==n)return null;const r=ti(t,e);return r?{cursor:e=r.cursor,evaluable:new Ve(n,r.evaluable)}:null}function ei(t,e,i){i+=Le(e,i).length;const n=t.filter((t=>e.startsWith(t,i)))[0];return n?(i+=n.length,{cursor:i+=Le(e,i).length,operator:n}):null}function ii(t,e){return(i,n)=>{const r=t(i,n);if(!r)return null;n=r.cursor;let s=r.evaluable;for(;;){const r=ei(e,i,n);if(!r)break;n=r.cursor;const o=t(i,n);if(!o)return null;n=o.cursor,s=new Te(r.operator,s,o.evaluable)}return s?{cursor:n,evaluable:s}:null}}const ni=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(((t,e)=>ii(t,e)),ti);function ri(t,e){return e+=Le(t,e).length,ni(t,e)}function si(t){const e=ri(t,0);return e?e.cursor+Le(t,e.cursor).length!==t.length?null:e.evaluable:null}function oi(t){var e;const i=si(t);return null!==(e=null==i?void 0:i.evaluate())&&void 0!==e?e:null}function ai(t){if("number"==typeof t)return t;if("string"==typeof t){const e=oi(t);if(!l(e))return e}return 0}function li(t){return String(t)}function hi(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}const di=hi(0);function pi(t){return di(t)+"%"}function ui(t){return String(t)}function ci(t){return t}function vi(t,e){for(;t.length<e;)t.push(void 0)}function mi(t){const e=[];return vi(e,t),T(e)}function _i(t){const e=t.indexOf(void 0);return a(e<0?t:t.slice(0,e))}function fi(t,e){const i=[..._i(t),e];return i.length>t.length?i.splice(0,i.length-t.length):vi(i,t.length),i}function gi({primary:t,secondary:e,forward:i,backward:n}){let r=!1;function s(t){r||(r=!0,t(),r=!1)}t.emitter.on("change",(n=>{s((()=>{e.setRawValue(i(t,e),n.options)}))})),e.emitter.on("change",(r=>{s((()=>{t.setRawValue(n(t,e),r.options)})),s((()=>{e.setRawValue(i(t,e),r.options)}))})),s((()=>{e.setRawValue(i(t,e),{forceEmit:!1,last:!0})}))}function bi(t,e){const i=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+i:e.downKey?-i:0}function wi(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function xi(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function yi(t){return"ArrowUp"===t||"ArrowDown"===t}function Ci(t){return yi(t)||"ArrowLeft"===t||"ArrowRight"===t}function Pi(t,e){const i=e.ownerDocument.defaultView,n=e.getBoundingClientRect();return{x:t.pageX-((i&&i.scrollX||0)+n.left),y:t.pageY-((i&&i.scrollY||0)+n.top)}}class Ei{constructor(t){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new v,t.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),t.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),t.addEventListener("touchend",this.onTouchEnd_),t.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const i=this.elem_.ownerDocument;i.addEventListener("mousemove",this.onDocumentMouseMove_),i.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(Pi(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(Pi(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(Pi(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-i.left,y:e.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-i.left,y:e.clientY-i.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const i=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,n=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(i?{x:i.clientX-n.left,y:i.clientY-n.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function ki(t,e,i,n,r){return n+(t-e)/(i-e)*(r-n)}function Mi(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Si(t,e,i){return Math.min(Math.max(t,e),i)}function Ti(t,e){return(t%e+e)%e}const Di=_("txt");class Vi{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Di(),Di(void 0,"num")),e.arrayPosition&&this.element.classList.add(Di(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("input");i.classList.add(Di("i")),i.type="text",e.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Di()),this.inputElement.classList.add(Di("i"));const n=t.createElement("div");n.classList.add(Di("k")),this.element.appendChild(n),this.knobElement=n;const r=t.createElementNS(N,"svg");r.classList.add(Di("g")),this.knobElement.appendChild(r);const s=t.createElementNS(N,"path");s.classList.add(Di("gb")),r.appendChild(s),this.guideBodyElem_=s;const o=t.createElementNS(N,"path");o.classList.add(Di("gh")),r.appendChild(o),this.guideHeadElem_=o;const a=t.createElement("div");a.classList.add(_("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(Di(void 0,"drg"));this.element.classList.add(Di(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),i=e+(e>0?-1:e<0?1:0),n=Si(-i,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${i+n},0 L${i},4 L${i+n},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class Ai{constructor(t,e){this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=T(null),this.view=new Vi(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new Ei(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}onInputChange_(t){const e=a(t.currentTarget).value,i=this.parser_(e);l(i)||(this.value.rawValue=i),this.view.refresh()}onInputKeyDown_(t){const e=bi(this.baseStep_,wi(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==bi(this.baseStep_,wi(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(t){if(!t.point)return null;const e=t.point.x-t.bounds.width/2;return this.originRawValue_+e*this.props.get("draggingScale")}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Li=_("sld");class Ri{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Li()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(Li("t")),e.viewProps.bindTabIndex(i),this.element.appendChild(i),this.trackElement=i;const n=t.createElement("div");n.classList.add(Li("k")),this.trackElement.appendChild(n),this.knobElement=n,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}update_(){const t=Si(ki(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${t}%`}onChange_(){this.update_()}}class Oi{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new Ri(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ei(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){t.point&&this.value.setRawValue(ki(Si(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=bi(this.baseStep_,xi(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){0!==bi(this.baseStep_,xi(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const ji=_("sldtxt");class Ui{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ji());const i=t.createElement("div");i.classList.add(ji("s")),this.sliderView_=e.sliderView,i.appendChild(this.sliderView_.element),this.element.appendChild(i);const n=t.createElement("div");n.classList.add(ji("t")),this.textView_=e.textView,n.appendChild(this.textView_.element),this.element.appendChild(n)}}class Bi{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new Oi(t,{baseStep:e.baseStep,props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new Ai(t,{baseStep:e.baseStep,parser:e.parser,props:e.textProps,value:e.value,viewProps:e.viewProps}),this.view=new Ui(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function zi(t,e){t.write(e)}function Ii(t){const e=j;return Array.isArray(t)?e.required.array(e.required.object({text:e.required.string,value:e.required.raw}))(t).value:"object"==typeof t?e.required.raw(t).value:void 0}function Fi(t){if("inline"===t||"popup"===t)return t}function Ki(t){const e=j;return e.required.object({max:e.optional.number,min:e.optional.number,step:e.optional.number})(t).value}function Ni(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach((i=>{e.push({text:i,value:t[i]})})),e}function Hi(t){return l(t)?null:new ue(Ni(a(t)))}function Yi(t){const e=t?pe(t,ue):null;return e?e.options:null}function qi(t){const e=t?pe(t,ve):null;return e?e.step:null}function $i(t,e){const i=t&&pe(t,ve);return i?Mi(i.step):Math.max(Mi(e),2)}function Xi(t){const e=qi(t);return null!=e?e:1}function Zi(t,e){var i;const n=t&&pe(t,ve),r=Math.abs(null!==(i=null==n?void 0:n.step)&&void 0!==i?i:e);return 0===r?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}const Gi=_("ckb");class Qi{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Gi()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("label");i.classList.add(Gi("l")),this.element.appendChild(i);const n=t.createElement("input");n.classList.add(Gi("i")),n.type="checkbox",i.appendChild(n),this.inputElement=n,e.viewProps.bindDisabled(this.inputElement);const r=t.createElement("div");r.classList.add(Gi("w")),i.appendChild(r);const s=Q(t,"check");r.appendChild(s),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Wi{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Qi(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=a(t.currentTarget);this.value.rawValue=e.checked}}function Ji(t){const e=[],i=Hi(t.options);return i&&e.push(i),new de(e)}const tn={id:"input-bool",type:"input",accept:(t,e)=>{if("boolean"!=typeof t)return null;const i=U(e,{options:j.optional.custom(Ii)});return i?{initialValue:t,params:i}:null},binding:{reader:t=>Ee,constraint:t=>Ji(t.params),writer:t=>zi},controller:t=>{var e;const i=t.document,n=t.value,r=t.constraint;return r&&pe(r,ue)?new fe(i,{props:D.fromObject({options:null!==(e=Yi(r))&&void 0!==e?e:[]}),value:n,viewProps:t.viewProps}):new Wi(i,{value:n,viewProps:t.viewProps})}},en=_("col");class nn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(en()),e.foldable.bindExpandedClass(this.element,en(void 0,"expanded")),w(e.foldable,"completed",y(this.element,en(void 0,"cpl")));const i=t.createElement("div");i.classList.add(en("h")),this.element.appendChild(i);const n=t.createElement("div");n.classList.add(en("s")),i.appendChild(n),this.swatchElement=n;const r=t.createElement("div");if(r.classList.add(en("t")),i.appendChild(r),this.textElement=r,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(en("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}function rn(t,e,i){const n=Si(t/255,0,1),r=Si(e/255,0,1),s=Si(i/255,0,1),o=Math.max(n,r,s),a=Math.min(n,r,s),l=o-a;let h=0,d=0;const p=(a+o)/2;return 0!==l&&(d=l/(1-Math.abs(o+a-1)),h=n===o?(r-s)/l:r===o?2+(s-n)/l:4+(n-r)/l,h=h/6+(h<0?1:0)),[360*h,100*d,100*p]}function sn(t,e,i){const n=(t%360+360)%360,r=Si(e/100,0,1),s=Si(i/100,0,1),o=(1-Math.abs(2*s-1))*r,a=o*(1-Math.abs(n/60%2-1)),l=s-o/2;let h,d,p;return[h,d,p]=n>=0&&n<60?[o,a,0]:n>=60&&n<120?[a,o,0]:n>=120&&n<180?[0,o,a]:n>=180&&n<240?[0,a,o]:n>=240&&n<300?[a,0,o]:[o,0,a],[255*(h+l),255*(d+l),255*(p+l)]}function on(t,e,i){const n=Si(t/255,0,1),r=Si(e/255,0,1),s=Si(i/255,0,1),o=Math.max(n,r,s),a=o-Math.min(n,r,s);let l;return l=0===a?0:o===n?((r-s)/a%6+6)%6*60:o===r?60*((s-n)/a+2):60*((n-r)/a+4),[l,100*(0===o?0:a/o),100*o]}function an(t,e,i){const n=Ti(t,360),r=Si(e/100,0,1),s=Si(i/100,0,1),o=s*r,a=o*(1-Math.abs(n/60%2-1)),l=s-o;let h,d,p;return[h,d,p]=n>=0&&n<60?[o,a,0]:n>=60&&n<120?[a,o,0]:n>=120&&n<180?[0,o,a]:n>=180&&n<240?[0,a,o]:n>=240&&n<300?[a,0,o]:[o,0,a],[255*(h+l),255*(d+l),255*(p+l)]}function ln(t,e,i){const n=i+e*(100-Math.abs(2*i-100))/200;return[t,0!==n?e*(100-Math.abs(2*i-100))/n:0,i+e*(100-Math.abs(2*i-100))/200]}function hn(t,e,i){const n=100-Math.abs(i*(200-e)/100-100);return[t,0!==n?e*i/n:0,i*(200-e)/200]}function dn(t){return[t[0],t[1],t[2]]}function pn(t,e){return[t[0],t[1],t[2],e]}const un={hsl:{hsl:(t,e,i)=>[t,e,i],hsv:ln,rgb:sn},hsv:{hsl:hn,hsv:(t,e,i)=>[t,e,i],rgb:an},rgb:{hsl:rn,hsv:on,rgb:(t,e,i)=>[t,e,i]}};function cn(t,e,i){return un[e][i](...t)}const vn={hsl:t=>{var e;return[Ti(t[0],360),Si(t[1],0,100),Si(t[2],0,100),Si(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},hsv:t=>{var e;return[Ti(t[0],360),Si(t[1],0,100),Si(t[2],0,100),Si(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},rgb:t=>{var e;return[Si(t[0],0,255),Si(t[1],0,255),Si(t[2],0,255),Si(null!==(e=t[3])&&void 0!==e?e:1,0,1)]}};function mn(t,e){return"object"==typeof t&&!l(t)&&e in t&&"number"==typeof t[e]}class _n{constructor(t,e){this.mode_=e,this.comps_=vn[e](t)}static black(){return new _n([0,0,0],"rgb")}static fromObject(t){const e="a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b];return new _n(e,"rgb")}static toRgbaObject(t){return t.toRgbaObject()}static isRgbColorObject(t){return mn(t,"r")&&mn(t,"g")&&mn(t,"b")}static isRgbaColorObject(t){return this.isRgbColorObject(t)&&mn(t,"a")}static isColorObject(t){return this.isRgbColorObject(t)}static equals(t,e){if(t.mode_!==e.mode_)return!1;const i=t.comps_,n=e.comps_;for(let r=0;r<i.length;r++)if(i[r]!==n[r])return!1;return!0}get mode(){return this.mode_}getComponents(t){return pn(cn(dn(this.comps_),this.mode_,t||this.mode_),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const fn=_("colp");class gn{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(fn());const i=t.createElement("div");i.classList.add(fn("hsv"));const n=t.createElement("div");n.classList.add(fn("sv")),this.svPaletteView_=e.svPaletteView,n.appendChild(this.svPaletteView_.element),i.appendChild(n);const r=t.createElement("div");r.classList.add(fn("h")),this.hPaletteView_=e.hPaletteView,r.appendChild(this.hPaletteView_.element),i.appendChild(r),this.element.appendChild(i);const s=t.createElement("div");if(s.classList.add(fn("rgb")),this.textView_=e.textView,s.appendChild(this.textView_.element),this.element.appendChild(s),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const i=t.createElement("div");i.classList.add(fn("a"));const n=t.createElement("div");n.classList.add(fn("ap")),n.appendChild(this.alphaViews_.palette.element),i.appendChild(n);const r=t.createElement("div");r.classList.add(fn("at")),r.appendChild(this.alphaViews_.text.element),i.appendChild(r),this.element.appendChild(i)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map((t=>t.inputElement))];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function bn(t){const e=j;return U(t,{alpha:e.optional.boolean,expanded:e.optional.boolean,picker:e.optional.custom(Fi)})}function wn(t){return t?.1:1}function xn(t,e){const i=t.match(/^(.+)%$/);return i?Math.min(.01*parseFloat(i[1])*e,e):Math.min(parseFloat(t),e)}const yn={deg:t=>t,grad:t=>360*t/400,rad:t=>360*t/(2*Math.PI),turn:t=>360*t};function Cn(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const i=parseFloat(e[1]),n=e[2];return yn[n](i)}const Pn={"func.rgb":t=>{const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[xn(e[1],255),xn(e[2],255),xn(e[3],255)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:new _n(i,"rgb")},"func.rgba":t=>{const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[xn(e[1],255),xn(e[2],255),xn(e[3],255),xn(e[4],1)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:new _n(i,"rgb")},"func.hsl":t=>{const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[Cn(e[1]),xn(e[2],100),xn(e[3],100)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:new _n(i,"hsl")},"func.hsla":t=>{const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const i=[Cn(e[1]),xn(e[2],100),xn(e[3],100),xn(e[4],1)];return isNaN(i[0])||isNaN(i[1])||isNaN(i[2])||isNaN(i[3])?null:new _n(i,"hsl")},"hex.rgb":t=>{const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new _n([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)],"rgb");const i=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return i?new _n([parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)],"rgb"):null},"hex.rgba":t=>{const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new _n([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),ki(parseInt(e[4]+e[4],16),0,255,0,1)],"rgb");const i=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return i?new _n([parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16),ki(parseInt(i[4],16),0,255,0,1)],"rgb"):null}};function En(t){return Object.keys(Pn).reduce(((e,i)=>e||((0,Pn[i])(t)?i:null)),null)}const kn=t=>{const e=En(t);return e?Pn[e](t):null};function Mn(t){return"func.hsla"===t||"func.rgba"===t||"hex.rgba"===t}function Sn(t){if("string"==typeof t){const e=kn(t);if(e)return e}return _n.black()}function Tn(t){const e=Si(Math.floor(t),0,255).toString(16);return 1===e.length?`0${e}`:e}function Dn(t,e="#"){return`${e}${dn(t.getComponents("rgb")).map(Tn).join("")}`}function Vn(t,e="#"){const i=t.getComponents("rgb");return`${e}${[i[0],i[1],i[2],255*i[3]].map(Tn).join("")}`}function An(t){const e=hi(0);return`rgb(${dn(t.getComponents("rgb")).map((t=>e(t))).join(", ")})`}function Ln(t){const e=hi(2),i=hi(0);return`rgba(${t.getComponents("rgb").map(((t,n)=>(3===n?e:i)(t))).join(", ")})`}function Rn(t){const e=[hi(0),pi,pi];return`hsl(${dn(t.getComponents("hsl")).map(((t,i)=>e[i](t))).join(", ")})`}function On(t){const e=[hi(0),pi,pi,hi(2)];return`hsla(${t.getComponents("hsl").map(((t,i)=>e[i](t))).join(", ")})`}const jn={"func.hsl":Rn,"func.hsla":On,"func.rgb":An,"func.rgba":Ln,"hex.rgb":Dn,"hex.rgba":Vn};function Un(t){return jn[t]}const Bn=_("apl");class zn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Bn()),e.viewProps.bindTabIndex(this.element);const i=t.createElement("div");i.classList.add(Bn("b")),this.element.appendChild(i);const n=t.createElement("div");n.classList.add(Bn("c")),i.appendChild(n),this.colorElem_=n;const r=t.createElement("div");r.classList.add(Bn("m")),this.element.appendChild(r),this.markerElem_=r;const s=t.createElement("div");s.classList.add(Bn("p")),this.markerElem_.appendChild(s),this.previewElem_=s,this.update_()}update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),i=new _n([e[0],e[1],e[2],0],"rgb"),n=new _n([e[0],e[1],e[2],255],"rgb"),r=["to right",Ln(i),Ln(n)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=Ln(t);const s=ki(e[3],0,1,0,100);this.markerElem_.style.left=`${s}%`}onValueChange_(){this.update_()}}class In{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new zn(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ei(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=t.point.x/t.bounds.width,n=this.value.rawValue,[r,s,o]=n.getComponents("hsv");this.value.setRawValue(new _n([r,s,o,i],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=bi(wn(!0),xi(t));if(0===e)return;const i=this.value.rawValue,[n,r,s,o]=i.getComponents("hsv");this.value.setRawValue(new _n([n,r,s,o+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==bi(wn(!0),xi(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Fn=_("coltxt");function Kn(t){const e=t.createElement("select"),i=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return e.appendChild(i.reduce(((e,i)=>{const n=t.createElement("option");return n.textContent=i.text,n.value=i.value,e.appendChild(n),e}),t.createDocumentFragment())),e}class Nn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Fn());const i=t.createElement("div");i.classList.add(Fn("m")),this.modeElem_=Kn(t),this.modeElem_.classList.add(Fn("ms")),i.appendChild(this.modeSelectElement);const n=t.createElement("div");n.classList.add(Fn("mm")),n.appendChild(Q(t,"dropdown")),i.appendChild(n),this.element.appendChild(i);const r=t.createElement("div");r.classList.add(Fn("w")),this.element.appendChild(r),this.textsElem_=r,this.textViews_=e.textViews,this.applyTextViews_(),b(e.colorMode,(t=>{this.modeElem_.value=t}))}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(t){this.textViews_=t,this.applyTextViews_()}applyTextViews_(){tt(this.textsElem_);const t=this.element.ownerDocument;this.textViews_.forEach((e=>{const i=t.createElement("div");i.classList.add(Fn("c")),i.appendChild(e.element),this.textsElem_.appendChild(i)}))}}const Hn=hi(0),Yn={rgb:()=>new ce({min:0,max:255}),hsl:t=>new ce(0===t?{min:0,max:360}:{min:0,max:100}),hsv:t=>new ce(0===t?{min:0,max:360}:{min:0,max:100})};function qn(t,e,i){return new Ai(t,{arrayPosition:0===i?"fst":2===i?"lst":"mid",baseStep:wn(!1),parser:e.parser,props:D.fromObject({draggingScale:1,formatter:Hn}),value:T(0,{constraint:Yn[e.colorMode](i)}),viewProps:e.viewProps})}class $n{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.parser_=e.parser,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=T(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new Nn(t,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const e={colorMode:this.colorMode.rawValue,parser:this.parser_,viewProps:this.viewProps},i=[qn(t,e,0),qn(t,e,1),qn(t,e,2)];return i.forEach(((t,e)=>{gi({primary:this.value,secondary:t.value,forward:t=>t.rawValue.getComponents(this.colorMode.rawValue)[e],backward:(t,i)=>{const n=this.colorMode.rawValue,r=t.rawValue.getComponents(n);return r[e]=i.rawValue,new _n(pn(dn(r),r[3]),n)}})})),i}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const Xn=_("hpl");class Zn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Xn()),e.viewProps.bindTabIndex(this.element);const i=t.createElement("div");i.classList.add(Xn("c")),this.element.appendChild(i);const n=t.createElement("div");n.classList.add(Xn("m")),this.element.appendChild(n),this.markerElem_=n,this.update_()}update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=An(new _n([e,100,100],"hsv"));const i=ki(e,0,360,0,100);this.markerElem_.style.left=`${i}%`}onValueChange_(){this.update_()}}class Gn{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Zn(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ei(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=ki(Si(t.point.x,0,t.bounds.width),0,t.bounds.width,0,359),n=this.value.rawValue,[,r,s,o]=n.getComponents("hsv");this.value.setRawValue(new _n([i,r,s,o],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=bi(wn(!1),xi(t));if(0===e)return;const i=this.value.rawValue,[n,r,s,o]=i.getComponents("hsv");this.value.setRawValue(new _n([n+e,r,s,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==bi(wn(!1),xi(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Qn=_("svp"),Wn=64;class Jn{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Qn()),e.viewProps.bindTabIndex(this.element);const i=t.createElement("canvas");i.height=Wn,i.width=Wn,i.classList.add(Qn("c")),this.element.appendChild(i),this.canvasElement=i;const n=t.createElement("div");n.classList.add(Qn("m")),this.element.appendChild(n),this.markerElem_=n,this.update_()}update_(){const t=Z(this.canvasElement);if(!t)return;const e=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,n=this.canvasElement.height,r=t.getImageData(0,0,i,n),s=r.data;for(let l=0;l<n;l++)for(let t=0;t<i;t++){const r=ki(t,0,i,0,100),o=ki(l,0,n,100,0),a=an(e[0],r,o),h=4*(l*i+t);s[h]=a[0],s[h+1]=a[1],s[h+2]=a[2],s[h+3]=255}t.putImageData(r,0,0);const o=ki(e[1],0,100,0,100);this.markerElem_.style.left=`${o}%`;const a=ki(e[2],0,100,100,0);this.markerElem_.style.top=`${a}%`}onValueChange_(){this.update_()}}class tr{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Jn(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ei(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=ki(t.point.x,0,t.bounds.width,0,100),n=ki(t.point.y,0,t.bounds.height,100,0),[r,,,s]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new _n([r,i,n,s],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){Ci(t.key)&&t.preventDefault();const[e,i,n,r]=this.value.rawValue.getComponents("hsv"),s=wn(!1),o=bi(s,xi(t)),a=bi(s,wi(t));0===o&&0===a||this.value.setRawValue(new _n([e,i+o,n+a,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=wn(!1),i=bi(e,xi(t)),n=bi(e,wi(t));0===i&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class er{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new Gn(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new tr(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new In(t,{value:this.value,viewProps:this.viewProps}),text:new Ai(t,{parser:oi,baseStep:.1,props:D.fromObject({draggingScale:.01,formatter:hi(2)}),value:T(0,{constraint:new ce({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&gi({primary:this.value,secondary:this.alphaIcs_.text.value,forward:t=>t.rawValue.getComponents()[3],backward:(t,e)=>{const i=t.rawValue.getComponents();return i[3]=e.rawValue,new _n(i,t.rawValue.mode)}}),this.textC_=new $n(t,{parser:oi,value:this.value,viewProps:this.viewProps}),this.view=new gn(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}get textController(){return this.textC_}}const ir=_("colsw");class nr{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(ir()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("div");i.classList.add(ir("sw")),this.element.appendChild(i),this.swatchElem_=i;const n=t.createElement("button");n.classList.add(ir("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Vn(t)}onValueChange_(){this.update_()}}class rr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new nr(t,{value:this.value,viewProps:this.viewProps})}}class sr{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=dt.create(e.expanded),this.swatchC_=new rr(t,{value:this.value,viewProps:this.viewProps});const i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new Ce(t,{parser:e.parser,props:D.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new nn(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===e.pickerLayout?new we(t,{viewProps:this.viewProps}):null;const n=new er(t,{supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});n.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=n,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(n.view.element),gi({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),ct(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,i=a(t.relatedTarget);i&&e.contains(i)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,i=it(t);i&&e.contains(i)||i&&i===this.swatchC_.view.buttonElement&&!q(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}function or(t){return _n.isColorObject(t)?_n.fromObject(t):_n.black()}function ar(t){return dn(t.getComponents("rgb")).reduce(((t,e)=>t<<8|255&Math.floor(e)),0)}function lr(t){return t.getComponents("rgb").reduce(((t,e,i)=>t<<8|255&Math.floor(3===i?255*e:e)),0)>>>0}function hr(t){return new _n([t>>16&255,t>>8&255,255&t],"rgb")}function dr(t){return new _n([t>>24&255,t>>16&255,t>>8&255,ki(255&t,0,255,0,1)],"rgb")}function pr(t){return"number"!=typeof t?_n.black():hr(t)}function ur(t){return"number"!=typeof t?_n.black():dr(t)}function cr(t){const e=Un(t);return(t,i)=>{zi(t,e(i))}}function vr(t){const e=t?lr:ar;return(t,i)=>{zi(t,e(i))}}function mr(t,e){const i=e.toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}function _r(t,e){const i=e.toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}function fr(t){return t?mr:_r}function gr(t){return"alpha"in t&&!0===t.alpha}function br(t){return t?t=>Vn(t,"0x"):t=>Dn(t,"0x")}const wr={id:"input-color-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;if(!("view"in e))return null;if("color"!==e.view)return null;const i=bn(e);return i?{initialValue:t,params:i}:null},binding:{reader:t=>gr(t.params)?ur:pr,equals:_n.equals,writer:t=>vr(gr(t.params))},controller:t=>{const e=gr(t.params),i="expanded"in t.params?t.params.expanded:void 0,n="picker"in t.params?t.params.picker:void 0;return new sr(t.document,{expanded:null!=i&&i,formatter:br(e),parser:kn,pickerLayout:null!=n?n:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}};function xr(t){return _n.isRgbaColorObject(t)}const yr={id:"input-color-object",type:"input",accept:(t,e)=>{if(!_n.isColorObject(t))return null;const i=bn(e);return i?{initialValue:t,params:i}:null},binding:{reader:t=>or,equals:_n.equals,writer:t=>fr(xr(t.initialValue))},controller:t=>{const e=_n.isRgbaColorObject(t.initialValue),i="expanded"in t.params?t.params.expanded:void 0,n="picker"in t.params?t.params.picker:void 0,r=e?Vn:Dn;return new sr(t.document,{expanded:null!=i&&i,formatter:r,parser:kn,pickerLayout:null!=n?n:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}},Cr={id:"input-color-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;if("view"in e&&"text"===e.view)return null;if(!En(t))return null;const i=bn(e);return i?{initialValue:t,params:i}:null},binding:{reader:t=>Sn,equals:_n.equals,writer:t=>{const e=En(t.initialValue);if(!e)throw p.shouldNeverHappen();return cr(e)}},controller:t=>{const e=En(t.initialValue);if(!e)throw p.shouldNeverHappen();const i=Un(e),n="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0;return new sr(t.document,{expanded:null!=n&&n,formatter:i,parser:kn,pickerLayout:null!=r?r:"popup",supportsAlpha:Mn(e),value:t.value,viewProps:t.viewProps})}};class Pr{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map(((t,e)=>{var i,n;return null!==(n=null===(i=this.components[e])||void 0===i?void 0:i.constrain(t))&&void 0!==n?n:t}));return this.asm_.fromComponents(e)}}const Er=_("pndtxt");class kr{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(Er()),this.textViews.forEach((e=>{const i=t.createElement("div");i.classList.add(Er("a")),i.appendChild(e.element),this.element.appendChild(i)}))}}function Mr(t,e,i){return new Ai(t,{arrayPosition:0===i?"fst":i===e.axes.length-1?"lst":"mid",baseStep:e.axes[i].baseStep,parser:e.parser,props:e.axes[i].textProps,value:T(0,{constraint:e.axes[i].constraint}),viewProps:e.viewProps})}class Sr{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map(((i,n)=>Mr(t,e,n))),this.acs_.forEach(((t,i)=>{gi({primary:this.value,secondary:t.value,forward:t=>e.assembly.toComponents(t.rawValue)[i],backward:(t,n)=>{const r=e.assembly.toComponents(t.rawValue);return r[i]=n.rawValue,e.assembly.fromComponents(r)}})})),this.view=new kr(t,{textViews:this.acs_.map((t=>t.view))})}}function Tr(t){return"step"in t&&!l(t.step)?new ve(t.step):null}function Dr(t){return"max"in t&&!l(t.max)||"min"in t&&!l(t.min)?new ce({max:t.max,min:t.min}):null}function Vr(t){const e=[],i=Tr(t);i&&e.push(i);const n=Dr(t);n&&e.push(n);const r=Hi(t.options);return r&&e.push(r),new de(e)}function Ar(t){const e=t?pe(t,ce):null;return e?[e.minValue,e.maxValue]:[void 0,void 0]}function Lr(t){const[e,i]=Ar(t);return[null!=e?e:0,null!=i?i:100]}const Rr={id:"input-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;const i=j,n=U(e,{format:i.optional.function,max:i.optional.number,min:i.optional.number,options:i.optional.custom(Ii),step:i.optional.number});return n?{initialValue:t,params:n}:null},binding:{reader:t=>ai,constraint:t=>Vr(t.params),writer:t=>zi},controller:t=>{var e,i;const n=t.value,r=t.constraint;if(r&&pe(r,ue))return new fe(t.document,{props:D.fromObject({options:null!==(e=Yi(r))&&void 0!==e?e:[]}),value:n,viewProps:t.viewProps});const s=null!==(i="format"in t.params?t.params.format:void 0)&&void 0!==i?i:hi($i(r,n.rawValue));if(r&&pe(r,ce)){const[e,i]=Lr(r);return new Bi(t.document,{baseStep:Xi(r),parser:oi,sliderProps:D.fromObject({maxValue:i,minValue:e}),textProps:D.fromObject({draggingScale:Zi(r,n.rawValue),formatter:s}),value:n,viewProps:t.viewProps})}return new Ai(t.document,{baseStep:Xi(r),parser:oi,props:D.fromObject({draggingScale:Zi(r,n.rawValue),formatter:s}),value:n,viewProps:t.viewProps})}};class Or{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(l(t))return!1;const e=t.x,i=t.y;return"number"==typeof e&&"number"==typeof i}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}const jr={toComponents:t=>t.getComponents(),fromComponents:t=>new Or(...t)},Ur=_("p2d");class Br{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ur()),e.viewProps.bindClassModifiers(this.element),b(e.expanded,y(this.element,Ur(void 0,"expanded")));const i=t.createElement("div");i.classList.add(Ur("h")),this.element.appendChild(i);const n=t.createElement("button");n.classList.add(Ur("b")),n.appendChild(Q(t,"p2dpad")),e.viewProps.bindDisabled(n),i.appendChild(n),this.buttonElement=n;const r=t.createElement("div");if(r.classList.add(Ur("t")),i.appendChild(r),this.textElement=r,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(Ur("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const zr=_("p2dp");class Ir{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=e.invertsY,this.maxValue_=e.maxValue,this.element=t.createElement("div"),this.element.classList.add(zr()),"popup"===e.layout&&this.element.classList.add(zr(void 0,"p"));const i=t.createElement("div");i.classList.add(zr("p")),e.viewProps.bindTabIndex(i),this.element.appendChild(i),this.padElement=i;const n=t.createElementNS(N,"svg");n.classList.add(zr("g")),this.padElement.appendChild(n),this.svgElem_=n;const r=t.createElementNS(N,"line");r.classList.add(zr("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const s=t.createElementNS(N,"line");s.classList.add(zr("ax")),s.setAttributeNS(null,"x1","50%"),s.setAttributeNS(null,"y1","0"),s.setAttributeNS(null,"x2","50%"),s.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(s);const o=t.createElementNS(N,"line");o.classList.add(zr("l")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(o),this.lineElem_=o;const a=t.createElement("div");a.classList.add(zr("m")),this.padElement.appendChild(a),this.markerElem_=a,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),i=this.maxValue_,n=ki(t,-i,+i,0,100),r=ki(e,-i,+i,0,100),s=this.invertsY_?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${n}%`),this.lineElem_.setAttributeNS(null,"y2",`${s}%`),this.markerElem_.style.left=`${n}%`,this.markerElem_.style.top=`${s}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Fr(t,e,i){return[bi(e[0],xi(t)),bi(e[1],wi(t))*(i?1:-1)]}class Kr{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.baseSteps_=e.baseSteps,this.maxValue_=e.maxValue,this.invertsY_=e.invertsY,this.view=new Ir(t,{invertsY:this.invertsY_,layout:e.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Ei(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const i=this.maxValue_,n=ki(t.point.x,0,t.bounds.width,-i,+i),r=ki(this.invertsY_?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-i,+i);this.value.setRawValue(new Or(n,r),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){Ci(t.key)&&t.preventDefault();const[e,i]=Fr(t,this.baseSteps_,this.invertsY_);0===e&&0===i||this.value.setRawValue(new Or(this.value.rawValue.x+e,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,i]=Fr(t,this.baseSteps_,this.invertsY_);0===e&&0===i||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Nr{constructor(t,e){var i,n;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=dt.create(e.expanded),this.popC_="popup"===e.pickerLayout?new we(t,{viewProps:this.viewProps}):null;const r=new Kr(t,{baseSteps:[e.axes[0].baseStep,e.axes[1].baseStep],invertsY:e.invertsY,layout:e.pickerLayout,maxValue:e.maxValue,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=r,this.textC_=new Sr(t,{assembly:jr,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new Br(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(i=this.view.buttonElement)||void 0===i||i.addEventListener("blur",this.onPadButtonBlur_),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),gi({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:t=>t.rawValue,backward:(t,e)=>e.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),ct(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,i=a(t.relatedTarget);i&&e.contains(i)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,i=it(t);i&&e.contains(i)||i&&i===this.view.buttonElement&&!q(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}function Hr(t){return Or.isObject(t)?new Or(t.x,t.y):new Or}function Yr(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function qr(t){if(!t)return;const e=[];return l(t.step)||e.push(new ve(t.step)),l(t.max)&&l(t.min)||e.push(new ce({max:t.max,min:t.min})),new de(e)}function $r(t){return new Pr({assembly:jr,components:[qr("x"in t?t.x:void 0),qr("y"in t?t.y:void 0)]})}function Xr(t,e){const i=t&&pe(t,ce);if(i)return Math.max(Math.abs(i.minValue||0),Math.abs(i.maxValue||0));const n=Xi(t);return Math.max(10*Math.abs(n),10*Math.abs(e))}function Zr(t,e){const i=e instanceof Pr?e.components[0]:void 0,n=e instanceof Pr?e.components[1]:void 0,r=Xr(i,t.x),s=Xr(n,t.y);return Math.max(r,s)}function Gr(t,e){return{baseStep:Xi(e),constraint:e,textProps:D.fromObject({draggingScale:Zi(e,t),formatter:hi($i(e,t))})}}function Qr(t){if(!("y"in t))return!1;const e=t.y;return!!e&&"inverted"in e&&!!e.inverted}const Wr={id:"input-point2d",type:"input",accept:(t,e)=>{if(!Or.isObject(t))return null;const i=j,n=U(e,{expanded:i.optional.boolean,picker:i.optional.custom(Fi),x:i.optional.custom(Ki),y:i.optional.object({inverted:i.optional.boolean,max:i.optional.number,min:i.optional.number,step:i.optional.number})});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Hr,constraint:t=>$r(t.params),equals:Or.equals,writer:t=>Yr},controller:t=>{const e=t.document,i=t.value,n=t.constraint;if(!(n instanceof Pr))throw p.shouldNeverHappen();const r="expanded"in t.params?t.params.expanded:void 0,s="picker"in t.params?t.params.picker:void 0;return new Nr(e,{axes:[Gr(i.rawValue.x,n.components[0]),Gr(i.rawValue.y,n.components[1])],expanded:null!=r&&r,invertsY:Qr(t.params),maxValue:Zr(i.rawValue,n),parser:oi,pickerLayout:null!=s?s:"popup",value:i,viewProps:t.viewProps})}};class Jr{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(l(t))return!1;const e=t.x,i=t.y,n=t.z;return"number"==typeof e&&"number"==typeof i&&"number"==typeof n}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const ts={toComponents:t=>t.getComponents(),fromComponents:t=>new Jr(...t)};function es(t){return Jr.isObject(t)?new Jr(t.x,t.y,t.z):new Jr}function is(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function ns(t){if(!t)return;const e=[];return l(t.step)||e.push(new ve(t.step)),l(t.max)&&l(t.min)||e.push(new ce({max:t.max,min:t.min})),new de(e)}function rs(t){return new Pr({assembly:ts,components:[ns("x"in t?t.x:void 0),ns("y"in t?t.y:void 0),ns("z"in t?t.z:void 0)]})}function ss(t,e){return{baseStep:Xi(e),constraint:e,textProps:D.fromObject({draggingScale:Zi(e,t),formatter:hi($i(e,t))})}}const os={id:"input-point3d",type:"input",accept:(t,e)=>{if(!Jr.isObject(t))return null;const i=j,n=U(e,{x:i.optional.custom(Ki),y:i.optional.custom(Ki),z:i.optional.custom(Ki)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>es,constraint:t=>rs(t.params),equals:Jr.equals,writer:t=>is},controller:t=>{const e=t.value,i=t.constraint;if(!(i instanceof Pr))throw p.shouldNeverHappen();return new Sr(t.document,{assembly:ts,axes:[ss(e.rawValue.x,i.components[0]),ss(e.rawValue.y,i.components[1]),ss(e.rawValue.z,i.components[2])],parser:oi,value:e,viewProps:t.viewProps})}};class as{constructor(t=0,e=0,i=0,n=0){this.x=t,this.y=e,this.z=i,this.w=n}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(l(t))return!1;const e=t.x,i=t.y,n=t.z,r=t.w;return"number"==typeof e&&"number"==typeof i&&"number"==typeof n&&"number"==typeof r}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const ls={toComponents:t=>t.getComponents(),fromComponents:t=>new as(...t)};function hs(t){return as.isObject(t)?new as(t.x,t.y,t.z,t.w):new as}function ds(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function ps(t){if(!t)return;const e=[];return l(t.step)||e.push(new ve(t.step)),l(t.max)&&l(t.min)||e.push(new ce({max:t.max,min:t.min})),new de(e)}function us(t){return new Pr({assembly:ls,components:[ps("x"in t?t.x:void 0),ps("y"in t?t.y:void 0),ps("z"in t?t.z:void 0),ps("w"in t?t.w:void 0)]})}function cs(t,e){return{baseStep:Xi(e),constraint:e,textProps:D.fromObject({draggingScale:Zi(e,t),formatter:hi($i(e,t))})}}const vs={id:"input-point4d",type:"input",accept:(t,e)=>{if(!as.isObject(t))return null;const i=j,n=U(e,{x:i.optional.custom(Ki),y:i.optional.custom(Ki),z:i.optional.custom(Ki),w:i.optional.custom(Ki)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>hs,constraint:t=>us(t.params),equals:as.equals,writer:t=>ds},controller:t=>{const e=t.value,i=t.constraint;if(!(i instanceof Pr))throw p.shouldNeverHappen();return new Sr(t.document,{assembly:ls,axes:e.rawValue.getComponents().map(((t,e)=>cs(t,i.components[e]))),parser:oi,value:e,viewProps:t.viewProps})}};function ms(t){const e=[],i=Hi(t.options);return i&&e.push(i),new de(e)}const _s={id:"input-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;const i=U(e,{options:j.optional.custom(Ii)});return i?{initialValue:t,params:i}:null},binding:{reader:t=>ui,constraint:t=>ms(t.params),writer:t=>zi},controller:t=>{var e;const i=t.document,n=t.value,r=t.constraint;return r&&pe(r,ue)?new fe(i,{props:D.fromObject({options:null!==(e=Yi(r))&&void 0!==e?e:[]}),value:n,viewProps:t.viewProps}):new Ce(i,{parser:t=>t,props:D.fromObject({formatter:ci}),value:n,viewProps:t.viewProps})}},fs={monitor:{defaultInterval:200,defaultLineCount:3}},gs=_("mll");class bs{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(gs()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("textarea");i.classList.add(gs("i")),i.style.height=`calc(var(--bld-us) * ${e.lineCount})`,i.readOnly=!0,e.viewProps.bindDisabled(i),this.element.appendChild(i),this.textareaElem_=i,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,i=[];this.value.rawValue.forEach((t=>{void 0!==t&&i.push(this.formatter_(t))})),t.textContent=i.join("\n"),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class ws{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new bs(t,{formatter:e.formatter,lineCount:e.lineCount,value:this.value,viewProps:this.viewProps})}}const xs=_("sgl");class ys{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(xs()),e.viewProps.bindClassModifiers(this.element);const i=t.createElement("input");i.classList.add(xs("i")),i.readOnly=!0,i.type="text",e.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}onValueUpdate_(){this.update_()}}class Cs{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new ys(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}const Ps={id:"monitor-bool",type:"monitor",accept:(t,e)=>{if("boolean"!=typeof t)return null;const i=U(e,{lineCount:j.optional.number});return i?{initialValue:t,params:i}:null},binding:{reader:t=>Ee},controller:t=>{var e;return 1===t.value.rawValue.length?new Cs(t.document,{formatter:ke,value:t.value,viewProps:t.viewProps}):new ws(t.document,{formatter:ke,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:fs.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}};class Es{constructor(){this.emitter=new v,this.index_=-1}get index(){return this.index_}set index(t){this.index_!==t&&(this.index_=t,this.emitter.emit("change",{index:t,sender:this}))}}const ks=_("grl");class Ms{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(ks()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.minValue_=e.minValue,this.maxValue_=e.maxValue,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const i=t.createElementNS(N,"svg");i.classList.add(ks("g")),i.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.element.appendChild(i),this.svgElem_=i;const n=t.createElementNS(N,"polyline");this.svgElem_.appendChild(n),this.lineElem_=n;const r=t.createElement("div");r.classList.add(ks("t"),_("tt")()),this.element.appendChild(r),this.tooltipElem_=r,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,i=this.minValue_,n=this.maxValue_,r=[];this.value.rawValue.forEach(((s,o)=>{if(void 0===s)return;const a=ki(o,0,e,0,t.width),l=ki(s,i,n,t.height,0);r.push([a,l].join(","))})),this.lineElem_.setAttributeNS(null,"points",r.join(" "));const s=this.tooltipElem_,o=this.value.rawValue[this.cursor_.index];if(void 0===o)return void s.classList.remove(ks("t","a"));const a=ki(this.cursor_.index,0,e,0,t.width),l=ki(o,i,n,t.height,0);s.style.left=`${a}px`,s.style.top=`${l}px`,s.textContent=`${this.formatter_(o)}`,s.classList.contains(ks("t","a"))||(s.classList.add(ks("t","a"),ks("t","in")),H(s),s.classList.remove(ks("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Ss{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.cursor_=new Es,this.view=new Ms(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,maxValue:e.maxValue,minValue:e.minValue,value:this.value,viewProps:this.viewProps}),q(t)){const t=new Ei(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}onGraphMouseLeave_(){this.cursor_.index=-1}onGraphMouseMove_(t){const e=this.view.element.getBoundingClientRect();this.cursor_.index=Math.floor(ki(t.offsetX,0,e.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.index=Math.floor(ki(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.index=-1}onGraphPointerUp_(){this.cursor_.index=-1}}function Ts(t){return"format"in t&&!l(t.format)?t.format:hi(2)}function Ds(t){var e;return 1===t.value.rawValue.length?new Cs(t.document,{formatter:Ts(t.params),value:t.value,viewProps:t.viewProps}):new ws(t.document,{formatter:Ts(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:fs.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}function Vs(t){var e,i,n;return new Ss(t.document,{formatter:Ts(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:fs.monitor.defaultLineCount,maxValue:null!==(i="max"in t.params?t.params.max:null)&&void 0!==i?i:100,minValue:null!==(n="min"in t.params?t.params.min:null)&&void 0!==n?n:0,value:t.value,viewProps:t.viewProps})}function As(t){return"view"in t&&"graph"===t.view}const Ls={id:"monitor-number",type:"monitor",accept:(t,e)=>{if("number"!=typeof t)return null;const i=j,n=U(e,{format:i.optional.function,lineCount:i.optional.number,max:i.optional.number,min:i.optional.number,view:i.optional.string});return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>As(t)?64:1,reader:t=>ai},controller:t=>As(t.params)?Vs(t):Ds(t)},Rs={id:"monitor-string",type:"monitor",accept:(t,e)=>{if("string"!=typeof t)return null;const i=j,n=U(e,{lineCount:i.optional.number,multiline:i.optional.boolean});return n?{initialValue:t,params:n}:null},binding:{reader:t=>ui},controller:t=>{var e;const i=t.value;return i.rawValue.length>1||"multiline"in t.params&&t.params.multiline?new ws(t.document,{formatter:ci,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:fs.monitor.defaultLineCount,value:i,viewProps:t.viewProps}):new Cs(t.document,{formatter:ci,value:i,viewProps:t.viewProps})}};class Os{constructor(t){this.onValueChange_=this.onValueChange_.bind(this),this.reader=t.reader,this.writer=t.writer,this.emitter=new v,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}read(){const t=this.target.read();void 0!==t&&(this.value.rawValue=this.reader(t))}write_(t){this.writer(this.target,t)}onValueChange_(t){this.write_(t.rawValue),this.emitter.emit("change",{options:t.options,rawValue:t.rawValue,sender:this})}}function js(t,e){const i=t.accept(e.target.read(),e.params);if(l(i))return null;const n=j,r={target:e.target,initialValue:i.initialValue,params:i.params},s=t.binding.reader(r),o=t.binding.constraint?t.binding.constraint(r):void 0,a=T(s(i.initialValue),{constraint:o,equals:t.binding.equals}),h=new Os({reader:s,target:e.target,value:a,writer:t.binding.writer(r)}),d=n.optional.boolean(e.params.disabled).value,p=n.optional.boolean(e.params.hidden).value,u=t.controller({constraint:o,document:e.document,initialValue:i.initialValue,params:i.params,value:h.value,viewProps:Gt.create({disabled:d,hidden:p})}),c=n.optional.string(e.params.label).value;return new xt(e.document,{binding:h,blade:ht(),props:D.fromObject({label:c||e.target.key}),valueController:u})}class Us{constructor(t){this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.emitter=new v,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const t=this.target.read();if(void 0===t)return;const e=this.value.rawValue,i=this.reader_(t);this.value.rawValue=fi(e,i),this.emitter.emit("update",{rawValue:i,sender:this})}onTick_(t){this.read()}}function Bs(t,e){return 0===e?new le:new he(t,null!=e?e:fs.monitor.defaultInterval)}function zs(t,e){var i,n,r;const s=j,o=t.accept(e.target.read(),e.params);if(l(o))return null;const a={target:e.target,initialValue:o.initialValue,params:o.params},h=t.binding.reader(a),d=null!==(n=null!==(i=s.optional.number(e.params.bufferSize).value)&&void 0!==i?i:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(o.params))&&void 0!==n?n:1,p=s.optional.number(e.params.interval).value,u=new Us({reader:h,target:e.target,ticker:Bs(e.document,p),value:mi(d)}),c=s.optional.boolean(e.params.disabled).value,v=s.optional.boolean(e.params.hidden).value,m=t.controller({document:e.document,params:o.params,value:u.value,viewProps:Gt.create({disabled:c,hidden:v})}),_=null!==(r=s.optional.string(e.params.label).value)&&void 0!==r?r:e.target.key;return new Ct(e.document,{binding:u,blade:ht(),props:D.fromObject({label:_}),valueController:m})}class Is{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t){"blade"===t.type?this.pluginsMap_.blades.unshift(t):"input"===t.type?this.pluginsMap_.inputs.unshift(t):"monitor"===t.type&&this.pluginsMap_.monitors.unshift(t)}createInput(t,e,i){if(l(e.read()))throw new p({context:{key:e.key},type:"nomatchingcontroller"});const n=this.pluginsMap_.inputs.reduce(((n,r)=>n||js(r,{document:t,target:e,params:i})),null);if(n)return n;throw new p({context:{key:e.key},type:"nomatchingcontroller"})}createMonitor(t,e,i){const n=this.pluginsMap_.monitors.reduce(((n,r)=>n||zs(r,{document:t,params:i,target:e})),null);if(n)return n;throw new p({context:{key:e.key},type:"nomatchingcontroller"})}createBlade(t,e){const i=this.pluginsMap_.blades.reduce(((i,n)=>i||ae(n,{document:t,params:e})),null);if(!i)throw new p({type:"nomatchingview",context:{params:e}});return i}createBladeApi(t){if(t instanceof xt)return new wt(t);if(t instanceof Ct)return new yt(t);if(t instanceof Ut)return new Mt(t,this);const e=this.pluginsMap_.blades.reduce(((e,i)=>e||i.api({controller:t,pool:this})),null);if(!e)throw p.shouldNeverHappen();return e}}function Fs(){const t=new Is;return[Wr,os,vs,_s,Rr,Cr,yr,wr,tn,Ps,Rs,Ls,at,Ft,$t,oe].forEach((e=>{t.register(e)})),t}class Ks extends i{constructor(t){super(t),this.emitter_=new v,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new r(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get options(){return this.controller_.valueController.props.get("options")}set options(t){this.controller_.valueController.props.set("options",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}}class Ns extends i{constructor(t){super(t),this.emitter_=new v,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new r(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(t){this.controller_.valueController.sliderController.props.set("maxValue",t)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(t){this.controller_.valueController.sliderController.props.set("minValue",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}}class Hs extends i{constructor(t){super(t),this.emitter_=new v,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new r(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(t){this.controller_.props.set("label",t)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(t){this.controller_.valueController.props.set("formatter",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const i=e.bind(this);return this.emitter_.on(t,(t=>{i(t.event)})),this}}const Ys={id:"list",type:"blade",accept(t){const e=j,i=U(t,{options:e.required.custom(Ii),value:e.required.raw,view:e.required.constant("list"),label:e.optional.string});return i?{params:i}:null},controller(t){const e=new fe(t.document,{props:D.fromObject({options:Ni(t.params.options)}),value:T(t.params.value),viewProps:t.viewProps});return new Kt(t.document,{blade:t.blade,props:D.fromObject({label:t.params.label}),valueController:e})},api:t=>t.controller instanceof Kt&&t.controller.valueController instanceof fe?new Ks(t.controller):null};function qs(t){return t.reduce(((t,e)=>Object.assign(t,{[e.presetKey]:e.read()})),{})}function $s(t,e){t.forEach((t=>{const i=e[t.presetKey];void 0!==i&&t.write(i)}))}class Xs extends St{constructor(t,e){super(t,e)}get element(){return this.controller_.view.element}importPreset(t){$s(this.controller_.rackController.rack.find(xt).map((t=>t.binding.target)),t),this.refresh()}exportPreset(){return qs(this.controller_.rackController.rack.find(xt).map((t=>t.binding.target)))}refresh(){this.controller_.rackController.rack.find(xt).forEach((t=>{t.binding.read()})),this.controller_.rackController.rack.find(Ct).forEach((t=>{t.binding.read()}))}}class Zs extends It{constructor(t,e){super(t,{expanded:e.expanded,blade:e.blade,props:e.props,root:!0,viewProps:e.viewProps})}}const Gs={id:"slider",type:"blade",accept(t){const e=j,i=U(t,{max:e.required.number,min:e.required.number,view:e.required.constant("slider"),format:e.optional.function,label:e.optional.string,value:e.optional.number});return i?{params:i}:null},controller(t){var e,i;const n=null!==(e=t.params.value)&&void 0!==e?e:0,r=new Bi(t.document,{baseStep:1,parser:oi,sliderProps:D.fromObject({maxValue:t.params.max,minValue:t.params.min}),textProps:D.fromObject({draggingScale:Zi(void 0,n),formatter:null!==(i=t.params.format)&&void 0!==i?i:li}),value:T(n),viewProps:t.viewProps});return new Kt(t.document,{blade:t.blade,props:D.fromObject({label:t.params.label}),valueController:r})},api:t=>t.controller instanceof Kt&&t.controller.valueController instanceof Bi?new Ns(t.controller):null},Qs={id:"text",type:"blade",accept(t){const e=j,i=U(t,{parse:e.required.function,value:e.required.raw,view:e.required.constant("text"),format:e.optional.function,label:e.optional.string});return i?{params:i}:null},controller(t){var e;const i=new Ce(t.document,{parser:t.params.parse,props:D.fromObject({formatter:null!==(e=t.params.format)&&void 0!==e?e:t=>String(t)}),value:T(t.params.value),viewProps:t.viewProps});return new Kt(t.document,{blade:t.blade,props:D.fromObject({label:t.params.label}),valueController:i})},api:t=>t.controller instanceof Kt&&t.controller.valueController instanceof Ce?new Hs(t.controller):null};function Ws(t){const e=t.createElement("div");return e.classList.add(_("dfw")()),t.body&&t.body.appendChild(e),e}function Js(t,e,i){if(t.querySelector(`style[data-tp-style=${e}]`))return;const n=t.createElement("style");n.dataset.tpStyle=e,n.textContent=i,t.head.appendChild(n)}class to extends Xs{constructor(t){var e;const i=t||{},n=null!==(e=i.document)&&void 0!==e?e:X(),r=Fs();super(new Zs(n,{expanded:i.expanded,blade:ht(),props:D.fromObject({title:i.title}),viewProps:Gt.create()}),r),this.pool_=r,this.containerElem_=i.container||Ws(n),this.containerElem_.appendChild(this.element),this.doc_=n,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw p.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw p.alreadyDisposed();if(this.usesDefaultWrapper_){const e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach((t=>{this.pool_.register(t),this.embedPluginStyle_(t)}))}embedPluginStyle_(t){t.css&&Js(this.document,`plugin-${t.id}`,t.css)}setUpDefaultPlugins_(){Js(this.document,"default",'.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor transparent;scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:transparent}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:transparent solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #28292e);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #28292e);--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i,.tp-fldv_c>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}'),this.pool_.getAll().forEach((t=>{this.embedPluginStyle_(t)})),this.registerPlugin({plugins:[Gs,Ys,oe,Qs]})}}const eo=new e("3.0.8");t.BladeApi=i,t.ButtonApi=c,t.FolderApi=St,t.InputBindingApi=wt,t.ListApi=Ks,t.MonitorBindingApi=yt,t.Pane=to,t.SeparatorApi=Nt,t.SliderApi=Ns,t.TabApi=ie,t.TabPageApi=ee,t.TextApi=Hs,t.TpChangeEvent=r,t.VERSION=eo,Object.defineProperty(t,"__esModule",{value:!0})}(Lr.exports);const Rr={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"};class Or{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){}dispose(){}}const jr=new e(-1,1,1,-1,0,1);const Ur=new class extends n{constructor(){super(),this.setAttribute("position",new r([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new r([0,2,0,0,2,0],2))}};class Br{constructor(t){this._mesh=new i(Ur,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,jr)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class zr extends Or{constructor(t,e="tDiffuse"){super(),this.textureID=e,this.uniforms=null,this.material=null,t instanceof s?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=o.clone(t.uniforms),this.material=new s({name:void 0!==t.name?t.name:"unspecified",defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this._fsQuad=new Br(this.material)}render(t,e,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this._fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this._fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this._fsQuad.render(t))}dispose(){this.material.dispose(),this._fsQuad.dispose()}}class Ir extends Or{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,i){const n=t.getContext(),r=t.state;let s,o;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0),this.inverse?(s=0,o=1):(s=1,o=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),r.buffers.stencil.setFunc(n.ALWAYS,s,4294967295),r.buffers.stencil.setClear(o),r.buffers.stencil.setLocked(!0),t.setRenderTarget(i),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.color.setMask(!0),r.buffers.depth.setMask(!0),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(n.EQUAL,1,4294967295),r.buffers.stencil.setOp(n.KEEP,n.KEEP,n.KEEP),r.buffers.stencil.setLocked(!0)}}class Fr extends Or{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class Kr{constructor(t,e){if(this.renderer=t,this._pixelRatio=t.getPixelRatio(),void 0===e){const i=t.getSize(new a);this._width=i.width,this._height=i.height,(e=new l(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:h})).texture.name="EffectComposer.rt1"}else this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new zr(Rr),this.copyPass.material.blending=d,this.clock=new p}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let i=!1;for(let n=0,r=this.passes.length;n<r;n++){const e=this.passes[n];if(!1!==e.enabled){if(e.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),e.render(this.renderer,this.writeBuffer,this.readBuffer,t,i),e.needsSwap){if(i){const e=this.renderer.getContext(),i=this.renderer.state.buffers.stencil;i.setFunc(e.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),i.setFunc(e.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Ir&&(e instanceof Ir?i=!0:e instanceof Fr&&(i=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(void 0===t){const e=this.renderer.getSize(new a);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const i=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(i,n),this.renderTarget2.setSize(i,n);for(let r=0;r<this.passes.length;r++)this.passes[r].setSize(i,n)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Nr extends Or{constructor(t,e,i=null,n=null,r=null){super(),this.scene=t,this.camera=e,this.overrideMaterial=i,this.clearColor=n,this.clearAlpha=r,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new u}render(t,e,i){const n=t.autoClear;let r,s;t.autoClear=!1,null!==this.overrideMaterial&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(t.getClearColor(this._oldClearColor),t.setClearColor(this.clearColor,t.getClearAlpha())),null!==this.clearAlpha&&(r=t.getClearAlpha(),t.setClearAlpha(this.clearAlpha)),1==this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:i),!0===this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),null!==this.clearColor&&t.setClearColor(this._oldClearColor),null!==this.clearAlpha&&t.setClearAlpha(r),null!==this.overrideMaterial&&(this.scene.overrideMaterial=s),t.autoClear=n}}const Hr={name:"LuminosityHighPassShader",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new u(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tfloat v = luminance( texel.xyz );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class Yr extends Or{constructor(t,e=1,i,n){super(),this.strength=e,this.radius=i,this.threshold=n,this.resolution=void 0!==t?new a(t.x,t.y):new a(256,256),this.clearColor=new u(0,0,0),this.needsSwap=!1,this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let r=Math.round(this.resolution.x/2),d=Math.round(this.resolution.y/2);this.renderTargetBright=new l(r,d,{type:h}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let s=0;s<this.nMips;s++){const t=new l(r,d,{type:h});t.texture.name="UnrealBloomPass.h"+s,t.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(t);const e=new l(r,d,{type:h});e.texture.name="UnrealBloomPass.v"+s,e.texture.generateMipmaps=!1,this.renderTargetsVertical.push(e),r=Math.round(r/2),d=Math.round(d/2)}const p=Hr;this.highPassUniforms=o.clone(p.uniforms),this.highPassUniforms.luminosityThreshold.value=n,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new s({uniforms:this.highPassUniforms,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader}),this.separableBlurMaterials=[];const _=[6,10,14,18,22];r=Math.round(this.resolution.x/2),d=Math.round(this.resolution.y/2);for(let s=0;s<this.nMips;s++)this.separableBlurMaterials.push(this._getSeparableBlurMaterial(_[s])),this.separableBlurMaterials[s].uniforms.invSize.value=new a(1/r,1/d),r=Math.round(r/2),d=Math.round(d/2);this.compositeMaterial=this._getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=e,this.compositeMaterial.uniforms.bloomRadius.value=.1;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new c(1,1,1),new c(1,1,1),new c(1,1,1),new c(1,1,1),new c(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,this.copyUniforms=o.clone(Rr.uniforms),this.blendMaterial=new s({uniforms:this.copyUniforms,vertexShader:Rr.vertexShader,fragmentShader:Rr.fragmentShader,blending:v,depthTest:!1,depthWrite:!1,transparent:!0}),this._oldClearColor=new u,this._oldClearAlpha=1,this._basic=new m,this._fsQuad=new Br(null)}dispose(){for(let t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(let t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose();for(let t=0;t<this.separableBlurMaterials.length;t++)this.separableBlurMaterials[t].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this._basic.dispose(),this._fsQuad.dispose()}setSize(t,e){let i=Math.round(t/2),n=Math.round(e/2);this.renderTargetBright.setSize(i,n);for(let r=0;r<this.nMips;r++)this.renderTargetsHorizontal[r].setSize(i,n),this.renderTargetsVertical[r].setSize(i,n),this.separableBlurMaterials[r].uniforms.invSize.value=new a(1/i,1/n),i=Math.round(i/2),n=Math.round(n/2)}render(t,e,i,n,r){t.getClearColor(this._oldClearColor),this._oldClearAlpha=t.getClearAlpha();const s=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),r&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this._fsQuad.material=this._basic,this._basic.map=i.texture,t.setRenderTarget(null),t.clear(),this._fsQuad.render(t)),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this._fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this._fsQuad.render(t);let o=this.renderTargetBright;for(let a=0;a<this.nMips;a++)this._fsQuad.material=this.separableBlurMaterials[a],this.separableBlurMaterials[a].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[a].uniforms.direction.value=Yr.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[a]),t.clear(),this._fsQuad.render(t),this.separableBlurMaterials[a].uniforms.colorTexture.value=this.renderTargetsHorizontal[a].texture,this.separableBlurMaterials[a].uniforms.direction.value=Yr.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[a]),t.clear(),this._fsQuad.render(t),o=this.renderTargetsVertical[a];this._fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this._fsQuad.render(t),this._fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,r&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this._fsQuad.render(t)):(t.setRenderTarget(i),this._fsQuad.render(t)),t.setClearColor(this._oldClearColor,this._oldClearAlpha),t.autoClear=s}_getSeparableBlurMaterial(t){const e=[],i=t/3;for(let n=0;n<t;n++)e.push(.39894*Math.exp(-.5*n*n/(i*i))/i);return new s({defines:{KERNEL_RADIUS:t},uniforms:{colorTexture:{value:null},invSize:{value:new a(.5,.5)},direction:{value:new a(.5,.5)},gaussianCoefficients:{value:e}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 invSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float gaussianCoefficients[KERNEL_RADIUS];\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tfloat weightSum = gaussianCoefficients[0];\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianCoefficients[i];\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;\n\t\t\t\t\t\tdiffuseSum += ( sample1 + sample2 ) * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4( diffuseSum, 1.0 );\n\t\t\t\t}"})}_getCompositeMaterial(t){return new s({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}Yr.BlurDirectionX=new a(1,0),Yr.BlurDirectionY=new a(0,1);const qr={type:"change"},$r={type:"start"},Xr={type:"end"},Zr=new _,Gr=new f,Qr=Math.cos(70*C.DEG2RAD),Wr=new c,Jr=2*Math.PI,ts=-1,es=0,is=1,ns=2,rs=3,ss=4,os=5,as=6;class ls extends g{constructor(t,e=null){super(t,e),this.state=ts,this.target=new c,this.cursor=new c,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:b.ROTATE,MIDDLE:b.DOLLY,RIGHT:b.PAN},this.touches={ONE:w.ROTATE,TWO:w.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new c,this._lastQuaternion=new x,this._lastTargetPosition=new c,this._quat=(new x).setFromUnitVectors(t.up,new c(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new y,this._sphericalDelta=new y,this._scale=1,this._panOffset=new c,this._rotateStart=new a,this._rotateEnd=new a,this._rotateDelta=new a,this._panStart=new a,this._panEnd=new a,this._panDelta=new a,this._dollyStart=new a,this._dollyEnd=new a,this._dollyDelta=new a,this._dollyDirection=new c,this._mouse=new a,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=ds.bind(this),this._onPointerDown=hs.bind(this),this._onPointerUp=ps.bind(this),this._onContextMenu=gs.bind(this),this._onMouseWheel=vs.bind(this),this._onKeyDown=ms.bind(this),this._onTouchStart=_s.bind(this),this._onTouchMove=fs.bind(this),this._onMouseDown=us.bind(this),this._onMouseMove=cs.bind(this),this._interceptControlDown=bs.bind(this),this._interceptControlUp=ws.bind(this),null!==this.domElement&&this.connect(this.domElement),this.update()}connect(t){super.connect(t),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1});this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents();this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(qr),this.update(),this.state=ts}update(t=null){const e=this.object.position;Wr.copy(e).sub(this.target),Wr.applyQuaternion(this._quat),this._spherical.setFromVector3(Wr),this.autoRotate&&this.state===ts&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,n=this.maxAzimuthAngle;isFinite(i)&&isFinite(n)&&(i<-Math.PI?i+=Jr:i>Math.PI&&(i-=Jr),n<-Math.PI?n+=Jr:n>Math.PI&&(n-=Jr),this._spherical.theta=i<=n?Math.max(i,Math.min(n,this._spherical.theta)):this._spherical.theta>(i+n)/2?Math.max(i,this._spherical.theta):Math.min(n,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let r=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const t=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),r=t!=this._spherical.radius}if(Wr.setFromSpherical(this._spherical),Wr.applyQuaternion(this._quatInverse),e.copy(this.target).add(Wr),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let t=null;if(this.object.isPerspectiveCamera){const e=Wr.length();t=this._clampDistance(e*this._scale);const i=e-t;this.object.position.addScaledVector(this._dollyDirection,i),this.object.updateMatrixWorld(),r=!!i}else if(this.object.isOrthographicCamera){const e=new c(this._mouse.x,this._mouse.y,0);e.unproject(this.object);const i=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),r=i!==this.object.zoom;const n=new c(this._mouse.x,this._mouse.y,0);n.unproject(this.object),this.object.position.sub(n).add(e),this.object.updateMatrixWorld(),t=Wr.length()}else this.zoomToCursor=!1;null!==t&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(t).add(this.object.position):(Zr.origin.copy(this.object.position),Zr.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Zr.direction))<Qr?this.object.lookAt(this.target):(Gr.setFromNormalAndCoplanarPoint(this.object.up,this.target),Zr.intersectPlane(Gr,this.target))))}else if(this.object.isOrthographicCamera){const t=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),t!==this.object.zoom&&(this.object.updateProjectionMatrix(),r=!0)}return this._scale=1,this._performCursorZoom=!1,!!(r||this._lastPosition.distanceToSquared(this.object.position)>1e-6||8*(1-this._lastQuaternion.dot(this.object.quaternion))>1e-6||this._lastTargetPosition.distanceToSquared(this.target)>1e-6)&&(this.dispatchEvent(qr),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(t){return null!==t?Jr/60*this.autoRotateSpeed*t:Jr/60/60*this.autoRotateSpeed}_getZoomScale(t){const e=Math.abs(.01*t);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){Wr.setFromMatrixColumn(e,0),Wr.multiplyScalar(-t),this._panOffset.add(Wr)}_panUp(t,e){!0===this.screenSpacePanning?Wr.setFromMatrixColumn(e,1):(Wr.setFromMatrixColumn(e,0),Wr.crossVectors(this.object.up,Wr)),Wr.multiplyScalar(t),this._panOffset.add(Wr)}_pan(t,e){const i=this.domElement;if(this.object.isPerspectiveCamera){const n=this.object.position;Wr.copy(n).sub(this.target);let r=Wr.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*r/i.clientHeight,this.object.matrix),this._panUp(2*e*r/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):this.enablePan=!1}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:this.enableZoom=!1}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:this.enableZoom=!1}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),n=t-i.left,r=e-i.top,s=i.width,o=i.height;this._mouse.x=n/s*2-1,this._mouse.y=-r/o*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(Jr*this._rotateDelta.x/e.clientHeight),this._rotateUp(Jr*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(Jr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-Jr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(Jr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-Jr*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(1===this._pointers.length)this._rotateStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._rotateStart.set(i,n)}}_handleTouchStartPan(t){if(1===this._pointers.length)this._panStart.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._panStart.set(i,n)}}_handleTouchStartDolly(t){const e=this._getSecondPointerPosition(t),i=t.pageX-e.x,n=t.pageY-e.y,r=Math.sqrt(i*i+n*n);this._dollyStart.set(0,r)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(1==this._pointers.length)this._rotateEnd.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._rotateEnd.set(i,n)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const e=this.domElement;this._rotateLeft(Jr*this._rotateDelta.x/e.clientHeight),this._rotateUp(Jr*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(1===this._pointers.length)this._panEnd.set(t.pageX,t.pageY);else{const e=this._getSecondPointerPosition(t),i=.5*(t.pageX+e.x),n=.5*(t.pageY+e.y);this._panEnd.set(i,n)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){const e=this._getSecondPointerPosition(t),i=t.pageX-e.x,n=t.pageY-e.y,r=Math.sqrt(i*i+n*n);this._dollyEnd.set(0,r),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const s=.5*(t.pageX+e.x),o=.5*(t.pageY+e.y);this._updateZoomParameters(s,o)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return void this._pointers.splice(e,1)}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];void 0===e&&(e=new a,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){const e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){const e=t.deltaMode,i={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100}return t.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function hs(t){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._isTrackingPointer(t)||(this._addPointer(t),"touch"===t.pointerType?this._onTouchStart(t):this._onMouseDown(t)))}function ds(t){!1!==this.enabled&&("touch"===t.pointerType?this._onTouchMove(t):this._onMouseMove(t))}function ps(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Xr),this.state=ts;break;case 1:const e=this._pointers[0],i=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:i.x,pageY:i.y})}}function us(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case b.DOLLY:if(!1===this.enableZoom)return;this._handleMouseDownDolly(t),this.state=is;break;case b.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(t),this.state=ns}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(t),this.state=es}break;case b.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(t),this.state=es}else{if(!1===this.enablePan)return;this._handleMouseDownPan(t),this.state=ns}break;default:this.state=ts}this.state!==ts&&this.dispatchEvent($r)}function cs(t){switch(this.state){case es:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(t);break;case is:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(t);break;case ns:if(!1===this.enablePan)return;this._handleMouseMovePan(t)}}function vs(t){!1!==this.enabled&&!1!==this.enableZoom&&this.state===ts&&(t.preventDefault(),this.dispatchEvent($r),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(Xr))}function ms(t){!1!==this.enabled&&this._handleKeyDown(t)}function _s(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case w.ROTATE:if(!1===this.enableRotate)return;this._handleTouchStartRotate(t),this.state=rs;break;case w.PAN:if(!1===this.enablePan)return;this._handleTouchStartPan(t),this.state=ss;break;default:this.state=ts}break;case 2:switch(this.touches.TWO){case w.DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(t),this.state=os;break;case w.DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(t),this.state=as;break;default:this.state=ts}break;default:this.state=ts}this.state!==ts&&this.dispatchEvent($r)}function fs(t){switch(this._trackPointer(t),this.state){case rs:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(t),this.update();break;case ss:if(!1===this.enablePan)return;this._handleTouchMovePan(t),this.update();break;case os:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(t),this.update();break;case as:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=ts}}function gs(t){!1!==this.enabled&&t.preventDefault()}function bs(t){if("Control"===t.key){this._controlActive=!0;this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0})}}function ws(t){if("Control"===t.key){this._controlActive=!1;this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0})}}var xs={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]},ys=function(t,e,i){return t*(1-i)+e*i},Cs=function(t){var e,i,n,r,s,o,a,l,h,d;t||(t={});l=(t.nshades||72)-1,a=t.format||"hex",(o=t.colormap)||(o="jet");if("string"==typeof o){if(o=o.toLowerCase(),!xs[o])throw Error(o+" not a supported colorscale");s=xs[o]}else{if(!Array.isArray(o))throw Error("unsupported colormap option",o);s=o.slice()}if(s.length>l+1)throw new Error(o+" map requires nshades to be at least size "+s.length);h=Array.isArray(t.alpha)?2!==t.alpha.length?[1,1]:t.alpha.slice():"number"==typeof t.alpha?[t.alpha,t.alpha]:[1,1];e=s.map((function(t){return Math.round(t.index*l)})),h[0]=Math.min(Math.max(h[0],0),1),h[1]=Math.min(Math.max(h[1],0),1);var p=s.map((function(t,e){var i=s[e].index,n=s[e].rgb.slice();return 4===n.length&&n[3]>=0&&n[3]<=1||(n[3]=h[0]+(h[1]-h[0])*i),n})),u=[];for(d=0;d<e.length-1;++d){r=e[d+1]-e[d],i=p[d],n=p[d+1];for(var c=0;c<r;c++){var v=c/r;u.push([Math.round(ys(i[0],n[0],v)),Math.round(ys(i[1],n[1],v)),Math.round(ys(i[2],n[2],v)),ys(i[3],n[3],v)])}}u.push(s[s.length-1].rgb.concat(h[1])),"hex"===a?u=u.map(Es):"rgbaString"===a?u=u.map(ks):"float"===a&&(u=u.map(Ps));return u};function Ps(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function Es(t){for(var e,i="#",n=0;n<3;++n)i+=("00"+(e=(e=t[n]).toString(16))).substr(e.length);return i}function ks(t){return"rgba("+t.join(",")+")"}const Ms=(t,e)=>Cs({colormap:t,nshades:e,format:"float",alpha:1}),Ss=(t,e,i)=>t*(1-i)+e*i,Ts=(t,e=0,i=1)=>Math.min(i,Math.max(e,t));/(iPad|iPhone|iPod)/g.test(navigator.userAgent);const Ds={audio:{channelCount:{ideal:2,min:1},echoCancellation:!0,autoGainControl:!0,noiseSuppression:!0}};const Vs=Math.min(1.2,window.devicePixelRatio);const As=Math.PI/2;const Ls=new class{meydaPromise({constrains:t=Ds,bufferSize:e=512}){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(t).then((t=>this.successStream({stream:t,bufferSize:e}))).catch((t=>this.errorStream(t))):Promise.reject(new Error("getUserMedia is not supported in this browser. Please use a modern browser with Web Audio API support."))}successStream({stream:t,bufferSize:e}){this.audioContext=new AudioContext;const i=t.getAudioTracks()[0];return i&&(this.streamAudioSettings=i.getSettings()),this.source=this.audioContext.createMediaStreamSource(t),this.meyda=P.exports.createMeydaAnalyzer({audioContext:this.audioContext,source:this.source,bufferSize:e}),this.meyda.start(),t}errorStream(t){"NotAllowedError"===t.name||"NotFoundError"===t.name||t.name}features(t=["amplitudeSpectrum","spectralCentroid","spectralRolloff","perceptualSharpness","loudness","rms","chroma","mfcc"]){return this.meyda&&this.audioContext?this.meyda.get(t):null}signal(){return this.meyda?this.meyda._m.signal:null}},Rs=document.querySelector("#cover"),Os=document.querySelector("#canvas"),js=new Ar;let Us,Bs,zs,Is,Fs,Ks,Ns,Hs,Ys,qs,$s;document.querySelector("#stats").appendChild(js.dom);const Xs={amount:4,xscale:50},Zs={loudness:0,perceptualSharpness:0,perceptualSpread:0,spectralFlatness:0},Gs=new Lr.exports.Pane({title:"controls",expanded:!0});Gs.addInput(Xs,"amount",{min:1,max:6}),Gs.addInput(Xs,"xscale",{min:20,max:100}),Gs.addMonitor(Zs,"loudness",{view:"graph",min:0,max:1}),Gs.addMonitor(Zs,"perceptualSpread",{view:"graph",min:0,max:1}),Gs.addMonitor(Zs,"perceptualSharpness",{view:"graph",min:0,max:1}),Gs.addMonitor(Zs,"spectralFlatness",{view:"graph",min:0,max:1});class Qs{init(){const t=new R;Is=new L(75,1.3333333333333333,5,1e4),Is.position.set(0,-5,10),Is.lookAt(0,0,0),zs=new O({canvas:Os,antialias:!0,alpha:!0,powerPreference:"high-performance"}),zs.setPixelRatio(Vs),Ns=function(t,e){const i=new ls(t,e);return i.enableDamping=!0,i.enablePan=!1,i.maxDistance=25,i.minDistance=7,i.dampingFactor=.05,i.minAzimuthAngle=-Math.PI,i.maxAzimuthAngle=Math.PI,i.minPolarAngle=1,i.maxPolarAngle=As,i}(Is,Os),Ns.update();const e=new j(16777215,.75);e.position.set(0,1,1),t.add(e);const r=new Nr(t,Is);let s=Os.clientWidth*Vs,o=Os.clientHeight*Vs,l=new a(s,o);Ks=new Yr(l,0,0,0),Ks.threshold=0,Ks.strength=1.75,Ks.radius=1.5,Fs=new Kr(zs),Fs.addPass(r),Fs.addPass(Ks),Us=((t,e)=>{let i=[];for(let n=0;n<t;n++)i.push(Array(e).fill(0));return i})(50,512),qs=new U,$s=new u,Hs=new B(new z(1),new I({color:16777215}),512),Hs.instanceMatrix.setUsage(F),Hs.position.set(-8,0,0),Hs.scale.set(1,1,1);let h=Ms("picnic",Us.length);Bs=Ms("picnic",512).map((t=>(new u).fromArray(t))),Bs.forEach(((t,e)=>Hs.setColorAt(e,t))),t.add(Hs),Ys=new K;for(let a=0;a<Us.length;a++)if(Us[a]){const t=new n;t.setAttribute("position",new N(new Float32Array(3*Us[a].length),3)),t.setDrawRange(0,Us[a].length);const e=new H({uniforms:{uColor:{value:h[Us.length-a-1]}},vertexShader:"\n    precision highp float;\n    precision highp int;\n  \n    uniform mat4 viewMatrix;\n    uniform mat4 projectionMatrix;\n    uniform mat4 modelMatrix;\n   \n    attribute vec3 position;\n  \n    uniform vec4 uColor;\n  \n    varying vec4 vColor;\n  \n    void main(){\n      \n      gl_Position = projectionMatrix * viewMatrix * // THREE.Camera\n        modelMatrix * // THREE.Mesh\n        vec4( position, 1.0 ); // from THREE.BufferGeometry\n  \n      vColor = uColor;\n    }\n  ",fragmentShader:"\n    precision highp float;\n  \n    varying vec4 vColor;\n  \n    void main(){\n      gl_FragColor =vColor;\n    }\n  ",transparent:!0,side:Y}),r=new i(t,e);r.frustumCulled=!1,Ys.add(r)}t.add(Ys)}intro(){Tr.timeline().to("#cover",{duration:1,autoAlpha:0,ease:"power2.out"}).to("#cover",{duration:1,delay:1,autoAlpha:0,ease:"power2.out"})}render([{timestamp:t}]){if(function({renderer:t,composer:e}){const i=t.domElement,n=i.clientWidth*Vs|0,r=i.clientHeight*Vs|0,s=i.width!==n||i.height!==r;return s&&(t.setSize(n,r,!1),e.setSize(n,r)),s}({renderer:zs,composer:Fs})){const{clientWidth:t,clientHeight:e}=zs.domElement;Is.aspect=t/e,Is.updateProjectionMatrix()}const e=Ls.features(["perceptualSharpness","perceptualSpread","spectralFlatness","amplitudeSpectrum","loudness"]);if(!e)return;const{amplitudeSpectrum:i}=e;Us.pop(),Us.unshift(i),Object.assign(Zs,(t=>{const{perceptualSpread:e,perceptualSharpness:i,spectralFlatness:n,loudness:r}=t;return{loudness:(s=3,o=50,a=r.total,Ts((a-s)/(o-s))),perceptualSharpness:i,perceptualSpread:e,spectralFlatness:n};var s,o,a})(e));const{loudness:n,perceptualSharpness:r,perceptualSpread:s}=Zs;Ks.strength=Ss(1,1.25,n),Ks.radius=Ss(1,3,r);for(let a=0;a<Us.length;a++){const t=Ys.children[a].geometry.getAttribute("position");for(let e=0;e<3*t.count;e++){const i=3*e;t.array[i+0]=Xs.xscale+Xs.xscale*Math.log10(e/Us[a].length),t.array[i+1]=-15+Zs.perceptualSharpness+Us[a][e]*(Xs.amount*n),t.array[i+2]=15-a*(5*s)}t.needsUpdate=!0}const o=Ls.signal();if(o&&Hs){for(let e=0;e<512;e++)qs.position.set(15*e/512,30*o[e],0),qs.rotation.set(.001*(t+n),0,n),qs.scale.set(.5*n,.5*r,.5*s),qs.updateMatrix(),$s.set(Bs[e]),Hs.setColorAt(e,$s),Hs.setMatrixAt(e,qs.matrix);Hs.instanceMatrix.needsUpdate=!0,Hs.instanceColor.needsUpdate=!0}Ns.update(),Fs.render(),js.update()}run$(){return Tr.timeline().to("#cover",{duration:2,autoAlpha:1,ease:"expo.inOut"}),q(X([(i=Rs,E(i,"click").pipe(V(250),A())),Z(Ls.meydaPromise({fftSize:512}))]).pipe(G({count:2,delay:1e3}),$((()=>{this.init(),this.intro()}))),(e=32,t=E(document,"keydown").pipe(k((t=>t.keyCode===e)),M(!1),S((t=>!t))),T().pipe(D(t),k((t=>!t[1])))).pipe($(this.render))).pipe(Q((t=>{const e=this.getErrorMessage(t);return this.showError(e),W}))).subscribe();var t,e,i}}document.addEventListener("DOMContentLoaded",(()=>{(new Qs).run$()}));
